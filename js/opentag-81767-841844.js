/*
 * Opentag, a tag deployment platform
 * Copyright 2011-2016, Qubit Group
 * http://opentag.qubitproducts.com
 */
(function(){var globalScope=function(){return this}();globalScope.qubit=globalScope.qubit||{};globalScope.qubit.SYSTEM_DEFAULTS={pingServerUrl:"pong.qubitproducts.com",tellLoadTimesProbability:1}})();
(function(){var ClientConfig={"id":"81767"};try{var global=function(){return this}();if(!global.qubit)global.qubit={};var qubit=global.qubit;if(!qubit.cs)qubit.cs={};qubit.CLIENT_CONFIG=ClientConfig;var cid=ClientConfig.id||"efault";cid="d"+cid;if(!qubit.cs[cid])qubit.cs[cid]={};qubit.cs[cid].ClientConfig=ClientConfig;if(qubit.SYSTEM_DEFAULTS)qubit.cs[cid].SystemDefaults=qubit.SYSTEM_DEFAULTS}catch(e){}})();
(function(){(function(){(function(){if(!Function.prototype.bind)Function.prototype.bind=function(oThis){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying "+"to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1);var fToBind=this;var FNOP=function(){};var fBound=function(){return fToBind.apply(this instanceof FNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};FNOP.prototype=this.prototype;fBound.prototype=new FNOP;
return fBound}})();var PKG_ROOT={__anonymous__:true};var GLOBAL=null;try{GLOBAL=(false||eval)("this")||function(){return this}()}catch(e){}PKG_ROOT=GLOBAL;var qubit=PKG_ROOT.qubit||{};if(!PKG_ROOT.qubit)PKG_ROOT.qubit=qubit;var qversion="3.0.2-r9";if(qubit.VERSION&&qubit.VERSION!==qversion)try{console.warn("There is already 'qubit.VERSION' set to: "+qubit.VERSION)}catch(ex){}qubit.VERSION=qversion;try{module.exports=PKG_ROOT}catch(e){}var EMPTY_FUN=function(){};var UNDEF;(function(){function Define(){}
function _namespace(path,instance,pckg,noOverride,isGlobal){var files=path.split(".");var current=Define.NAMESPACE_BASE||PKG_ROOT;var last=null;var lastName=null;var i;if(isGlobal)current=GLOBAL;var root=current;current=pckg||current;for(i=0;i<files.length-1;i+=1){last=current;lastName=files[i];current[lastName]=current[lastName]||{};current=current[lastName]}last=current;lastName=files[files.length-1];if(GLOBAL.TAGSDK_NS_OVERRIDE)noOverride=false;if(instance!==undefined){if(last[lastName]===undefined||
!noOverride)last[lastName]=instance}else last[lastName]=last[lastName]||{};if(instance){instance.CLASSPATH=files.join(".");files.splice(files.length-1,1);instance.PACKAGE_NAME=files.join(".")}return{root:root,object:last,instance:last[lastName]}}Define.global=function(){return GLOBAL};Define.STANDARD_CS_NS="qubit.cs";Define.clientSpaceClasspath=function(){if(window.qubit.CLIENT_CONFIG)return"qubit.cs.d"+window.qubit.CLIENT_CONFIG.id;return Define.STANDARD_CS_NS};Define.globalNamespace=function(path,
instance,pckg,noOverride){return _namespace(path,instance,pckg,noOverride,true)};Define.namespace=function(path,instance,pckg,noOverride){return _namespace(path,instance,pckg,noOverride,false)};Define.clientNamespace=function(path,instance,pckg,noOverride){return Define.namespace(Define.clientSpaceClasspath()+"."+path,instance,pckg,noOverride)};Define.clazz=function(path,Class,SuperClass,pckg,config){Define.namespace(path,Class,pckg,true);if(typeof SuperClass==="function"){Class.SUPER=SuperClass;
Class.superclass=SuperClass;Class.prototype=new SuperClass(config);Class.prototype.SUPER=SuperClass;Class.prototype.CLASS=Class}var names=path.split(".");if(Class.prototype){Class.prototype.CLASSPATH=names.join(".");Class.prototype.CLASS_NAME=names[names.length-1];names.splice(names.length-1,1);Class.prototype.PACKAGE_NAME=names.join(".")}else{Class.CLASSPATH=names.join(".");Class.STATIC_NAME=names[names.length-1];names.splice(names.length-1,1);Class.PACKAGE_NAME=names.join(".")}return Class};Define.clazz("qubit.Define",
Define);Define.clientClazz=function(path,Class,SuperClass,pckg,config){return Define.clazz(Define.clientSpaceClasspath()+"."+path,Class,SuperClass,pckg,config)};Define.STANDARD_VS_NS="qubit.vs";Define.vendorsSpaceClasspath=function(path){var cp=qubit.VENDOR_SPACE_CP;var result=cp===undefined||cp===null?Define.STANDARD_VS_NS:cp;if(path)if(result)return result+"."+path;else return path;return result};var nsTmp=Define.vendorsSpaceClasspath();var _vspace;if(nsTmp)_vspace=Define.namespace(nsTmp,{},null,
true).instance;else _vspace=Define.global();Define.getVendorSpace=function(){return _vspace};Define.vendorNamespace=function(path,instance,pckg,noOverride){path=Define.vendorsSpaceClasspath(path);return Define.namespace(path,instance,pckg,noOverride)};Define.vendorClazz=function(path,Class,SuperClass,pckg,config){path=Define.vendorsSpaceClasspath(path);return Define.clazz(path,Class,SuperClass,pckg,config)}})();(function(){function Cookie(config){}var cookieAlphabet="abcdefghijklmnopqrstuvwxyz"+"0123456789"+
"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-#$\x26+()@"+"'%./:\x3c\x3e?["+'"]^_`{|}~'+"\\"+";\x3d";var cookieAlphabetMap={};for(var i$$0=0;i$$0<cookieAlphabet.length;i$$0++)cookieAlphabetMap[cookieAlphabet.charAt(i$$0)]=i$$0;qubit.Define.clazz("qubit.Cookie",Cookie);Cookie.cookieAlphabet=cookieAlphabet;Cookie.cookieAlphabetMap=cookieAlphabetMap;Cookie.decode=function(string){return unescape(string)};Cookie.encode=function(string){return escape(string)};Cookie.set=function(name,value,days,domain,notEncoded){var expires;
if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1E3);expires="; expires\x3d"+date.toGMTString()}else expires="";if(!notEncoded){name=Cookie.encode(name);value=Cookie.encode(value)}var cookie=name+"\x3d"+value+expires+"; path\x3d/;";if(domain)cookie+=" domain\x3d"+domain;document.cookie=cookie};Cookie.get=function(name,notDecoded){var part=name+"\x3d";var chunks=document.cookie.split(";");for(var i=0;i<chunks.length;i++){for(var chunk=chunks[i];chunk.charAt(0)===" ";)chunk=chunk.substring(1,
chunk.length);if(chunk.indexOf(part)===0){var tmp=chunk.substring(part.length,chunk.length);if(!notDecoded)tmp=Cookie.decode(tmp);return tmp}}return null};Cookie.getAllForName=function(name,decoded){if(!name)return[];var part=name+"\x3d";var chunks=document.cookie.split(";");var cookies=[];for(var i=0;i<chunks.length;i++){for(var chunk=chunks[i];chunk.charAt(0)===" ";)chunk=chunk.substring(1,chunk.length);if(chunk.indexOf(part)===0){var tmp=chunk.substring(part.length,chunk.length);if(decoded)tmp=
Cookie.decode(tmp);cookies.push(tmp)}}return cookies};Cookie.getAll=function(decoded){var chunks=document.cookie.split(";");var cookies=[];for(var i=0;i<chunks.length;i++){for(var chunk=chunks[i];chunk.charAt(0)===" ";)chunk=chunk.substring(1,chunk.length);var name=chunk.substring(0,chunk.indexOf("\x3d"));var tmp=chunk.substring(name.length+1,chunk.length);if(decoded)tmp=Cookie.decode(tmp);cookies.push([name,tmp])}return cookies};Cookie.rm=function(name,domain){Cookie.set(name,"",-1,domain)}})();
(function(){function addAnonymousAcessor(obj){return Utils.addToArrayIfNotExist(Utils.ANON_VARS,obj)}function escapeRegExp(string){return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function existsInPath(object,copy){var len=travelArray.length;for(var i=0;i<len;i++)if(object===travelArray[i][0])return travelArray[i][1];travelArray[travelArray.length]=[object,copy];return false}function _objectCopy(obj,cfg,maxDeep,start,parentObj){var nodes=false;var noOwn=false;var noFunctions=false;var win=
false;var all=false;var copyReference=false;var emptyForMaxDeep=false;if(cfg){all=!!cfg.all;nodes=all||cfg.nodes;win=all||cfg.win;noOwn=all;emptyForMaxDeep=!!cfg.emptyForMaxDeep;noFunctions=cfg.noFunctions&&!all;if(cfg.noOwn!==undefined)noOwn=!!cfg.noOwn;if(cfg.noFunctions!==undefined)noFunctions=!!cfg.noFunctions;if(cfg.win!==undefined)win=!!cfg.win;if(cfg.nodes!==undefined)nodes=!!cfg.nodes;copyReference=!!cfg.copyReference}if(maxDeep!==undefined&&!maxDeep){if(emptyForMaxDeep)return;return obj}else if(maxDeep!==
undefined)maxDeep--;if(!obj||!(obj instanceof Object))return obj;if(!nodes){try{if(obj instanceof Node)return obj}catch(ie){if(obj instanceof ActiveXObject&&obj.nodeType!==undefined)return obj}if(obj===document)return obj}if(!win)if(obj===global)return obj;var copy=obj instanceof Array?[]:{};if(obj instanceof Date)copy=new Date(obj);if(!noFunctions&&obj instanceof Function){var funStr=String(obj).replace(/\s+/g,"");if(funStr.indexOf("{[nativecode]}")+14===funStr.length)copy=function(){return obj.apply(parentObj||
this,arguments)};else copy=function(){return obj.apply(this,arguments)}}if(start===undefined){travelArray=[];start=0}var existingCopy=existsInPath(obj,copy);if(existingCopy)return existingCopy;var i;if(copy instanceof Array)for(i=0;i<obj.length;i++)if(obj[i]===obj[i])copy[copy.length]=_objectCopy(obj[i],cfg,maxDeep,start+1,obj);else copy[copy.length]=obj[i];else{i=0;for(var prop in obj){if(noOwn||obj.hasOwnProperty(prop))if(obj[prop]===obj[prop])copy[prop]=_objectCopy(obj[prop],cfg,maxDeep,start+
1,obj);else copy[prop]=obj[prop];i++}}if(cfg.proto)copy.prototype=_objectCopy(obj.prototype,cfg,maxDeep,start+1,obj);if(copyReference)copy.___copy_ref=obj;return copy}function existsInTraversePath(object,max){for(var i=0;i<max&&i<traverseArray.length;i++)if(object===traverseArray[i])return true;return false}function _traverse(obj,exe,cfg,start,parent,prop,trackPath,maxDeep){cfg=cfg||{};if(cfg.hasOwn===undefined)cfg.hasOwn=true;if(cfg.objectsOnly&&!(obj instanceof Object))return;if(maxDeep!==undefined&&
!maxDeep)return;else if(maxDeep!==undefined)maxDeep--;if(!cfg||!cfg.nodes)try{if(obj instanceof Node)return}catch(ie){if(obj instanceof ActiveXObject&&obj.nodeType!==undefined)return}if(obj===global)return;if(start===undefined){traverseArray=[];start=0}if(existsInTraversePath(obj,start))return;traverseArray[start]=obj;parent=parent||obj;if(parent&&prop&&parent[prop]!==parent[prop])return;var stopHere=exe(obj,parent,prop,trackPath);if(stopHere)return;var i=0;var objPath="";for(var pprop in obj){if(!cfg.hasOwn||
obj.hasOwnProperty(pprop))try{var object=obj[pprop];if(cfg.track)objPath=trackPath?trackPath+"."+pprop:pprop;_traverse(object,exe,cfg,start+1,parent,pprop,objPath,maxDeep)}catch(e){}i++}}var Define=qubit.Define;var Cookie=qubit.Cookie;var Utils=function(){};var global=Define.global();Define.clazz("qubit.opentag.Utils",Utils);Utils.global=Define.global;Utils.namespace=Define.namespace;Utils.clazz=Define.clazz;Utils.getObjectUsingPath=function(path,base){base=base||global;var parts=path.split(".");
for(var i=0;i<parts.length;i++)if(base&&parts[i])base=base[parts[i]];return base};Utils.getParentObject=function(name){var idx=name.lastIndexOf(".");var path=name.substring(0,idx);return Utils.getObjectUsingPath(path)};Utils.variableExists=function(value){return value!==undefined&&value!==null};Utils.ANON_VARS=[];Utils.getAnonymousAcessor=function(obj){var index=Utils.indexInArray(obj,Utils.ANON_VARS);if(index===-1)index=addAnonymousAcessor(obj);return"qubit.opentag.Utils.ANON_VARS["+index+"]"};Utils.replaceAll=
function(string,pattern,replace){return string.replace(new RegExp(escapeRegExp(pattern),"g"),replace)};Utils.secureText=function(string){if(typeof string!=="string")string+="";string=string.replace(/</g,"\x26lt;");string=string.replace(/>/g,"\x26gt;");return string};Utils.getUrl=function(){return document.location.href};Utils.getQueryParam=function(param){var i;var ii;var params;var url;var query;var queries;var splitQuery;url=Utils.getUrl();if(url.indexOf("?")>0){queries=url.substring(url.indexOf("?")+
1).split("\x26");for(i=0,ii=queries.length;i<ii;i+=1){query=queries[i];if(query.indexOf("\x3d")>0){splitQuery=query.split("\x3d");if(splitQuery.length===2&&splitQuery[0]===param)return splitQuery[1]}}}return null};Utils.getElementValue=function(elementId){var el=document.getElementById(elementId);if(el)return el.textContent||el.innerText;return null};var travelArray=[];Utils.objectCopy=function(obj,cfg){cfg=cfg||{};var res=_objectCopy(obj,cfg,cfg.maxDeep);travelArray=[];return res};var traverseArray=
[];Utils.traverse=function(obj,exe,cfg){var u;_traverse(obj,exe,cfg,u,u,u,u,cfg.maxDeep)};Utils.prepareQuotedString=function(string){if(typeof string==="string")return'"'+string.replace(/\"/g,'\\"')+'"';else return string};Utils.expressionToFunction=function(expr,argzString){argzString=argzString||"";var funTemplate="function ("+argzString+") {"+expr+"}";return Utils.gevalAndReturn(funTemplate).result};Utils.defineWrappedClass=function(classPath,extClass,prototypeTemplate,pckg,constr){var clazz=function(){if(constr)return constr.apply(this,
arguments);else return extClass.apply(this,arguments)};Define.clazz(classPath,clazz,extClass,pckg);for(var prop in prototypeTemplate)if(prototypeTemplate.hasOwnProperty(prop)&&prop!=="CONSTRUCTOR")clazz.prototype[prop]=prototypeTemplate[prop];return clazz};Utils.copyAandAddFromB=function(A,B,maxDeep){maxDeep=maxDeep||8;var copy=this.objectCopy(A,{maxDeep:maxDeep});for(var prop in B)if(B.hasOwnProperty(prop))copy[prop]=B[prop];return copy};Utils.keys=function(obj){if(obj instanceof Object){if(Object.keys)return Object.keys(obj);
var keys=[];for(var prop in obj)if(obj.hasOwnProperty(prop))keys[keys.length]=prop;return keys}else throw"keys() called on non-object!";};Utils.getSrcElement=function(evt){var elem;evt=evt||window.event;if(evt.srcElement)elem=evt.srcElement;else if(evt.target)elem=evt.target;return elem};Utils.addToArrayIfNotExist=function(array,obj,equals){var i=0;for(var exists=false;i<array.length;i+=1){var tmp=equals&&equals(array[i],obj);if(tmp||array[i]===obj){exists=true;break}}if(!exists){array[array.length]=
obj;i=-1}return i};Utils.indexInArray=function(array,obj){var i=0;for(var exists=false;i<array.length;i++)if(array[i]===obj){exists=true;break}return exists?i:-1};Utils.removeFromArray=function(array,obj){var i=0;for(var total=0;i<array.length;i+=1)if(array[i]===obj){array.splice(i,1);total++}return total};Utils.addClass=function(node,name){var classes;try{node.classList.add(name)}catch(ex){if(node.className===null){node.className=name;return}classes=node.className.split(" ");Utils.addToArrayIfNotExist(classes,
name);node.className=classes.join(" ")}};Utils.removeClass=function(node,name){var classes;try{node.classList.remove(name)}catch(ex){if(node.className===null){node.className="";return}classes=node.className.split(" ");Utils.removeFromArray(classes,name);node.className=classes.join(" ")}};var prefix="try{this.qubitopentagutilsgevalandreturn__var_test__\x3d(";var suffix=");}catch(ex){"+"this.qubitopentagutilsgevalandreturn__var_test__error \x3d ex;}";Utils.gevalAndReturn=function(expression){var G=
GLOBAL;G.qubitopentagutilsgevalandreturn__var_test__=undefined;G.qubitopentagutilsgevalandreturn__var_test__error=undefined;expression=prefix+expression+suffix;Utils.geval(expression);var res=G.qubitopentagutilsgevalandreturn__var_test__;var err=G.qubitopentagutilsgevalandreturn__var_test__error;try{G.qubitopentagutilsgevalandreturn__var_test__=UNDEF;G.qubitopentagutilsgevalandreturn__var_test__error=UNDEF;delete G.qubitopentagutilsgevalandreturn__var_test__;delete G.qubitopentagutilsgevalandreturn__var_test__error}catch(ex){}return{result:res,
error:err}};Utils.trim=function(string){try{return String(string).trim()}catch(noTrim){return String(string).replace(/^\s+|\s+$/g,"")}};Utils.setIfUnset=function(obj,src){if(obj&&src)for(var prop in src)if(src.hasOwnProperty(prop)&&!obj.hasOwnProperty(prop))obj[prop]=src[prop]};Utils.overrideFromBtoA=function(A,B){if(A&&B)for(var prop in B)if(B.hasOwnProperty(prop))A[prop]=B[prop];return A};Utils.geval=function(expression){if(window&&window.execScript)return window.execScript(expression===""?" ":
expression);else return function(){return global["eval"].call(global,expression)}()};var _availStack=[];Utils.bodyAvailable=function(callback){var avail=!!document.body;if(avail){if(_availStack){for(var i=0;i<_availStack.length;i++)try{_availStack[i]()}catch(ex){}_availStack=false}callback()}else _availStack.push(callback)};Utils.rmCookiesMatching=function(string){var cookies=Cookie.getAll();for(var i=0;i<cookies.length;i++){var name=cookies[i][0];if(name.match(string)===0)Cookie.rm(name)}};var _readyCalls=
[];var _loaded=false;var _flushed=false;Utils.bodyReady=function(callback){if(_flushed){if(callback)callback();return true}_loaded=_loaded||!!(document.body&&document.readyState==="complete");if(_loaded){_flushed=true;for(var i=0;i<_readyCalls.length;i++)try{_readyCalls[i]()}catch(ex){}if(callback)callback()}else if(callback)_readyCalls.push(callback);return _loaded};var oldOnload=global.onload;global.onload=function(e){try{Utils.bodyReady()}catch(ex){try{window.qubit.opentag.Utils.bodyReady()}catch(ex1){}}var oldRef=
false;try{oldRef=oldOnload}catch(ex2){}if(oldRef)oldRef(e)};(function(){var DOMContentLoaded;var isReady=false;var readyWait=1;var readyList;var readyComplete;var bindReadyComplete;var doScrollCheck;readyComplete=function(wait){var f;if(wait===true)readyWait-=1;if(!readyWait||wait!==true&&!isReady){if(!document.body)return setTimeout(readyComplete,1);isReady=true;if(wait!==true){readyWait-=1;if(readyWait>0)return}for(;readyList.length>0;){f=readyList.shift();f()}}};doScrollCheck=function(){if(isReady)return;
try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}readyComplete()};bindReadyComplete=function(){if(readyList)return;readyList=[];if(document.readyState==="complete")return setTimeout(readyComplete,1);if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",readyComplete,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",
readyComplete);var toplevel=false;try{toplevel=window.frameElement===null||window.frameElement===undefined}catch(e){}if(document.documentElement.doScroll&&toplevel)doScrollCheck()}};var ready=function(fn){bindReadyComplete();if(isReady)setTimeout(fn,1);else readyList.push(fn)};if(document.addEventListener)DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);readyComplete()};else if(document.attachEvent)DOMContentLoaded=function(){if(document.readyState===
"complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);readyComplete()}};ready(function(){_loaded=true;Utils.bodyReady()})})()})();(function(){function Timer(config){if(config){this._rate=config.rate||10;this._smallestRate=-1;if(config.start)this.startPooling();this.config=config}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}qubit.Define.clazz("qubit.opentag.Timer",Timer);Timer.prototype.timers=[];Timer.prototype.startPooling=function(smallestRate){if(smallestRate&&
this.config.dynamic)if(this._smallestRate<0||this._smallestRate>smallestRate)this._smallestRate=Math.min(Math.floor(smallestRate/2),1500);if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};Timer.prototype._pool=function(){this.maxFrequent(function(){var name="";if(this.config&&this.config.name)name="["+this.config.name+"]"},5E3,this._lck_obj);this.callTimers();if(this.timers.length!==0){var rate=this._smallestRate>this._rate?this._smallestRate:this._rate;setTimeout(this._binded_pool,
rate)}else{this.started=false;this._smallestRate=-1}};Timer.prototype.callTimers=function(){this.lastCalled=(new Date).valueOf();for(var i=0;i<this.timers.length;i++){var timer=this.timers[i];var stamp=(new Date).valueOf();if(stamp>=timer.time){try{timer.execute()}catch(e){}this.timers.splice(i,1);--i}}};Timer.prototype.cancellAll=function(){this.timers=[]};Timer.prototype.setRate=function(time){this._rate=time};Timer.prototype.maxFrequent=function(fun,time,lockObj){if(!lockObj){fun.__maxFrequent__timer_opentag_qubit_=
fun.__maxFrequent__timer_opentag_qubit_||{};lockObj=fun.__maxFrequent__timer_opentag_qubit_}var last=lockObj.____last__timed__max__frequent____;if(!last||(new Date).valueOf()-last>time){last=(new Date).valueOf();lockObj.____last__timed__max__frequent____=last;fun()}};Timer.prototype.runIfNotScheduled=function(fun,time,lockObj){lockObj=lockObj||fun;if(lockObj.__lastRun__&&(new Date).valueOf()<time+lockObj.__lastRun__)return this.schedule(fun,time,lockObj);else{lockObj.__lastRun__=(new Date).valueOf();
fun();return true}};Timer.prototype.schedule=function(fun,time,lockObj){if(lockObj.___scheduled___)return false;else{lockObj.___scheduled___=(new Date).valueOf();this.setTimeout(function(){lockObj.___scheduled___=false;lockObj.__lastRun__=(new Date).valueOf();fun()},time);return true}};var ids=1;Timer.prototype.setTimeout=function(call,time){var timer={id:ids++,time:(new Date).valueOf()+ +time,execute:call};this.timers.push(timer);this.startPooling(time);return timer};Timer.prototype.setInterval=
function(call,time){var interv=setInterval(call,time);this.inervals.push(interv);return interv}})();(function(){qubit.Define.namespace("qubit.opentag.Timed",new qubit.opentag.Timer({rate:37,dynamic:true}));var Timed=qubit.opentag.Timed;Timed.tillTrue=function(test,callback,often){var runner=function(){if(!test())Timed.setTimeout(runner,often||33);else callback()};runner()}})();var q={};q.html=q.html||{};q.html.fileLoader={};q.html.fileLoader.load=function(url,preLoadAction,postLoadHandler,parentNode,
async,attributes){var scriptEl;var preLoadResult;var loadError;var doPostLoad;var loaded;loaded=false;doPostLoad=function(loadFailed){return function(){if(!loaded){loaded=true;if(loadFailed&&!loadError)loadError={url:document.location.href};postLoadHandler(url,loadError,loadFailed)}}};try{if(preLoadAction)preLoadResult=preLoadAction(url)}catch(e){preLoadResult=false;postLoadHandler(url,"Exception loading pre",true)}finally{if(preLoadResult!==false){scriptEl=q.html.fileLoader.createScriptEl(url,async,
false,attributes);if(postLoadHandler){scriptEl.onload=doPostLoad(false);scriptEl.onerror=doPostLoad(true);scriptEl.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded")setTimeout(function(){doPostLoad(false)()},1)}}if(!parentNode)parentNode=window.document.getElementsByTagName("head")[0];parentNode.appendChild(scriptEl)}}};q.html.fileLoader.createScriptEl=function(path,async,forceReload,attr){var a;var scriptEl=document.createElement("script");scriptEl.type="text/javascript";
scriptEl.src=q.html.fileLoader.tidyUrl(path)+(forceReload?"?"+(new Date).getTime():"");if(async!==false){scriptEl.async="true";scriptEl.defer="true"}else{scriptEl.async="false";if(scriptEl.async!==false)scriptEl.async=false;scriptEl.defer="false";if(scriptEl.defer!==false)scriptEl.defer=false}for(a in attr)if(attr.hasOwnProperty(a))scriptEl.setAttribute(a,attr[a]);return scriptEl};q.html.fileLoader.tidyUrl=function(path){if(path.substring(0,5)==="http:")return path;if(path.substring(0,6)==="https:")return path;
return"//"+path};(function(){function BaseFilter(config){this.config={order:0,include:true,name:"Filter-"+counter++,script:undefined,session:undefined};this.session=null;if(config){for(var prop in config)if(config.hasOwnProperty(prop))this.config[prop]=config[prop];if(config.session)this.setSession(config.session);this.register(this)}}var Utils=qubit.opentag.Utils;var counter=0;var filters=[];qubit.Define.clazz("qubit.opentag.filter.BaseFilter",BaseFilter);BaseFilter.state={DISABLED:-3,SESSION:-2,
PASS:-1,FAIL:0};BaseFilter.prototype.reset=function(){this.enable()};BaseFilter.prototype.disable=function(){this.config.disabled=true};BaseFilter.prototype.enable=function(){this.config.disabled=false};BaseFilter.prototype.match=function(){return true};BaseFilter.prototype.setSession=function(session){this.session=session};BaseFilter.prototype.getSession=function(){return this.session};BaseFilter.prototype.getState=function(){var passed=BaseFilter.state.PASS;if(this.config.disabled)return BaseFilter.state.DISABLED;
if(this.config.script)passed=this.config.script.call(this,passed);if(isNaN(+passed))passed=BaseFilter.state.FAIL;this.lastState=+passed;return passed};BaseFilter.getFilters=function(){return filters};BaseFilter.prototype.register=function(){BaseFilter.register(this)};BaseFilter.register=function(filter){Utils.addToArrayIfNotExist(filters,filter)}})();(function(){var Define=qubit.Define;var PatternType={CONTAINS:"CONTAINS",MATCHES_EXACTLY:"MATCHES_EXACTLY",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH",
REGULAR_EXPRESSION:"REGULAR_EXPRESSION",ALL_URLS:"ALL_URLS"};Define.namespace("qubit.opentag.filter.pattern.PatternType",PatternType)})();(function(){function URLFilter(config){this._lockObject={};var defaultConfig={patternType:PatternType.CONTAINS,pattern:""};if(config)for(var prop in config)if(config.hasOwnProperty(prop))defaultConfig[prop]=config[prop];URLFilter.SUPER.call(this,defaultConfig)}var Utils=qubit.opentag.Utils;var BaseFilter=qubit.opentag.filter.BaseFilter;var Timed=qubit.opentag.Timed;
var PatternType=qubit.opentag.filter.pattern.PatternType;qubit.Define.clazz("qubit.opentag.filter.URLFilter",URLFilter,BaseFilter);URLFilter.prototype.PATTERNS=PatternType;URLFilter.prototype.getURL=function(url){return url||Utils.getUrl()};URLFilter.prototype.match=function(url){url=this.getURL(url);var match=true;var pattern=this.config.pattern;switch(this.config.patternType){case PatternType.CONTAINS:match=url.toLowerCase().indexOf(pattern.toLowerCase())>=0;break;case PatternType.MATCHES_EXACTLY:match=
url.toLowerCase()===this.config.pattern.toLowerCase();break;case PatternType.STARTS_WITH:match=url.toLowerCase().indexOf(pattern.toLowerCase())===0;break;case PatternType.ENDS_WITH:match=url.lastIndexOf(pattern.toLowerCase())+pattern.length===url.length;break;case PatternType.REGULAR_EXPRESSION:match=(new RegExp(pattern)).test(url);break;case PatternType.ALL_URLS:match=true;break}return match}})();(function(){function Filter(config){var defaultConfig={};if(config){for(var prop in config)if(config.hasOwnProperty(prop)){if(prop===
"customStarter"&&config[prop])this.customStarter=config[prop];else if(prop==="customScript"&&config[prop])this.customScript=config[prop];defaultConfig[prop]=config[prop]}this.uid="f"+sessionVariableFilterCount++}this.tagsToRun=[];Filter.SUPER.call(this,defaultConfig)}var BaseFilter=qubit.opentag.filter.BaseFilter;var URLFilter=qubit.opentag.filter.URLFilter;var Utils=qubit.opentag.Utils;var sessionVariableFilterCount=0;qubit.Define.clazz("qubit.opentag.filter.Filter",Filter,URLFilter);Filter.prototype.customStarter=
function(session,ready,tag){ready(false)};Filter.prototype.isSession=function(){if(this.config.sessionDisabled)return false;if(this.customStarter===null&&this.customScript===null)return false;return true};Filter.prototype.customScript=function(session){return true};Filter.prototype.match=function(url){var match=true;try{if(this.customScript){if(this._matchState===undefined)this._matchState=!!this.customScript(this.getSession());match=this._matchState}}catch(ex){match=false}return match&&Filter.SUPER.prototype.match.call(this,
url)};Filter.prototype.runTag=function(tag){Utils.addToArrayIfNotExist(this.tagsToRun,tag);if(!this.starterExecuted){if(!this._starterWasRun){this._starterWasRun=true;var callback=function(rerun){this.reRun=rerun;this.starterExecuted=(new Date).valueOf();this._processQueuedTagsToRun()}.bind(this);if(this.customStarter)this.customStarter(this.getSession(),callback,tag);else Filter.prototype.customStarter(this.getSession(),callback,tag)}}else if(this.reRun===true)tag.run();else tag.runOnce()};Filter.prototype._processQueuedTagsToRun=
function(){for(var i=0;i<this.tagsToRun.length;i++){var tag=this.tagsToRun[i];if(this.reRun===true)tag.run();else tag.runOnce()}};Filter.prototype.getState=function(session){if(session)this.setSession(session);var pass=Filter.SUPER.prototype.getState.call(this);if(pass===BaseFilter.state.DISABLED)return BaseFilter.state.DISABLED;if(pass===BaseFilter.state.PASS)if(this.isSession())pass=BaseFilter.state.SESSION;if(this.config.script)pass=this.config.script.call(this,pass,this.getSession());this.lastState=
pass;return pass};Filter.prototype.reset=function(){this._matchState=undefined;Filter.SUPER.prototype.reset.call(this);this._starterWasRun=undefined;this.starterExecuted=undefined;this.tagsToRun=[];this.reRun=undefined}})();q.html.GlobalEval={};q.html.GlobalEval.globalEval=function(src){if(window.execScript)window.execScript(src===""?" ":src);else{var fn=function(){window["eval"].call(window,src)};fn()}};q.html.HtmlInjector={};q.html.HtmlInjector.inject=function(el,injectStart,str,cb,parentNode){var i;
var ii;var d;var scriptsRaw;var scripts;var script;var contents;if(str.toLowerCase().indexOf("\x3cscript")>=0){d=document.createElement("div");d.innerHTML="a"+str;scriptsRaw=d.getElementsByTagName("script");scripts=[];for(i=0,ii=scriptsRaw.length;i<ii;i+=1)scripts.push(scriptsRaw[i]);contents=[];for(i=0,ii=scripts.length;i<ii;i+=1){script=scripts[i];var s={attributes:q.html.HtmlInjector.getAttributes(script)};if(script.src)s.src=script.src;else s.script=script.innerHTML;contents.push(s);script.parentNode.removeChild(script)}if(d.innerHTML)if(d.innerHTML.length>
0)d.innerHTML=d.innerHTML.substring(1);q.html.HtmlInjector.doInject(el,injectStart,d);q.html.HtmlInjector.loadScripts(contents,0,cb,el)}else{d=document.createElement("div");d.innerHTML=str;q.html.HtmlInjector.doInject(el,injectStart,d);if(cb)cb()}};q.html.HtmlInjector.doInject=function(el,injectStart,d){if(d.childNodes.length>0){for(var fragment=document.createDocumentFragment();d.childNodes.length>0;)fragment.appendChild(d.removeChild(d.childNodes[0]));if(injectStart)q.html.HtmlInjector.injectAtStart(el,
fragment);else q.html.HtmlInjector.injectAtEnd(el,fragment)}};q.html.HtmlInjector.injectAtStart=function(el,fragment){if(el.childNodes.length===0)el.appendChild(fragment);else el.insertBefore(fragment,el.childNodes[0])};q.html.HtmlInjector.injectAtEnd=function(el,fragment,counter){if(!counter)counter=1;if(el===document.body&&document.readyState!=="complete"&&counter<50)setTimeout(function(){q.html.HtmlInjector.injectAtEnd(el,fragment,counter+1)},100);else el.appendChild(fragment)};q.html.HtmlInjector.loadScripts=
function(contents,i,cb,parentNode){var ii;var c;var foundSrc=false;for(ii=contents.length;i<ii;i+=1){c=contents[i];if(c.src){foundSrc=true;break}else q.html.GlobalEval.globalEval(c.script)}if(foundSrc)q.html.fileLoader.load(c.src,null,function(){q.html.HtmlInjector.loadScripts(contents,i+1,cb,parentNode)},parentNode,false,c.attributes);if(cb&&i===ii)cb()};q.html.HtmlInjector.getAttributes=function(node){var a;var aLength;var attributes;var val;var name;var map={};if(node){attributes=node.attributes;
aLength=attributes.length;for(a=0;a<aLength;a++){val=attributes[a].value;name=attributes[a].name.toLowerCase();if(val!==""&&(name==="id"||name==="class"||name==="charset"||name.substr(0,5)==="data-"))map[name]=val}return map}};(function(){function saveDocWriteMethods(){redirectedDocWriteMethods=redirectedDocWriteMethods||{write:document.write,writeln:document.writeln}}function unlockDocWriteMethods(){document.write=redirectedDocWriteMethods.write;document.writeln=redirectedDocWriteMethods.writeln;
redirectedDocWriteMethods=null}var BaseFilter=qubit.opentag.filter.BaseFilter;var Utils=qubit.opentag.Utils;var HtmlInjector=q.html.HtmlInjector;var FileLoader=q.html.fileLoader;var Filter=qubit.opentag.filter.Filter;var TagsUtils=function(){};qubit.Define.clazz("qubit.opentag.TagsUtils",TagsUtils);var _bodyLoaded=false;TagsUtils.bodyLoaded=function(){if(_bodyLoaded)return true;_bodyLoaded=!!(document.body&&document.readyState!=="loading");return _bodyLoaded};TagsUtils.bodyAvailable=function(callback){return!!document.body};
var loadedURLs={};var STATE={SUCCESS:"success",FAIL:"failure",INIT:"not started"};TagsUtils.loadScript=function(config){var url=config.url;var loadingCheck=function(passedUrlFromLoader,loadError,loadFailed){loadedURLs[url].error=loadError;if(loadFailed){loadedURLs[url].state=STATE.FAIL;config.onerror()}else{loadedURLs[url].state=STATE.SUCCESS;config.onsuccess()}};if(loadedURLs[url]){if(config.noMultipleLoad)return loadingCheck(url,loadedURLs[url].error,loadedURLs[url].state===STATE.FAIL);loadedURLs[url].count+=
1}else loadedURLs[url]={count:1,state:null};var useWrite=!config.async;var loaded=TagsUtils.bodyLoaded();if(useWrite&&loaded);useWrite=useWrite&&!loaded;if(useWrite)TagsUtils.writeScriptURL(url,function(allOk,error){loadingCheck(url,error,!allOk)});else FileLoader.load(url,false,loadingCheck,config.node,config.async)};var redirectedDocWriteMethods=null;TagsUtils.redirectDocumentWritesToArray=function(array,log){var text=array;saveDocWriteMethods();document.write=function(t){text.push(t)};document.writeln=
function(t){text.push(t)}};TagsUtils.flushDocWritesArray=function(array,location,append,log,cb){var el=location;if(el&&array){var flushed=array.splice(0,array.length);try{TagsUtils.injectHTML(el,append,flushed.join("\n"),cb||EMPTY_FUN);return true}catch(ex){}}else{var message="Flushing location not found!";return false}if(cb)cb();return true};TagsUtils.unlockDocumentWrites=function(){if(redirectedDocWriteMethods)unlockDocWriteMethods()};var accessorBasePath=TagsUtils.prototype.PACKAGE_NAME+".TagsUtils._writeScriptURL_callbacks";
var accesorBase={};qubit.Define.namespace(accessorBasePath,accesorBase,GLOBAL,true);var wsCounter=0;var startFrom=(new Date).valueOf();TagsUtils.writeScriptURL=function(url,callback){var callName="_"+startFrom+"_"+wsCounter++;var accessorName=accessorBasePath+"."+callName;var called=false;accesorBase[callName]=function(error){if(called)return;called=true;if(error)callback(false,"error while loading script "+url);else callback(true);accesorBase[callName]=undefined;delete TagsUtils.writeScriptURL.callbacks[callName]};
var jsIE='if(this.readyState \x3d\x3d\x3d "loaded" || '+'this.readyState \x3d\x3d\x3d "complete"){ try {'+accessorName+"(true)"+"} catch (ex) {}}";var jsNonIE="try{"+accessorName+"(false)}catch(ex){}";var jsNonIEerr="try{"+accessorName+"(true)}catch(ex){}";var scr="scr";var value;url=FileLoader.tidyUrl(url);value="\x3c"+scr+"ipt onload\x3d'"+jsNonIE+"'  onerror\x3d'"+jsNonIEerr+"' onreadystatechange\x3d'"+jsIE+"' type\x3d'text/javascript' "+" src\x3d'"+url+"'\x3e"+"\x3c/"+scr+"ipt\x3e";if(redirectedDocWriteMethods){unlockDocWriteMethods();
document.write(value);saveDocWriteMethods()}else document.write(value);Utils.bodyReady(function(){if(!called){called=true;callback(true)}})};TagsUtils.writeScriptURL.callbacks={};var SESSION=BaseFilter.state.SESSION;var PASS=BaseFilter.state.PASS;var FAIL=BaseFilter.state.FAIL;TagsUtils.filtersState=function(filters,session,tag,runLastSessionFilterIfPresent){filters=filters.sort(function(a,b){try{var bOrder=b.config.order;var aOrder=a.config.order;if(isNaN(-aOrder))aOrder=0;if(isNaN(-bOrder))bOrder=
0;return bOrder-aOrder}catch(nex){return 0}});var decision=PASS;if(!filters||filters.length===0)return decision;var lastReadyToProcessFilter=null;var disabledFiltersPresent=false;var sessionFiltersPresent=false;var waitingResponse=0;var response;var lastSessionFilter;var sessionFiltersToRun=[];var filter;var lastUnmatched;for(var i=0;i<filters.length;i++){filter=filters[i];filter.setSession(session);if(filter.match()){response=filter.getState();if(response>0){if(waitingResponse===0||waitingResponse>
response)waitingResponse=response}else if(response===BaseFilter.state.DISABLED)disabledFiltersPresent=true;else if(response===SESSION){sessionFiltersPresent=true;lastReadyToProcessFilter=filter;lastSessionFilter=filter;sessionFiltersToRun.push(filter)}else lastReadyToProcessFilter=filter}else lastUnmatched=filter}var onlyAwaitingOrDisabledFiltersPresent=false;if(lastReadyToProcessFilter===null){onlyAwaitingOrDisabledFiltersPresent=true;if(!disabledFiltersPresent)decision=FAIL;else decision=PASS}else if(lastReadyToProcessFilter.config.include)decision=
response;else decision=response===PASS?FAIL:PASS;if(waitingResponse>0&&(decision===PASS||onlyAwaitingOrDisabledFiltersPresent))decision=waitingResponse;if(decision===SESSION||decision===PASS&&sessionFiltersPresent){if(!lastSessionFilter.config.include)return FAIL;decision=SESSION;if(lastSessionFilter instanceof Filter&&lastSessionFilter.isSession())if(runLastSessionFilterIfPresent)for(var c=0;c<sessionFiltersToRun.length;c++)try{sessionFiltersToRun[c].runTag(tag)}catch(ex){}}if(tag.config.dedupe&&
decision===PASS)if(lastUnmatched&&lastUnmatched instanceof Filter&&lastUnmatched.isSession()){tag.sendDedupePing=true;decision=FAIL}return decision};TagsUtils.injectHTML=function(location,append,html,callback){return HtmlInjector.inject(location,!append?1:0,html,callback||EMPTY_FUN)};TagsUtils.getHTMLLocationForTag=function(tag){var el;var name=tag.prepareLocationObject(tag.config.locationObject);switch(name){case "HEAD":el=document.getElementsByTagName("head")[0];break;case "BODY":el=document.body;
break;default:if(name)el=document.getElementById(name);else el=document.body}return el}})();(function(){function BaseVariable(config){this.config={};this.parameters=null;if(config){this.uniqueId="BV"+BV_COUNTER++;BaseVariable.ALL_VARIABLES[this.uniqueId]=this;for(var prop in config)this.config[prop]=config[prop];if(config.value!==undefined)this.value=config.value;if(config.defaultValue!==undefined)this.defaultValue=config.defaultValue;var ret=BaseVariable.register(this);if(ret&&ret!==this);return ret}}
function propertiesMatch(cfg,ccfg){for(var cprop in ccfg){var value=ccfg[cprop];for(var prop in cfg)if(cfg.hasOwnProperty(prop))if(cfg[prop]!==value)return false}return true}var Utils=qubit.opentag.Utils;var BV_COUNTER=0;qubit.Define.clazz("qubit.opentag.pagevariable.BaseVariable",BaseVariable);BaseVariable.ALL_VARIABLES={};BaseVariable.pageVariables=[];BaseVariable.register=function(variable){if(variable instanceof BaseVariable){for(var i=0;i<BaseVariable.pageVariables.length;i++){var regVar=BaseVariable.pageVariables[i];
if(variable===regVar)return regVar}BaseVariable.pageVariables.push(variable);return variable}return null};BaseVariable.prototype.getValue=function(){return this.value};BaseVariable.prototype.setValue=function(string){this.value=string};BaseVariable.prototype.getDefaultValue=function(){return this.defaultValue};BaseVariable.prototype.setDefaultValue=function(string){this.defaultValue=string};BaseVariable.prototype.exists=function(useDefaults){var exists=Utils.variableExists(this.getValue());if(useDefaults)exists=
exists||Utils.variableExists(this.getDefaultValue());return exists};BaseVariable.prototype.getRelativeValue=function(useDefaults,defaultValue){var pageValue=this.getValue();if(!Utils.variableExists(pageValue))pageValue=defaultValue;var defLoc;if(useDefaults&&!Utils.variableExists(pageValue)){defLoc=this.getDefaultValue();if(Utils.variableExists(defLoc))pageValue=defLoc}return pageValue};BaseVariable.prototype.replaceToken=function(token,string,altValue,useExpressionAccessor){var exists=this.exists();
var value=exists?this.getValue():altValue;token="\\$\\{"+token+"\\}";if(useExpressionAccessor||value instanceof Array){var acessorString;if(exists)acessorString=this.getValueAccessorString();else acessorString=Utils.getAnonymousAcessor(value);return string.replace(new RegExp(token,"g"),acessorString)}else return string.replace(new RegExp(token,"g"),value)};BaseVariable.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};BaseVariable.prototype.getValueAccessorString=
function(){return this.getAccessorString()+".getValue()"}})();(function(){function Expression(config){this._lockExprObject={};Expression.SUPER.apply(this,arguments)}var Utils=qubit.opentag.Utils;var Timed=qubit.opentag.Timed;qubit.Define.clazz("qubit.opentag.pagevariable.Expression",Expression,qubit.opentag.pagevariable.BaseVariable);Expression.prototype.getValue=function(){var ret;var error;try{if(this.value.indexOf("[#]")===-1){var tmp=Utils.gevalAndReturn(this.value);ret=tmp.result;this.failMessage=
null;error=tmp.error}else ret=Expression.parseUVArray(this.value)}catch(e){error=e}if(error){var msg="could not read value of expression: \n"+this.value+"\nexact cause: "+error;if(this.failMessage!==msg)this.failMessage=msg;ret=null}return ret};Expression.parseUVArray=function(uv){var parts=uv.split("[#]");var array=Utils.gevalAndReturn(parts[0]).result;var collection=[];var pathOfElements=parts[1];if(pathOfElements.indexOf(".")===0)pathOfElements=pathOfElements.replace(".","");for(var i=0;i<array.length;i++){var element=
Utils.getObjectUsingPath(pathOfElements,array[i]);collection.push(element)}return collection};Expression.prototype.replaceToken=function(token,string,altValue,exp){if(this.getValue()instanceof Array)exp=true;return Expression.SUPER.prototype.replaceToken.call(this,token,string,altValue,exp)}})();(function(){function DOMText(config){DOMText.SUPER.apply(this,arguments)}var Utils=qubit.opentag.Utils;qubit.Define.clazz("qubit.opentag.pagevariable.DOMText",DOMText,qubit.opentag.pagevariable.BaseVariable);
DOMText.prototype.getValue=function(){return Utils.getElementValue(this.value)}})();(function(){function Cookie(config){Cookie.SUPER.apply(this,arguments);this._lockObject={}}var Timed=qubit.opentag.Timed;qubit.Define.clazz("qubit.opentag.pagevariable.Cookie",Cookie,qubit.opentag.pagevariable.BaseVariable);Cookie.prototype.getValue=function(){var val=qubit.Cookie.get(this.value);Timed.maxFrequent(function(){}.bind(this),2E3,this._lockObject);return val}})();(function(){function URLQuery(config){URLQuery.SUPER.apply(this,
arguments)}var Utils=qubit.opentag.Utils;qubit.Define.clazz("qubit.opentag.pagevariable.URLQuery",URLQuery,qubit.opentag.pagevariable.BaseVariable);URLQuery.prototype.getValue=function(){return Utils.getQueryParam(this.value)}})();(function(){function TagHelper(){}function findParamatersForVariable(tag,varRef){var ret=[];try{var params=tag.parameters;if(params)for(var i=0;i<params.length;i++)if(tag.getVariableForParameter(params[i])===varRef)ret.push(params[i])}catch(ex){}return ret}var Utils=qubit.opentag.Utils;
var TagsUtils=qubit.opentag.TagsUtils;var Timed=qubit.opentag.Timed;var BaseVariable=qubit.opentag.pagevariable.BaseVariable;var Expression=qubit.opentag.pagevariable.Expression;var UniversalVariable=qubit.opentag.pagevariable.UniversalVariable;var DOMText=qubit.opentag.pagevariable.DOMText;var Cookie=qubit.opentag.pagevariable.Cookie;var URLQuery=qubit.opentag.pagevariable.URLQuery;qubit.Define.clazz("qubit.opentag.TagHelper",TagHelper);TagHelper.injectHTMLForLoader=function(tag,callback,tryWrite,
altHtml){var html=altHtml!==undefined?altHtml:tag.getHtml();if(html){var append=tag.config.locationPlaceHolder==="END";var location=TagsUtils.getHTMLLocationForTag(tag);tag.injectHTMLNotFinished=true;try{if(location)TagsUtils.injectHTML(location,append,html,function(){tag.injectHTMLNotFinished=false;if(callback)try{callback()}catch(e){}}.bind(tag));else if(tryWrite&&document.readyState==="loading"){document.write(html);tag.injectHTMLNotFinished=false}else tag.injectHTMLFailed=(new Date).valueOf()}catch(ex){tag.injectHTMLNotFinished=
false;tag.injectHTMLFailed=(new Date).valueOf()}}};TagHelper.getAllVariablesWithParameters=function(tag){var vars=tag.getPageVariables();var results=[];for(var i=0;i<vars.length;i++){var pageVar=vars[i];var parameters=findParamatersForVariable(tag,pageVar);for(var j=0;j<parameters.length;j++)results.push({parameter:parameters[j],variable:pageVar})}return results};var _lock_obj={};TagHelper.allParameterVariablesReadyForTag=function(tag,tryDefaults){var useDefaults=tryDefaults;var allReady=true;var vars=
tag.getPageVariables();for(var i=0;i<vars.length;i++){var pageVar=vars[i];try{var parameters=findParamatersForVariable(tag,pageVar);var exist=pageVar.exists();if(!exist&&useDefaults){if(parameters.length>0)exist=!!parameters[0].defaultValue;exist=exist||pageVar.exists(true)}if(!exist){allReady=false;break}}catch(ex){allReady=false;break}}return allReady};var JS_VALUE="2";var QUERY_PARAM="3";var COOKIE_VALUE="4";var ELEMENT_VALUE="5";TagHelper.validateAndGetVariableForParameter=function(param){if(param.hasOwnProperty("variable")&&
param.variable)param.variable=TagHelper.initPageVariable(param.variable);return param.variable};TagHelper.initPageVariable=function(cfg){if(!cfg||cfg instanceof BaseVariable)return cfg;if(typeof cfg==="string"){var tmp=Utils.getObjectUsingPath(cfg);if(tmp&&tmp instanceof BaseVariable)return tmp}switch(cfg.type){case JS_VALUE:return new Expression(cfg);case QUERY_PARAM:return new URLQuery(cfg);case COOKIE_VALUE:return new Cookie(cfg);case ELEMENT_VALUE:return new DOMText(cfg);case "EPRESSION":return new Expression(cfg);
case "URL_PARAMETER":return new URLQuery(cfg);case "COOKIE_VALUE":return new Cookie(cfg);case "DOM_VALUE":return new DOMText(cfg);default:return new BaseVariable(cfg)}}})();(function(){function Events(config){this.calls={}}var Define=qubit.Define;var Utils=qubit.opentag.Utils;Events.prototype.on=function(name,call){this.calls[name]=this.calls[name]||[];return Utils.addToArrayIfNotExist(this.calls[name],call)};Events.prototype.call=function(name){var calls=this.calls[name];if(calls)for(var i=0;i<calls.length;i++)try{calls[i]()}catch(ex){}};
Events.prototype.remove=function(name,call){return Utils.removeFromArray(this.calls[name],call)};Events.prototype.removeAll=function(call){var total=0;for(var prop in this.calls)if(this.calls.hasOwnProperty(prop))total+=Utils.removeFromArray(this.calls[prop],call);return total};Define.clazz("qubit.Events",Events)})();(function(){function GenericLoader(config){this.urlsLoaded=0;this.urlsFailed=0;this.events=new qubit.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies)this._triggerLoadingAndExecution()}.bind(this);
this.config={name:"Tag-"+nameCounter++,async:true,usesDocumentWrite:false,timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForInjectionLocation:false,noMultipleLoad:false,loadDependenciesOnLoad:false};this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=this.genericDependencies||[];if(config){if(!config.name){var n="Tag-"+nameCounter++;this.config.name=
n}this.addState("INITIAL");for(var prop in config)this.config[prop]=config[prop];if(config.genericDependencies)this.genericDependencies=this.genericDependencies.concat(config.genericDependencies);if(config.dependencies)this.dependencies=config.dependencies.concat(this.dependencies);if(config.PACKAGE)this._package=config.PACKAGE;this.onInit()}}function _waitForDependencies(){if(this.cancelled){this._handleCancel();return}this.waitForDependenciesFinished=(new Date).valueOf();var fullBodyNeededAndUnLoaded=
this._fullBodyNeededAndUnLoaded();var interactiveBodyNeededButNotReady=this._bodyNeededButNotAvailable();if(fullBodyNeededAndUnLoaded||interactiveBodyNeededButNotReady)this.waitForDependenciesFinished=false;else{if(!this.timeoutCountdownStart)this.timeoutCountdownStart=(new Date).valueOf();if(this.allDependenciesLoaded())this._markLoadedSuccesfuly();else if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=(new Date).valueOf();if(this.allDependenciesLoaded(true))this._markLoadedSuccesfuly();else{this.addState("TIMED_OUT");
this.loadingDependenciesFailed=(new Date).valueOf();this._triggerOnLoadTimeout()}}else this.waitForDependenciesFinished=false}if(!this.waitForDependenciesFinished)this._setTimeout(_waitForDependencies.bind(this),65);else this.addState("LOADED_DEPENDENCIES")}var Utils=qubit.opentag.Utils;var TagsUtils=qubit.opentag.TagsUtils;var Timed=qubit.opentag.Timed;var TagHelper=qubit.opentag.TagHelper;var nameCounter=0;qubit.Define.clazz("qubit.opentag.GenericLoader",GenericLoader);GenericLoader.prototype.onInit=
EMPTY_FUN;GenericLoader.prototype.LOADING_TIMEOUT=5*1E3;GenericLoader.prototype.getHtml=function(){if(this.config.html)return this.config.html;if(this.htmlContent)return Utils.trim(this.htmlContent);return null};GenericLoader.prototype._executeScript=function(){var success=false;try{this.script();success=true}catch(ex){this.addState("EXECUTED_WITH_ERRORS");this.executedWithErrors=(new Date).valueOf();this._onError(ex)}finally{this._onExecute(success)}};GenericLoader.prototype.getTimeout=function(){return this._getTimeout()};
GenericLoader.prototype._getTimeout=function(chain){var tout=+this.config.timeout;var deps=this.dependencies;if(tout!==-1&&deps.length>0){var max=0;chain=chain||[];var present=Utils.indexInArray(chain,this)!==-1;if(!present){chain[chain.length]=this;for(var i=0;i<deps.length;i++){var val=deps[i]._getTimeout(chain);if(val>max)max=val}if(max>0)tout+=max}else return 0}return tout};GenericLoader.prototype._onExecute=function(noErrors){this.onExecute(noErrors)};GenericLoader.prototype.onExecute=EMPTY_FUN;
GenericLoader.prototype._flushDocWrites=function(cb){var ret=true;this._docWriteNotFlushed=false;try{var loc=TagsUtils.getHTMLLocationForTag(this);if(loc&&this._securedWrites&&this._securedWrites.length>0){var append=this.config.locationPlaceHolder==="END";ret=TagsUtils.flushDocWritesArray(this._securedWrites,loc,append,this.log,cb);if(ret)this._docWriteFlushed=(new Date).valueOf();else this._docWriteNotFlushed=(new Date).valueOf()}}catch(ex){this._onError(ex)}if(cb)cb();if(this._securedWrites&&this._securedWrites.length>
0){ret=false;this._docWriteNotFlushed=(new Date).valueOf()}return ret};GenericLoader.prototype.log=EMPTY_FUN;GenericLoader.prototype.finished=function(){return!!this.runIsFinished};GenericLoader.prototype.script=function(){};GenericLoader.prototype.before=function(){this.beforeRun=(new Date).valueOf();try{this.onBefore()}catch(ex){this._onError(ex)}};GenericLoader.prototype.onBefore=EMPTY_FUN;GenericLoader.prototype.after=function(success){this.afterRun=(new Date).valueOf();try{this.onAfter(success)}catch(ex){this._onError(ex)}};
GenericLoader.prototype.onAfter=function(success){};GenericLoader.prototype.runOnce=function(){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=(new Date).valueOf();this.run()}};GenericLoader.CANCEL_ALL=false;GenericLoader.prototype.runCounter=0;GenericLoader.prototype.run=function(){if(this.cancelled||GenericLoader.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning)return false;if(this.lastRun)this.reset();this.lastRun=this.isRunning=(new Date).valueOf();this.runCounter++;
this._ignoreDeps=!!this.ignoreDependencies;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};GenericLoader.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-(new Date).valueOf();this.load();if(this._ignoreDeps)this.execute();else this.waitForDependenciesAndExecute();return true};GenericLoader.prototype._attachDepsEventsToContinue=function(){this.awaitingDependencies=(new Date).valueOf();
var deps=this.dependencies;for(var i=0;i<deps.length;i++)try{deps[i].events.on("success",this._depLoadedHandler)}catch(ex){}};GenericLoader.prototype.dependenciesLoaded=function(){var deps=this.dependencies;for(var i=0;i<deps.length;i++)if(deps[i]!==this){var executed=+deps[i].scriptExecuted>0;if(!executed)return false}return true};GenericLoader.prototype._setTimeout=function(fun,time){this._wasTimed=(new Date).valueOf();return Timed.setTimeout(fun,time)};GenericLoader.prototype._handleCancel=function(){this.addState("CANCELLED");
try{this.onCancel()}catch(ex){this._onError(ex)}};GenericLoader.prototype.waitForDependenciesAndExecute=function(){if(this.cancelled){this._handleCancel();return}if(this.loadedDependencies)this.execute();else if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else this._setTimeout(this.waitForDependenciesAndExecute.bind(this),30)};GenericLoader.prototype.execute=function(){this._triggerExecution()};GenericLoader.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();
return}if(this.scriptExecuted)return;var finished=true;if(this.shouldWaitForDocWriteProtection())finished=false;else{if(!this._beforeEntered){this._beforeEntered=(new Date).valueOf();var cancel=false;try{cancel=this.before()}catch(ex){this._onError(ex)}if(cancel){this._markFailure();this._markFinished();return}}finished=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted)return;if(this.unexpectedFail)finished=true;if(!finished)this._setTimeout(this._triggerExecution.bind(this),
30);else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail)this._markFailure();else{this.scriptExecuted=(new Date).valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{var successful=this.scriptExecuted>0;try{if(!this.afterRun){this.afterRun=(new Date).valueOf();this.after(successful)}}catch(ex){this.executedWithErrors=(new Date).valueOf()}if(!this.executedWithErrors)if(successful)this.events.call("success")}this._flushDocWrites();
this._markFinished()}};GenericLoader.prototype._markFailure=function(){this.scriptExecuted=-(new Date).valueOf();this.addState("FAILED_TO_EXECUTE")};GenericLoader.prototype._markFinished=function(){this.runIsFinished=(new Date).valueOf();this.isRunning=false;if(GenericLoader.LOCK_DOC_WRITE===this){this._flushDocWrites();TagsUtils.unlockDocumentWrites();GenericLoader.LOCK_DOC_WRITE=false}this.onFinished(true)};GenericLoader.prototype.onFinished=EMPTY_FUN;GenericLoader.prototype.onCancel=EMPTY_FUN;
GenericLoader.prototype.onFinished=EMPTY_FUN;GenericLoader.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite())if(!GenericLoader.LOCK_DOC_WRITE){GenericLoader.LOCK_DOC_WRITE=this;this._secureWriteAndCollectForExecution()}else if(GenericLoader.LOCK_DOC_WRITE!==this){if(!this._lockedDocWriteInformed)this._lockedDocWriteInformed=(new Date).valueOf();return true}return false};GenericLoader.prototype.runWithoutDependencies=function(){this.ignoreDependencies=true;this.run()};
GenericLoader.prototype.loadExecutionURLsAndHTML=function(callback){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed)this._loadExecutionURLsAndHTMLInformed=true;this._triggerURLsLoading(callback);if(!this.loadURLsNotFinished){this._flushDocWrites();this._triggerHTMLInjection();this._flushDocWrites();if(!this.injectHTMLNotFinished){this._flushDocWrites();if(!this._docWriteNotFlushed){if(this._docWriteFlushed);return true}}}return false};GenericLoader.prototype._triggerURLsLoading=
function(callback){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,callback)}};GenericLoader.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.getHtml()){this._injectHTMLTriggered=true;this.injectHTML()}};GenericLoader.prototype.STATE={INITIAL:0,STARTED:1,LOADING_DEPENDENCIES:2,LOADED_DEPENDENCIES:4,LOADING_URL:8,LOADED_URL:16,EXECUTED:32,EXECUTED_WITH_ERRORS:64,FAILED_TO_LOAD_DEPENDENCIES:128,FAILED_TO_LOAD_URL:256,FAILED_TO_EXECUTE:512,
TIMED_OUT:1024,UNEXPECTED_FAIL:2048,CANCELLED:2048*2};GenericLoader.prototype.addState=function(stateName){if(this.STATE.hasOwnProperty(stateName)){this.state=this.state|this.STATE[stateName];try{this.onStateChange(stateName)}catch(ex){this._onError(ex)}}};GenericLoader.prototype.onStateChange=EMPTY_FUN;GenericLoader.prototype.cancel=function(){this.cancelled=(new Date).valueOf()};GenericLoader.prototype.state=GenericLoader.prototype.STATE.INITIAL;GenericLoader.prototype._markLoadedSuccesfuly=function(){this.loadedDependencies=
(new Date).valueOf();this.onAllDependenciesLoaded()};GenericLoader.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];TagsUtils.redirectDocumentWritesToArray(this._securedWrites,this.log)}};GenericLoader.prototype.allDependenciesLoaded=function(tryDefaults,arrayToAdd){return this.getDependenciesToBeLoaded(tryDefaults,arrayToAdd).length===0};GenericLoader.prototype.getDependenciesToBeLoaded=function(tryDefaults,arrayToAdd){var failures=arrayToAdd||
[];if(!this.injectionLocationReady())failures.push("injection location");var i;var deps=this.dependencies;for(i=0;i<deps.length;i++)if(deps[i]!==this){var executed=+deps[i].scriptExecuted>0;if(!executed){var name=deps[i].config?deps[i].config.name:"anonymous";failures.push("dependant Tag with name -\x3e "+name)}}for(i=0;i<this.genericDependencies.length;i++){var ready=this.genericDependencies[i](this);if(!ready)failures.push("this.genericDependencies["+i+"] (index: "+i+")")}if(failures!=="");return failures};
GenericLoader.prototype.docWriteAsksToWaitForBody=function(){return!!(this.delayDocWrite&&this.config.usesDocumentWrite)};GenericLoader.prototype._bodyNeededButNotAvailable=function(){if(this._dontWaitForInjections())return false;return this._isBodyLocationNeeded()&&!TagsUtils.bodyAvailable()};GenericLoader.prototype._isBodyLocationNeeded=function(){if(!this.isLoadingAsynchronously())return false;if(this._isBodyLocationSet())return true;else{var atHead=this.config.locationObject==="HEAD";return atHead&&
this.config.locationPlaceHolder==="END"}};GenericLoader.prototype._isBodyLocationSet=function(){var locObj=this.config.locationObject;return!locObj||locObj==="BODY"};GenericLoader.prototype._fullBodyNeededAndUnLoaded=function(){if(this._dontWaitForInjections())return false;var needed=false;if(this._isBodyLocationNeeded())needed=this.config.locationPlaceHolder==="END";needed=needed||(this.fullbodyNeeded||this.docWriteAsksToWaitForBody());return needed&&!Utils.bodyReady()};GenericLoader.prototype._dontWaitForInjections=
function(){return this.config.dontWaitForInjectionLocation||this.dontWaitForInjectionLocation||GenericLoader.dontWaitForInjectionLocation};GenericLoader.prototype.injectionLocationReady=function(){if(this._dontWaitForInjections())return true;if(this._fullBodyNeededAndUnLoaded())return false;if(!this.isLoadingAsynchronously())return true;return!!TagsUtils.getHTMLLocationForTag(this)};GenericLoader.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0)return false;return(new Date).valueOf()-
this.timeoutCountdownStart>this.getTimeout()};GenericLoader.prototype.loadDependencies=function(){this._loadDependencies()};GenericLoader.prototype.addClientDependenciesList=function(array,ns){return this.addDependenciesList(array,qubit.Define.clientSpaceClasspath())};GenericLoader.prototype.addDependenciesList=function(array,ns){if(!array||array.length===0)return;if(!this.failedDependenciesToParse)this.failedDependenciesToParse=[];var dependencies=this.dependencies;for(var i=0;i<array.length;i++){var item=
array[i];var bad=false;if(item instanceof GenericLoader)dependencies.push(item);else if(typeof item==="string"){var original=item;if(ns)item=ns+"."+item;var obj=Utils.getObjectUsingPath(item);if(obj)if(obj instanceof GenericLoader)dependencies.push(obj);else bad=true;else this.failedDependenciesToParse.push(original)}else bad=true;if(bad){this.badDepsObjects=this.badDepsObjects||[];Utils.addToArrayIfNotExist(this.badDepsObjects,item)}}};GenericLoader.prototype._loadDependencies=function(chain){chain=
chain||[];var deps=this.dependencies;var present=Utils.indexInArray(chain,this)!==-1;if(!present){chain[chain.length]=this;for(var i=0;i<deps.length;i++)deps[i].load(chain)}};GenericLoader.prototype.onError=EMPTY_FUN;GenericLoader.prototype._onError=function(msg){try{this.onError(msg)}catch(ex){}};GenericLoader.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};GenericLoader.prototype.onLoadTimeout=EMPTY_FUN;GenericLoader.prototype.onScriptsLoadSuccess=EMPTY_FUN;GenericLoader.prototype.onScriptLoadError=
EMPTY_FUN;GenericLoader.prototype.onAllDependenciesLoaded=EMPTY_FUN;GenericLoader.prototype.onBeforeLoad=EMPTY_FUN;GenericLoader.prototype.load=function(){if(this.loadStarted)return;else{this.loadStarted=(new Date).valueOf();try{this.onBeforeLoad()}catch(ex){this._onError(ex)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad)this.loadDependencies()}catch(ex){throw ex;}_waitForDependencies.call(this)};GenericLoader.prototype._singleUrlLoadHandler=function(success,
urls,callback){++this.urlsLoaded;if(!success)++this.urlsFailed;if(this.urlsLoaded===urls.length){this.loadURLsNotFinished=false;if(success&&this.urlsFailed===0){this.addState("LOADED_URL");this.urlsLoaded=(new Date).valueOf();try{if(callback)callback(true)}catch(ex){this._onError(ex)}finally{this.onScriptsLoadSuccess()}}else{var message="error loading urls. Failed "+this.urlsFailed;this._onError(message);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-(new Date).valueOf();try{this.scriptLoadingFailed=
true;if(callback)callback(false)}catch(ex){this._onError(ex)}finally{this.onScriptLoadError(message)}}}};GenericLoader.prototype.loadURLs=function(urlz,callback){var urls=urlz||this.config.url;this.addState("LOADING_URL");try{if(urls&&!(urls instanceof Array))urls=[urls];for(var i=0;i<urls.length;i++){this.loadURLsNotFinished=true;var url=urls[i];url=this.prepareURL(url);this.loadURL(url,function(success){this._singleUrlLoadHandler(success,urls,callback)}.bind(this))}}catch(ex){this.loadURLsNotFinished=
false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=(new Date).valueOf();this._onError(ex)}};GenericLoader.prototype.prepareLocationObject=function(loc){return loc};GenericLoader.prototype.prepareURL=function(url){return url};GenericLoader.prototype.prepareHTML=function(html){return html};GenericLoader.prototype.loadURL=function(url,callback,location){var passedUrl=url;this.addState("LOADING_URL");TagsUtils.loadScript({onsuccess:function(){try{if(callback)callback(true)}catch(ex){}}.bind(this),
onerror:function(){try{if(callback)callback(false)}catch(ex){}}.bind(this),url:passedUrl,node:location||this.config.urlLocation,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};GenericLoader.prototype.reset=function(){var u;this._injectHTMLTriggered=u;this._loadExecutionURLsAndHTMLInformed=u;this._lockedDocWriteInformed=u;this._runOnceTriggered=u;this._urlLoadTriggered=u;this.afterRun=u;this.beforeRun=u;this.filtersRunTriggered=u;this.injectHTMLFailed=u;this.loadStarted=
u;this.loadURLsNotFinished=u;this.loadedDependencies=u;this.loadingDependenciesFailed=u;this.loadingTimedOut=u;this.runIsFinished=u;this.scriptExecuted=u;this.scriptLoadingFailed=u;this.delayDocWrite=u;this._securedWrites=u;this.state=0;this.unexpectedFail=u;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=u;this.isRunning=u;this._lastRun=u;this.cancelled=u;this._beforeEntered=u;this.awaitingDependencies=u;this.timeoutCountdownStart=u;this.addState("INITIAL")};GenericLoader.prototype.isLoadingAsynchronously=
function(){if(this._wasTimed)return true;return!!(this.config.async||this.forceAsynchronous)};GenericLoader.prototype.willSecureDocumentWrite=function(){return this.config.usesDocumentWrite&&this.isLoadingAsynchronously()};GenericLoader.prototype.injectHTML=function(callback){var tryWriteIfNoLocation=!this.docWriteAsksToWaitForBody();var html=this.prepareHTML(this.getHtml());if(html)TagHelper.injectHTMLForLoader(this,callback,tryWriteIfNoLocation,html)};GenericLoader.prototype.clone=function(){var clone=
new GenericLoader(this.config);return clone}})();(function(){function BaseTag(config){var defaults={filterTimeout:config&&config.filterTimeout||this.FILTER_WAIT_TIMEOUT,PACKAGE:config&&config.PACKAGE,dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,disabled:false,locked:false};Utils.setIfUnset(config,defaults);BaseTag.SUPER.apply(this,arguments);this.namedVariables={};this.parameters=[];this.filters=[];this.session=null;if(config){this.addState("INITIAL");try{BaseTag.register(this)}catch(ex){}this.setupConfig(config);
this.uniqueRefString=null;if(config.init)try{config.init.call(this,config)}catch(ex){}this.onTagInit()}}function _getSetNamedVariable(tag,token){var namedVariables=tag.namedVariables;var variable=TagHelper.initPageVariable(namedVariables[token]);namedVariables[token]=variable;return variable}var Utils=qubit.opentag.Utils;var TagsUtils=qubit.opentag.TagsUtils;var Timed=qubit.opentag.Timed;var BaseFilter=qubit.opentag.filter.BaseFilter;var GenericLoader=qubit.opentag.GenericLoader;var TagHelper=qubit.opentag.TagHelper;
var BaseVariable=qubit.opentag.pagevariable.BaseVariable;var Cookie=qubit.Cookie;var Define=qubit.Define;Define.clazz("qubit.opentag.BaseTag",BaseTag,GenericLoader);BaseTag.prototype.setupConfig=function(config){if(!config)return;if(config.filters)this.addFilters(config.filters);if(config.parameters)this.addParameters(config.parameters);if(config.variables)for(var prop in config.variables)if(config.variables.hasOwnProperty(prop)){var param=this.getParameterByTokenName(prop);if(param){var variable=
config.variables[prop];param.variable=variable;if(variable.defaultValue!==undefined)param.defaultValue=variable.defaultValue;if(variable.uv!==undefined)param.uv=variable.uv}}if(config.locked)this.lock()};BaseTag.prototype.valueForToken=function(token,defaults){var param=this.getParameterByTokenName(token);if(param){if(defaults===undefined)if(this.loadingTimedOut)defaults=true;return this.getParameterValue(param,defaults)}var namedVariables=this.namedVariables;if(namedVariables&&namedVariables[token]){var variable=
_getSetNamedVariable(this,token);if(variable)return variable.getRelativeValue(defaults)}return undefined};BaseTag.prototype.addParameters=function(parameters){this.parameters=this.parameters.concat(parameters)};BaseTag.prototype.LOADING_TIMEOUT=5*1E3;BaseTag.prototype.FILTER_WAIT_TIMEOUT=-1;BaseTag.prototype.run=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();if(this.config.runner){var ret=false;try{this.addState("AWAITING_CALLBACK");ret=this._runner=(new Date).valueOf();
this.config.runner.call(this)}catch(e){}return ret}else{this._runner=false;return this.start()}};BaseTag.prototype.lock=function(){this.locked=true;this._unlock=null};BaseTag.prototype.unlock=function(){this.locked=false;if(this._unlock){this._unlock();this._unlock=false}};BaseTag.prototype.start=function(){if(!this.locked)return BaseTag.SUPER.prototype.run.call(this);else{this._unlock=function(){return BaseTag.SUPER.prototype.run.call(this)}.bind(this);return false}};BaseTag.prototype.startOnce=
function(){if(!this.locked)return BaseTag.SUPER.prototype.runOnce.call(this);else{this._unlock=function(){return BaseTag.SUPER.prototype.runOnce.call(this)}.bind(this);return false}};BaseTag.prototype.getFilters=function(){return this.filters};BaseTag.prototype.runOnceIfFiltersPass=function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=(new Date).valueOf();this.runIfFiltersPass()}};BaseTag.prototype.runIfFiltersPass=function(){if(this.destroyed)throw"Tag is destroyed.";
this.resolveAllDynamicData();var state=this.filtersState(true);this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered)this.filtersRunTriggered=(new Date).valueOf();if(state===BaseFilter.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=(new Date).valueOf()}else if(state===BaseFilter.state.PASS){this.filtersPassed=(new Date).valueOf();try{this.onFiltersPassed()}catch(ex){}this.run()}else if(state===BaseFilter.state.FAIL){this._markFiltersFailed();this._markFinished()}else if(state>
0){var tout=this.config.filterTimeout;if(tout<0||(new Date).valueOf()-this.filtersRunTriggered>tout){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=(new Date).valueOf();try{this.onFiltersDelayed()}catch(ex){}}this._setTimeout(this.runIfFiltersPass.bind(this),state)}else{this._markFiltersFailed();this._markFinished();this.filtersRunTimedOut=(new Date).valueOf()}}try{this.onFiltersCheck(state)}catch(e){}return state};BaseTag.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");
this.filtersPassed=-(new Date).valueOf()};BaseTag.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,LOADING_DEPENDENCIES:16,LOADED_DEPENDENCIES:32,LOADING_URL:64,LOADED_URL:128,EXECUTED:256,EXECUTED_WITH_ERRORS:512,FAILED_TO_LOAD_DEPENDENCIES:1024,FAILED_TO_LOAD_URL:2048,FAILED_TO_EXECUTE:4096,TIMED_OUT:4096*2,UNEXPECTED_FAIL:4096*2*2,CANCELLED:4096*2*2*2};BaseTag.prototype.addState=function(stateName){BaseTag.SUPER.prototype.addState.call(this,stateName);try{BaseTag.onStateChange(this)}catch(ex){}this.stateStack=
[];var s=this.STATE;var current=this.state;var stack=this.stateStack;if(current&s.INITIAL)stack.push("Initial state.");if(current&s.FILTER_ACTIVE)stack.push("Tag running with filters pass triggered.");if(current&s.FILTERS_FAILED)stack.push("Filters failed to pass.");if(current&s.AWAITING_CALLBACK)stack.push("Awaiting callback to run this tag. Not pooling.");if(current&s.STARTED)stack.push("Tag is initialized and loading has been started.");if(current&s.LOADING_DEPENDENCIES)stack.push("Dependencies are being loaded.");
if(current&s.LOADED_DEPENDENCIES)stack.push("Dependencies loading process has been finished.");if(current&s.LOADING_URL)stack.push("External URL is being loaded.");if(current&s.LOADED_URL)stack.push("External URL has been loaded.");if(current&s.EXECUTED)stack.push("Main script has been executed.");if(current&s.EXECUTED_WITH_ERRORS)stack.push("Main script has been executed but errors occured.");if(current&s.FAILED_TO_LOAD_DEPENDENCIES)stack.push("Dependencies has failed to load.");if(current&s.FAILED_TO_LOAD_URL)stack.push("URL location failed to load.");
if(current&s.FAILED_TO_EXECUTE)stack.push("Script failed to execute.");if(current&s.TIMED_OUT)stack.push("Script timed out awaiting for dependencies.");if(current&s.UNEXPECTED_FAIL)stack.push("Script occured UNEXPECTED exception and is failed.");if(current&s.CANCELLED)stack.push("Tag has been cancelled.")};BaseTag.prototype.onTagInit=EMPTY_FUN;BaseTag.onStateChange=EMPTY_FUN;BaseTag.prototype.onFiltersDelayed=EMPTY_FUN;BaseTag.prototype.onFiltersPassed=EMPTY_FUN;BaseTag.prototype.onFiltersCheck=EMPTY_FUN;
BaseTag.prototype.state=BaseTag.prototype.STATE.INITIAL;BaseTag.prototype.arePageVariablesLoaded=function(tryDefaults){return TagHelper.allParameterVariablesReadyForTag(this,tryDefaults)};BaseTag.prototype.getDependenciesToBeLoaded=function(tryDefaults,arrayToAdd){var failures=arrayToAdd||[];if(!this.arePageVariablesLoaded(tryDefaults))failures.push("page variables");return BaseTag.SUPER.prototype.getDependenciesToBeLoaded.call(this,tryDefaults,failures)};BaseTag.prototype.resolveAllDynamicData=function(){this.resolvePageVariables();
this.resolveDependencies();this.resolveFilters()};BaseTag.prototype.resolveDependencies=function(){var map=this.failedDependenciesToParse;if(map){this.failedDependenciesToParse=null;this.addDependenciesList(map,Define.clientSpaceClasspath())}return this.dependencies};BaseTag.prototype.addClientVariablesMap=function(map){this.unresolvedClientVariablesMap=this.addVariablesMap(map,Define.clientSpaceClasspath());return this.unresolvedClientVariablesMap};BaseTag.prototype.resolvePageVariables=function(){var map=
this.unresolvedClientVariablesMap;if(map){this.unresolvedClientVariablesMap=null;this.addClientVariablesMap(map)}return this.getPageVariables()};BaseTag.prototype.addVariablesMap=function(map,ns){if(!map)return;var unresolvedVariablesMap={};var namedVariables=this.namedVariables;for(var prop in map)if(map.hasOwnProperty(prop)){var item=map[prop];if(item instanceof BaseVariable)namedVariables[prop]=item;else if(typeof item==="string"){var original=item;if(ns)item=ns+"."+item;var obj=Utils.getObjectUsingPath(item);
if(obj)namedVariables[prop]=item;else unresolvedVariablesMap[prop]=original}else;}return unresolvedVariablesMap};BaseTag.prototype.prepareURL=function(url){return this.replaceTokensWithValues(url)};BaseTag.prototype.prepareLocationObject=function(loc){return this.replaceTokensWithValues(loc)};BaseTag.prototype.prepareHTML=function(html){if(html)html=this.replaceTokensWithValues(html);return html};BaseTag.prototype._executeScript=function(){if(this.config&&this.config.script)if(typeof this.config.script===
"function")this.script=this.config.script;else{var expr=this.replaceTokensWithValues(String(this.config.script));this.script=Utils.expressionToFunction(expr).bind(this)}BaseTag.SUPER.prototype._executeScript.call(this)};BaseTag.prototype.replaceTokensWithValues=function(string){if(!string||string.indexOf("${")===-1)return string;var params=this.parameters;if(params)for(var i=0;i<params.length;i++){var parameter=params[i];var variable=this.getVariableForParameter(parameter);if(variable){var token=
params[i].token;var value=this.valueForToken(token);string=variable.replaceToken(token,string,value)}}return string};BaseTag.prototype.getParameter=function(name){var params=this.parameters;var ret=null;if(params)for(var i=0;i<params.length;i++)if(params[i].name===name)ret=params[i];return ret};BaseTag.prototype.setParameterValueByTokenName=function(tokenName,variable){var param=this.getParameterByTokenName(tokenName);if(param!==null){param.variable={value:variable};return true}return false};BaseTag.prototype.getParameterValue=
function(parameterOrName,defaults){var param=typeof parameterOrName==="string"?this.getParameter(parameterOrName):parameterOrName;if(param){var variable=this.getVariableForParameter(param);if(variable)try{var value;if(defaults&&param.defaultValue!=="")value=Utils.gevalAndReturn(param.defaultValue).result;value=variable.getRelativeValue(defaults,value);return value}catch(ex){return undefined}}return undefined};BaseTag.prototype.filtersState=function(runLastSessionFIlterIfPresent){var run=runLastSessionFIlterIfPresent;
return TagsUtils.filtersState(this.filters,this.session,this,run)};BaseTag.prototype.addFilter=function(filter){Utils.addToArrayIfNotExist(this.filters,filter)};BaseTag.prototype.addFilters=function(filters){for(var i=0;i<filters.length;i++)this.addFilter(filters[i])};BaseTag.prototype.addClientFiltersList=function(filters){this.unresolvedClientFilterClasspaths=this.addFiltersList(filters,Define.clientSpaceClasspath());return this.unresolvedClientFilterClasspaths};BaseTag.prototype.resolveFilters=
function(){var list=this.unresolvedClientFilterClasspaths;if(list){this.unresolvedClientFilterClasspaths=null;this.addClientFiltersList(list)}return this.filters};BaseTag.prototype.addFiltersList=function(filters,ns){var unresolved=[];for(var i=0;i<filters.length;i++)try{var filter=filters[i];var tmp=filter;var cp=null;if(typeof filter==="string"){cp=filter;if(ns)filter=ns+"."+filter;filter=Utils.getObjectUsingPath(filter)}if(typeof filter==="function"){var FilterClass=filter;filter=new FilterClass}if(!filter);
if(!filter instanceof BaseFilter)filter=null;if(filter)this.addFilter(filter);else if(cp)Utils.addToArrayIfNotExist(unresolved,cp)}catch(ex){this.failedFilters=this.failedFilters||[];this.failedFilters.push(filters[i])}return unresolved};BaseTag.prototype.reset=function(){BaseTag.SUPER.prototype.reset.call(this);var u;this.filtersPassed=u;this.dedupePingSent=u;this.pingSent=u;this._runOnceIfFiltersPassTriggered=u;this.filtersRunTriggered=u;this._runner=u};BaseTag.prototype.resetFilters=function(){for(var i=
0;i<this.filters.length;i++)this.filters[i].reset()};BaseTag.prototype.getParameterByTokenName=function(name){var ret=null;if(this.parameters){var params=this.parameters;for(var i=0;i<params.length;i++)if(params[i].token===name)ret=params[i]}return ret};BaseTag.prototype.removeFilter=function(filter){Utils.removeFromArray(this.filters,filter)};var _counter_tag_map=0;var tags=[];var tagAccessorsMap={};var UNIQUE_REF={};BaseTag.register=function(tag){var index=Utils.addToArrayIfNotExist(tags,tag);if(index===
-1)tag._tagIndex=tags.length-1;else tag._tagIndex=index;if(tag.config.id){var str="Q"+tag.config.id;UNIQUE_REF[str]=tag;tag.uniqueId=str}else UNIQUE_REF[tag.CLASSPATH]=tag};BaseTag.getById=function(id){return UNIQUE_REF[String(id)]};BaseTag.prototype.getById=BaseTag.getById;BaseTag.prototype.unregister=function(ref){BaseTag.unregister(ref||this)};BaseTag.prototype.destroy=function(){this.destroyed=true;this.cancel();BaseTag.unregister(this)};BaseTag.unregister=function(tag){var index=Utils.removeFromArray(tags,
tag);tag._tagIndex=-1};BaseTag.getTags=function(){return tags};BaseTag.getAccessorsMap=function(){return tagAccessorsMap};BaseTag.prototype.getTags=function(){return tags};BaseTag.prototype.getPageVariables=function(){var params=this.parameters;var vars=[];if(params)for(var i=0;i<params.length;i++){var v=this.getVariableForParameter(params[i]);if(v!==null)Utils.addToArrayIfNotExist(vars,v)}if(this.namedVariables)for(var key in this.namedVariables)Utils.addToArrayIfNotExist(vars,_getSetNamedVariable(this,
key));return vars};BaseTag.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey="_"+_counter_tag_map++;tagAccessorsMap[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};BaseTag.prototype.getVariableForParameter=function(param){var variable;var namedVariables=this.namedVariables;if(namedVariables&&namedVariables[param.token])variable=_getSetNamedVariable(this,param.token);if(!variable)variable=TagHelper.validateAndGetVariableForParameter(param);
return variable};BaseTag.prototype.printVariablesState=function(){var res=[];var pairs=TagHelper.getAllVariablesWithParameters(this);for(var i=0;i<pairs.length;i++){var param=pairs[i].parameter;var variable=pairs[i].variable;var val;if(param&&param.token)val=this.valueForToken(param.token);else val=variable.getRelativeValue(true);var tmp={name:variable.config.name,exists:variable.exists(),token:param?param.token:null,value:val,variable:variable};res.push(tmp)}return res};BaseTag.prototype._triggerOnLoadTimeout=
function(){this.onLoadTimeout()};BaseTag.prototype.getId=function(){return this._getUniqueId()};BaseTag.prototype._getUniqueId=function(){if(this.config.id)return this.config.id;if(String(this.CLASSPATH).indexOf(Define.STANDARD_CS_NS)===0)return this.CLASSPATH.substring(Define.STANDARD_CS_NS.length+1);else return this.CLASSPATH+"#"+this.config.name};var forceCookiePrefix="qubit.tag.forceRunning_";var disableCookiePrefix="qubit.tag.disableRunning_";var cookieRunAll="qubit.tag.forceAllToRun";BaseTag.prototype.cookieSaysToRunEvenIfDisabled=
function(){var id=this._getUniqueId();var ret=!!Cookie.get(cookieRunAll);if(!ret)ret=!!Cookie.get(forceCookiePrefix+id);return ret};BaseTag.prototype.setCookieForcingTagToRun=function(){var id=this._getUniqueId();Cookie.set(forceCookiePrefix+id,"true")};BaseTag.setCookieForcingTagsToRun=function(){Cookie.set(cookieRunAll,"true")};BaseTag.prototype.setCookieToDisable=function(){var id=this._getUniqueId();Cookie.set(disableCookiePrefix+id,"true")};BaseTag.prototype.rmCookieToDisable=function(){var id=
this._getUniqueId();Cookie.rm(disableCookiePrefix+id)};BaseTag.prototype.disabledByCookie=function(){var id=this._getUniqueId();return!!Cookie.get(disableCookiePrefix+id)};BaseTag.rmCookieForcingTagsToRun=function(){Cookie.rm(cookieRunAll)};BaseTag.prototype.rmCookieForcingTagToRun=function(){var id=this._getUniqueId();Cookie.rm(forceCookiePrefix+id)};BaseTag.rmAllDisablingCookies=function(){Utils.rmCookiesMatching(disableCookiePrefix)};BaseTag.rmAllCookiesForcingTagToRun=function(){Utils.rmCookiesMatching(forceCookiePrefix);
BaseTag.rmCookieForcingTagsToRun()}})();(function(){var Utils=qubit.opentag.Utils;var BaseFilter=qubit.opentag.filter.BaseFilter;var Tags=function(){};qubit.Define.clazz("qubit.opentag.Tags",Tags);Tags.getById=function(id){return qubit.opentag.BaseTag.getById(String(id))};Tags.getAllTagsByState=function(){return qubit.opentag.Container.getAllTagsByState(Tags.getTags())};Tags.findTagByName=function(match){var tags=this.getTags();var results=[];for(var i=0;i<tags.length;i++)if(tags[i].config.name===
match)results.push(tags[i]);return results};Tags.findTagByMatch=function(match){var tags=this.getTags();var results=[];for(var i=0;i<tags.length;i++)if(tags[i].config.name.match(match))results.push(tags[i]);return results};Tags.findTagContainers=function(tag){var containers=Tags.getContainers();var containing=[];for(var i=0;i<containers.length;i++){var tagsMap=containers[i].tags;for(var prop in tagsMap)if(tagsMap[prop]===tag){containing.push(containers[i]);break}}return containing};Tags.getTags=function(){return qubit.opentag.BaseTag.getTags()};
Tags.resetAllTags=function(){var tags=Tags.getTags();for(var i=0;i<tags.length;i++)tags[i].reset()};Tags.getContainersPageVariables=function(){var containers=Tags.getContainers();var vars=[];for(var i=0;i<containers.length;i++)vars=vars.concat(containers.getPageVariables());return vars};Tags.getAllPageVariables=function(){var tags=Tags.getTags();var vars=[];for(var i=0;i<tags.length;i++)vars=vars.concat(tags[i].getPageVariables());return vars};Tags.cancelAll=function(){var tags=Tags.getTags();for(var i=
0;i<tags.length;i++)tags[i].cancel()};Tags.resetAll=function(){var tags=Tags.getTags();for(var i=0;i<tags.length;i++)tags[i].reset()};Tags.getPageVariableByName=function(name){var vars=Tags.getAllPageVariables();var rets=[];for(var i=0;i<vars.length;i++)if(vars[i].config.name===name)rets.push(vars[i]);return rets};Tags.getLoadTime=function(tag){var start=tag.beforeRun;var end=tag.runIsFinished;if(isNaN(end))return{tag:tag,loadTime:null};else return{tag:tag,loadTime:end-start}};Tags.getLoadTimes=function(tags){var ret=
[];if(tags instanceof qubit.opentag.BaseTag){ret.push([Tags.getLoadTime(tags[prop])]);return ret}tags=tags||Tags.getTags();var array=tags instanceof Array;if(array)for(var i=0;i<tags.length;i++){if(tags[i]instanceof qubit.opentag.BaseTag)ret.push(Tags.getLoadTime(tags[i]))}else for(var prop in tags)if(tags[prop]instanceof qubit.opentag.BaseTag)ret.push(Tags.getLoadTime(tags[prop]));return ret};Tags.forceAllContainersAndTagsToRunIfDisabled=function(){qubit.opentag.Container.setCookieForDisabledContainersToRun();
qubit.opentag.BaseTag.setCookieForcingTagsToRun()};Tags.rmAllContainersAndTagsForcingFlags=function(){qubit.opentag.Container.rmCookieForDisabledContainersToRun();qubit.opentag.BaseTag.rmAllCookiesForcingTagToRun()};Tags.getContainers=function(){return qubit.opentag.Container.getContainers()};Tags.findAllTagsByClassPath=function(startsWith){var start=(new Date).valueOf();var ret=[];var excludes=[];try{excludes.push(qubit.opentag.CustomTag);excludes.push(qubit.opentag.LibraryTag)}catch(ex){}var tags=
Tags.getTags();for(var i=0;i<tags.length;i++){var tag=tags[i];if(Utils.indexInArray(excludes,tag)<0&&tag.PACKAGE_NAME.indexOf(startsWith)===0)ret.push(tag)}return ret};Tags.findAllTags=function(pckg,maxDeep){var BaseTag=qubit.opentag.BaseTag;var ret;var excludes=[];var start=(new Date).valueOf();try{excludes.push(qubit.opentag.CustomTag);excludes.push(qubit.opentag.LibraryTag)}catch(ex){}ret=Tags.findAllInstances(pckg,BaseTag,excludes,maxDeep);return ret};var findAllIn=function(pckg,check,excludes,
maxDeep){var instances=[];if(typeof pckg==="string")pckg=Utils.getObjectUsingPath(pckg);if(pckg){var cfg={objectsOnly:true};if(maxDeep)cfg.maxDeep=true;var fun=function(obj,parent,propName,trackPath){if(check(obj)){for(var i=0;i<excludes.length;i++)if(excludes[i]===obj)return true;Utils.addToArrayIfNotExist(instances,obj);return true}return false}.bind(this);Utils.traverse(pckg,fun,cfg)}return instances};Tags.findAllInstances=function(pckg,clazz,excludes,maxDeep){var check=function(obj){return obj instanceof
clazz};return findAllIn(pckg,check,excludes,maxDeep)};Tags.findAllInheriting=function(pckg,clazz,excludes,maxDeep){var check=function(obj){return obj.prototype instanceof clazz};return findAllIn(pckg,check,excludes,maxDeep)};Tags.findAllFilters=function(pckg,maxDeep){var excludes=[];try{excludes.push(qubit.opentag.filter.Filter);excludes.push(qubit.opentag.filter.URLFilter)}catch(ex){}return Tags.findAllInheriting(pckg,BaseFilter,excludes,maxDeep)}})();q.cookie={};q.cookie.PageView={};q.cookie.PageView.update=
function(){var a;var r;r=function _(){return Math.floor(1+Math.random()*65536).toString(36).substring(1)};if(!window.__pageViewId__){a=(new Date).getTime().toString(36);window.__pageViewId__=a+r()+r()+r()}return window.__pageViewId__};q.html.PostData=function(url,data,type){var _post;var agent;var isIe;var isIe9;var isOldIe;var fullUrl;var loaded;var retry;var retryDelay;var retryCount;retryCount=2;retryDelay=5E3;loaded=false;retry=function(){if(retryCount>0)setTimeout(function(){if(!loaded){retryCount-=
1;_post()}},retryDelay)};agent=navigator.userAgent.toLowerCase();isIe=agent.indexOf("msie")!==-1;isIe9=agent.indexOf("msie 9")!==-1;isOldIe=agent.indexOf("msie 7")!==-1||agent.indexOf("msie 6")!==-1;fullUrl=("https:"===document.location.protocol?"https:":"http:")+url;type=type||"POST";_post=function(){var xhr;try{xhr=null;try{xhr=new XMLHttpRequest}catch(e1){}if(xhr&&!isIe)xhr.open(type,fullUrl,true);else if(typeof XDomainRequest!=="undefined"){xhr=new XDomainRequest;xhr.open(type,fullUrl)}else xhr=
null;try{xhr.withCredentials=false}catch(e2){}if(xhr.setRequestHeader)xhr.setRequestHeader("Content-Type","text/plain;charset\x3dUTF-8");xhr.onload=function(){loaded=true};xhr.onreadystatechange=function(){};xhr.ontimeout=function(){};xhr.onerror=function(){};xhr.onprogress=function(){};xhr.send(data)}catch(err){try{try{q.html.fileLoader.load(fullUrl)}catch(err2){if(window.console&&window.console.log)window.console.log(err)}}catch(e){}}retry()};if(isOldIe){q.html.fileLoader.load(fullUrl);return}else _post()};
(function(){function Ping(){}qubit.Define.clazz("qubit.opentag.Ping",Ping);Ping.prototype.send=function(container,loadTimes){var config=container.config;var pingString="c\x3d"+config.clientId+"\x26"+"p\x3d"+container.getContainerId()+"\x26"+"l\x3d"+config.tellLoadTimesProbability+"\x26"+"pv\x3d"+q.cookie.PageView.update()+"\x26"+"d\x3d";var pingStrings=[];for(var i=0;i<loadTimes.length;i++){var tag=loadTimes[i].tag;var loadTime=loadTimes[i].loadTime;if(loadTime===null||isNaN(loadTime))continue;var loaderId=
Ping.getPingID(tag);if(!tag.pingSent&&loaderId&&loadTime!==null)if(loaderId!==undefined){pingStrings.push('"'+loaderId+'":'+loadTime);tag.pingSent=true}else;else if(tag.pingSent);else if(loadTime===null);}if(config.pingServerUrl&&pingStrings.length>0){pingString+=encodeURIComponent("{"+pingStrings.join(",")+"}");var url="//"+config.pingServerUrl+"/tag2?"+pingString;q.html.PostData(url,null,"GET")}else{if(!pingStrings.length);if(!config.pingServerUrl);}};Ping.prototype.sendErrors=function(container,
errors){};Ping.prototype.sendDedupe=function(container,tags){var config=container.config;var pingString="c\x3d"+config.clientId+"\x26"+"p\x3d"+container.getContainerId()+"\x26"+"l\x3d"+config.tellLoadTimesProbability+"\x26"+"pv\x3d"+q.cookie.PageView.update()+"\x26"+"dd\x3d";var pingStrings=[];for(var i=0;i<tags.length;i++){var tag=tags[i];var loaderId=Ping.getPingID(tag);if(loaderId===undefined);else if(!tag.dedupePingSent){pingStrings.push(loaderId);tag.dedupePingSent=true}}if(pingStrings.length>
0&&config.pingServerUrl){pingString+=encodeURIComponent("["+pingStrings.join(",")+"]");q.html.PostData("//"+config.pingServerUrl+"/tag2?"+pingString,null,"GET")}else{if(!pingStrings.length);if(!config.pingServerUrl);}};Ping.getPingID=function(tag){if(tag.config.id)return tag.config.id;var idx=tag.PACKAGE_NAME.lastIndexOf(".");if(idx!==-1)return tag.PACKAGE_NAME.substring(idx+1);else return tag.PACKAGE_NAME}})();q.cookie.SimpleSessionCounter={};q.cookie.SimpleSessionCounter._cookieName="_qst_s";q.cookie.SimpleSessionCounter._sessionCookie=
"_qsst_s";q.cookie.SimpleSessionCounter.update=function(domain){var c;var s;var ga;var mins=30;c=qubit.Cookie.get(q.cookie.SimpleSessionCounter._cookieName);s=qubit.Cookie.get(q.cookie.SimpleSessionCounter._sessionCookie);if(!c)c=1;else{c=parseInt(c,10);if(!s||parseInt(s,10)<(new Date).getTime()-mins*60*1E3)c+=1}qubit.Cookie.set(q.cookie.SimpleSessionCounter._cookieName,c,365,domain);qubit.Cookie.set(q.cookie.SimpleSessionCounter._sessionCookie,(new Date).getTime().toString(),null,domain);return c};
var JSON={};(function(){function f(n){return n<10?"0"+n:n}function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function stringifyDate(key){return isFinite(key.valueOf())?key.getUTCFullYear()+"-"+f(key.getUTCMonth()+1)+"-"+f(key.getUTCDate())+"T"+f(key.getUTCHours())+":"+f(key.getUTCMinutes())+":"+f(key.getUTCSeconds())+
"Z":null}function str(key,holder){var i;var k;var v;var length;var mind=gap;var partial;var value=holder[key];if(value instanceof Date)value=stringifyDate(value);else if(value instanceof String||value instanceof Number||value instanceof Boolean)value=value.valueOf();if(typeof rep==="function")value=rep.call(holder,key,value);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1)try{partial[i]=str(i,value)||"null"}catch(stackExceeded){partial[i]='{"stack_exceeded": null}'}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1)if(typeof rep[i]==="string"){k=rep[i];try{v=str(k,value)}catch(stackExceeded){v='{"stack_exceeded": null}'}if(v)partial.push(quote(k)+
(gap?": ":":")+v)}}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){try{v=str(k,value)}catch(stackExceeded){v='{"stack_exceeded": null}'}if(v)partial.push(quote(k)+(gap?": ":":")+v)}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
var gap;var indent;var meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var rep;if(typeof JSON.stringify!=="function")JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number")for(i=0;i<space;i+=1)indent+=" ";else if(typeof space==="string")indent=space;rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number"))throw new Error("JSON.stringify");return str("",{"":value})};
if(typeof JSON.parse!=="function")JSON.parse=function(text,reviver){function walk(holder,key){var k;var v;var value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}return reviver.call(holder,key,value)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse");}})();(function(){function LZW(config){if(config)if(config.alphabet){this.alphabet=config.alphabet;this.dict={};for(var i=0;i<this.alphabet.length;i++)this.dict[this.alphabet[i]]=i}else{this.alphabet=defaultAlphabet;this.dict=xdict}}function getFromDict(code,dict){for(var p in dict)if(code===
dict[p])return p;return null}var defaultAlphabet=[];var len=Math.pow(2,8);for(var c=0;c<len;c++)defaultAlphabet.push(String.fromCharCode(c));var xdict={};for(var i$$0=0;i$$0<defaultAlphabet.length;i$$0++)xdict[defaultAlphabet[i$$0]]=i$$0;var Define=qubit.Define;Define.clazz("qubit.compression.LZW",LZW);LZW.prototype.encode=function(string){var dictsize=this.alphabet.length;var extDict={};var results=[];var index=0;var curr=string.charAt(index++);var next;for(var dict=this.dict;!!(next=string.charAt(index++));){var newWord=
curr+next;if(dict.hasOwnProperty(newWord)||extDict.hasOwnProperty(newWord))curr=newWord;else{var val=dict.hasOwnProperty(curr)?dict[curr]:extDict[curr];if(val===undefined)throw"Dictionary base is to small for those contents: "+curr;results.push(val);extDict[newWord]=dictsize++;curr=next}}if(curr!=="")results.push(extDict.hasOwnProperty(curr)?extDict[curr]:dict[curr]);return results};LZW.prototype.decode=function(codes){var dict=this.dict;var dictSize=this.alphabet.length;var chunk;var locdict={};
var prevChar=getFromDict(codes[0],dict);var prevChunk=prevChar;var results=[prevChar];for(var i=1;i<codes.length;i++){var currentCode=codes[i];chunk=getFromDict(currentCode,dict);if(chunk===null){if(locdict.hasOwnProperty(currentCode))chunk=locdict[currentCode];if(chunk===null)chunk=prevChunk+prevChar}results.push(chunk);prevChar=chunk.charAt(0);locdict[dictSize++]=prevChunk+prevChar;prevChunk=chunk}return results.join("")}})();(function(){function converToMex(number){var rest=0;var minus=number<
0;if(minus)number=-number;var newNum="";var first=true;do{rest=number%maxMnum;if(first){newNum=UmexToMexMap[mnums[rest]];first=false}else newNum=mnums[rest]+newNum;number=(number-rest)/maxMnum}while(number>0);if(minus)return"-"+newNum;return newNum}function convertFromMex(mexNum){var newNum=0;var pow=0;var first=true;for(var i=0;i<mexNum.length;i++){var cur=mexNum.charAt(mexNum.length-1-i);if(first){first=false;cur=mex.charAt(UmexMap[cur])}newNum+=mexMap[cur]*Math.pow(maxMnum,pow++)}return newNum}
function Compressor(config){}var mex="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"'%./:\x3c\x3e?[";var Umex="ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-+()@{|}"+'"]^_`~$\x26#';var mexMap={};for(var c=0;c<mex.length;c++)mexMap[mex.charAt(c)]=c;var UmexMap={};for(var ii=0;ii<mex.length;ii++)UmexMap[Umex.charAt(ii)]=ii;var UmexToMexMap={};for(var iii=0;iii<mex.length;iii++)UmexToMexMap[mex.charAt(iii)]=Umex.charAt(iii);var mnums=mex.split("");var maxMnum=mnums.length;var lzw=new qubit.compression.LZW({});var Define=
qubit.Define;Define.clazz("qubit.compression.Compressor",Compressor);Compressor.prototype.compress=function(string,lz){var array=(lz||lzw).encode(string);var result=[];for(var i=0;i<array.length;i++)result.push(String.fromCharCode(array[i]));return result.join("")};Compressor.prototype.compressAnsi=function(string,lz){var array=(lz||lzw).encode(string);var result=[];for(var i=0;i<array.length;i++){var num=converToMex(array[i]);result.push(num)}return result.join("")};Compressor.prototype.decompressAnsi=
function(code,lz){var array=[];var curr="";for(var i=0;i<code.length;i++){var ch=code.charAt(i);if(UmexMap.hasOwnProperty(ch)){var num=curr+ch;curr="";num=convertFromMex(num);array.push(num)}else curr+=ch}return(lz||lzw).decode(array)};Compressor.prototype.decompress=function(code,lz){var array=[];for(var i=0;i<code.length;i++)array.push(code.charCodeAt(i));return(lz||lzw).decode(array)}})();(function(){function prepareDefinitions(array){var definitions=[];for(var i=0;i<array.length;i++){var preparedString=
escapeRegExp(array[i][0]);definitions.push([new RegExp(preparedString,"g"),"*"+array[i][1]])}return definitions}function getDefinitionByChar(ch,definitions){for(var i=0;i<definitions.length;i++)if(definitions[i][1]===ch)return definitions[i][0];return null}function Encoder(config){this._regexDefs=regexDefinitions;this._defs=definitions;if(config)if(config.definitions){this._regexDefs=prepareDefinitions(config.definitions);this._defs=config.definitions}}function replaceWithUTFEncoding(string,range){var rewrite=
[];for(var i=0;i<string.length;i++){var inRange=true;if(range)inRange=string.charCodeAt(i)<=range;var inCookieAlphabet=Cookie.cookieAlphabetMap.hasOwnProperty(string.charAt(i));if(inRange&&!inCookieAlphabet)rewrite.push("*"+string.charCodeAt(i)+".");else rewrite.push(string.charAt(i))}return rewrite.join("")}function replaceWithDynamicDictionary(ddict,string){string=string.replace(/@/g,"@@");var dict=[];var i=0;for(var j=0;i<ddict.length;i++){var pattern=ddict[i][0];var rx=new RegExp(escapeRegExp(pattern),
"g");var out=string.replace(rx,"@"+j+"-");if(out!==string){dict.push(ddict[i][0]);j++;string=out}}return[string,dict]}function escapeRegExp(string){return string.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function dynamicDictionary(str){var parts={};var word="";for(var i=0;i<str.length;i++){var ch=str.charAt(i);if(!dynamicDictCharsMap[ch]){if(isNaN(parts[word]))parts[word]=str.split(word).length-1;word=""}else word+=ch}var dict=[];for(var prop in parts)if(parts.hasOwnProperty(prop)){var occurringNum=
parts[prop];if(occurringNum>=MIN_OCCURENCE_LEN&&prop.length>=MIN_WORD_LEN)dict.push([prop,occurringNum])}dict=dict.sort(function(a,b){if(a[0].length===b[0].length)return 0;if(b[0].length>a[0].length)return 1;else return-1});return dict}function decodeDynamicDictionary(string,ddict){if(!ddict||ddict.length===0||!string)return string;var ret="";var codeWord=false;var collectingNum=false;var codeNum="";for(var i=0;i<string.length;i++){var ch=string.charAt(i);if(ch==="@"||codeWord||collectingNum)if(codeWord||
collectingNum){codeWord=false;if(ch==="@")ret+="@";else if(!isNaN(+("-"+ch))){collectingNum=true;codeNum=codeNum+ch}else if(collectingNum){if(ddict&&ch==="-"&&ddict[+codeNum])ret+=ddict[+codeNum];else ret+="@"+codeNum+ch;codeNum="";collectingNum=false}else ret+="@"+ch}else codeWord=true;else ret+=ch}if(codeNum)ret+="@"+codeNum;if(codeWord)ret+="@";return ret}var Define=qubit.Define;var Cookie=qubit.Cookie;var definitions=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],
[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',
"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["\x3c","S"],["\x3e","G"],["[","Z"],["]","E"],["{","a"],["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];var regexDefinitions=prepareDefinitions(definitions);Define.clazz("qubit.opentag.compression.Encoder",Encoder);Encoder.prototype.encode=function encode(string,limitUTFRange){var ret=string.replace(/\*/g,
"**");var ininitalDdict=dynamicDictionary(ret);for(var i=0;i<this._regexDefs.length;i++){var pair=this._regexDefs[i];ret=ret.replace(pair[0],pair[1])}ret=ret.replace(/;/g,"*-");ret=ret.replace(/&/g,"*.");ret=ret.replace(/\\/g,"*/");ret=ret.replace(/=/g,"*+");ret=ret.replace(/\n/g,"*N");ret=ret.replace(/ /g,"*_");ret=ret.replace(/\t/g,"*T");ret=ret.replace(/"/g,"*Q");var ddict=dynamicDictionary(ret);ddict.concat(ininitalDdict);var result=replaceWithDynamicDictionary(ddict,ret);var actualDict=result[1];
var replacementsOccured=actualDict.length>0;if(replacementsOccured)ret=result[0];if(!limitUTFRange)ret=replaceWithUTFEncoding(ret);else ret=replaceWithUTFEncoding(ret,limitUTFRange);if(replacementsOccured)return"Y"+actualDict.join("*")+"@"+ret;else return"N"+ret};var dynamicDictChars="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";var dynamicDictCharsMap={};for(var i$$0=0;i$$0<dynamicDictChars.length;i$$0++)dynamicDictCharsMap[dynamicDictChars.charAt(i$$0)]=true;var MIN_WORD_LEN=
4;var MIN_OCCURENCE_LEN=2;Encoder.prototype.decode=function(string){var ddict=null;if(string.charAt(0)==="N")string=string.substring(1);else if(string.charAt(0)==="Y"){var qMkIdx=string.indexOf("@");if(qMkIdx>=0){ddict=string.substring(1,qMkIdx);ddict=ddict.split("*");string=string.substring(qMkIdx+1);string=decodeDynamicDictionary(string,ddict)}}var ret="";var codeWord=false;var collectingNum=false;var utfNum="";for(var i=0;i<string.length;i++){var ch=string.charAt(i);if(ch==="*"||codeWord||collectingNum)if(codeWord||
collectingNum){codeWord=false;if(!isNaN(+("-"+ch))){utfNum=utfNum+ch;collectingNum=true}else if(collectingNum){if(ch===".")ret+=String.fromCharCode(+utfNum);else if(ch==="-"&&getDefinitionByChar(utfNum+"-",this._defs))ret+=getDefinitionByChar(utfNum+"-",this._defs);else ret+="*"+utfNum+ch;utfNum="";collectingNum=false}else if(ch==="*")ret+="*";else if(ch==="-")ret+=";";else if(ch==="/")ret+="\\";else if(ch===".")ret+="\x26";else if(ch==="+")ret+="\x3d";else if(ch==="N")ret+="\n";else if(ch==="_")ret+=
" ";else if(ch==="T")ret+="\t";else if(ch==="Q")ret+='"';else if(getDefinitionByChar(ch,this._defs)!==null){var def=getDefinitionByChar(ch,this._defs);ret+=def}else ret+="*"+ch}else codeWord=true;else ret+=ch}if(utfNum)ret+="*"+utfNum;if(codeWord)ret+="*";return ret}})();(function(){function CookieCompressor(config){this.testBinary=false;this.binSupported=binSupported;if(config){this.compressor=new qubit.compression.Compressor;this.encoder=new qubit.opentag.compression.Encoder({})}}var Define=qubit.Define;
var Cookie=qubit.Cookie;var binSupported=false;Define.clazz("qubit.opentag.compression.CookieCompressor",CookieCompressor);CookieCompressor.prototype.compress=function(string,forceCompression){if(typeof string!=="string"||string==="")return string;var encoded=this.encoder.encode(string);var binOut;if(this.binSupported||this.testBinary){var bin=this.compressor.compress(encoded);binOut='"B'+this.encoder.encode(bin,128)+'"';Cookie.set("__qtag_test_bin__",binOut,undefined,undefined,true);var o=Cookie.get("__qtag_test_bin__",
true);Cookie.rm("__qtag_test_bin__");if(o&&o!==binOut)binOut=null}var ansiOut;var compressed=this.encoder.encode(this.compressor.compressAnsi(encoded));if(!forceCompression&&encoded.length<=compressed.length)ansiOut="E"+encoded;else ansiOut="C"+compressed;if(binOut&&binOut.length<ansiOut.length)return binOut;else return ansiOut};CookieCompressor.prototype.decompress=function(string){if(typeof string!=="string"||string==="")return string;if(string.charAt(0)==='"')string=string.substring(1,string.length-
1);var code=string.charAt(0);string=string.substring(1);switch(code){case "E":return this.encoder.decode(string);case "C":var tmp=this.compressor.decompressAnsi(this.encoder.decode(string));return this.encoder.decode(tmp);case "B":var tmp1=this.compressor.decompress(this.encoder.decode(string));return this.encoder.decode(tmp1);default:throw"This code is not supported! Code: "+code;}}})();(function(){var Cookie=qubit.Cookie;var Utils=qubit.opentag.Utils;var Session=function(){};qubit.Define.clazz("qubit.opentag.Session",
Session);var compressor=new qubit.opentag.compression.CookieCompressor({});Session.readCompressedCookie=function(name){var cookie=Cookie.get(name,true);return compressor.decompress(cookie)};Session.setupSession=function(container){var config=container.config;var session;var i;var cookie;var cookieText;var cookieName;var now;session={};session.sessionCount=q.cookie.SimpleSessionCounter.update(config.cookieDomain);cookieName="qtag_"+container.getContainerId();var xCookieName="x_qtag_"+container.getContainerId();
cookie=Cookie.get(cookieName);var nonCompressedCookie=!!cookie;if(cookie===null){cookie=Cookie.get(xCookieName,true);cookie=compressor.decompress(cookie)}if(cookie)try{cookie=JSON.parse(cookie)}catch(e){cookie={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}else cookie={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}};now=(new Date).getTime();if(session.sessionCount!==parseInt(cookie.sc,10)){cookie.sessionStartTime=
now;cookie.sc=session.sessionCount;cookie.sessionCount+=1;cookie.referrer.push({url:Session.getReferrer(),landing:Utils.getUrl().substring(0,300),time:now});cookie.sessionLandingPage=Utils.getUrl().substring(0,300)}else if(Session.isReferrerDifferent())if(!Session.referrerIsSameAsPrevious(cookie.referrer,now,30*60*1E3)){cookie.referrer.push({url:Session.getReferrer(),landing:Utils.getUrl().substring(0,300),time:now});cookie.sessionLandingPage=Utils.getUrl().substring(0,300);cookie.sessionStartTime=
now;cookie.sessionCount+=1}session.sessionCount=cookie.sessionCount;session.sessionStartTime=cookie.sessionStartTime;session.pageStartTime=now;cookie.pageViews+=1;session.pageViews=cookie.pageViews;session.sessionLandingPage=cookie.sessionLandingPage;session.referrer=cookie.referrer;if(session.referrer.length>5)session.referrer.splice(2,session.referrer.length-5);cookieText=JSON.stringify(cookie);for(i=0;compressor.compress(cookieText).length>config.maxCookieLength&&i<5;){if(cookie.referrer.length>=
3)cookie.referrer.splice(2,1);else if(cookie.referrer.length===2)cookie.referrer=[cookie.referrer[0]];else if(cookie.referrer.length===1)cookie.referrer=[];cookieText=JSON.stringify(cookie);i+=1}session.referrer=cookie.referrer;if(nonCompressedCookie)Cookie.rm(cookieName);var xCookieText=compressor.compress(cookieText);Cookie.rm(xCookieName);if(config.maxCookieLength>0)Cookie.set(xCookieName,xCookieText,365,config.cookieDomain,true);session.setVariable=function(key,value,time){var t=!!time?time:0;
cookie.__v[key]=[value,t];var xCookieText=compressor.compress(JSON.stringify(cookie));if(config.maxCookieLength>0)Cookie.set(xCookieName,xCookieText,365,config.cookieDomain,true);else Cookie.rm(xCookieName)};session.getCookie=function(name,compressed){var res=Cookie.get(name,true);if(res&&(compressed||name.indexOf("x_")===0))try{res=compressor.decompress(res)}catch(ex){}else if(res!==null)res=Cookie.decode(res);return res};session.getVariable=function(key){var v;var t;var now;v=cookie.__v[key];if(v){t=
v[1];if(t===0||t>(new Date).getTime())return v[0]}return null};session.on=function(event,el,fn){if(el.attachEvent)el.attachEvent("on"+event,fn);else if(el.addEventListener)el.addEventListener(event,fn,false)};session.getTagCookie=function(){return Session.readCompressedCookie(xCookieName)};Session.lastSession=session;return session};Session.referrerIsSameAsPrevious=function(referrers,now,overlapDuration){var url;var landing;var lastReferrer;if(referrers.length>0){url=Session.getReferrer();landing=
Utils.getUrl().substring(0,300);lastReferrer=referrers[referrers.length-1];return lastReferrer.url===url&&lastReferrer.landing===landing&&lastReferrer.time+overlapDuration>now}return false};Session.isReferrerDifferent=function(){var start;var end;var ref;ref=Session.getReferrer();start=ref.indexOf("://");if(start===-1)return true;start+=3;try{if(ref.substring(start).indexOf(Session.getDomain())!==0)return true;return false}catch(ex){return true}};Session.getReferrer=function(){if(document.referrer)return document.referrer.substring(0,
300);return"direct"};Session.getDomain=function(){return document.location.host}})();(function(){function LibraryTag(config){Utils.setIfUnset(config,LibraryTag.defaultConfig);if(this.singleton){var path=this.PACKAGE_NAME+"."+this.CLASS_NAME;var zuper=qubit.opentag.Utils.getObjectUsingPath(path,PKG_ROOT);if(zuper.__instance)return zuper.__instance;zuper.__instance=this}LibraryTag.SUPER.call(this,config)}function extractAndEvalFunctionBody(fun,tag){var expr=fun.toString();expr=expr.replace(/\s*function\s*\([\w\s,_\d\$]*\)\s*\{/,
"");expr=expr.substring(0,expr.lastIndexOf("}"));expr=expr.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)/g,'$1"${$2}"');expr=expr.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)(\s*\+\s*["'])/g,'"${$1}"$2');expr=expr.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)/g,'$1"${$2}"');expr=expr.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)(\s*\+\s*["'])/g,'"${$1}"$2');expr=expr.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'(\s*)\)/g,
"$1${$2}$3");expr=expr.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"(\s*)\)/g,"$1${$2}$3");expr=tag.replaceTokensWithValues(expr);Utils.geval(expr)}var Utils=qubit.opentag.Utils;var Define=qubit.Define;qubit.Define.clazz("qubit.opentag.LibraryTag",LibraryTag,qubit.opentag.BaseTag);LibraryTag.defaultConfig={vendor:null,imageUrl:null,description:"",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[],prePostWindowScope:false};LibraryTag.prototype.pre=function(){};LibraryTag.prototype.post=
function(){};LibraryTag.prototype.before=function(){LibraryTag.SUPER.prototype.before.call(this);try{var cfg=this.config;if(cfg&&cfg.pre)if(typeof cfg.pre==="function")this.pre=cfg.pre;else{var expr=this.replaceTokensWithValues(String(cfg.pre));this.pre=Utils.expressionToFunction(expr).bind(this)}if(this.config.prePostWindowScope&&this.pre!==LibraryTag.prototype.pre&&this.pre.toString)extractAndEvalFunctionBody(this.pre,this);else this.pre()}catch(ex){return true}return false};LibraryTag.prototype.after=
function(success){LibraryTag.SUPER.prototype.after.call(this,success);try{var cfg=this.config;if(cfg&&cfg.post)if(typeof cfg.post==="function")this.post=cfg.post;else{var expr=this.replaceTokensWithValues(String(cfg.post));this.post=Utils.expressionToFunction(expr).bind(this)}if(this.config.prePostWindowScope&&this.post!==LibraryTag.prototype.post&&this.post.toString)extractAndEvalFunctionBody(this.post,this);else this.post(success)}catch(ex){}};LibraryTag.define=function(namespace,libConfig){namespace=
namespace.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");namespace=qubit.Define.vendorsSpaceClasspath(namespace);var libraryDefaultConfig={};if(libConfig.getDefaultConfig)libraryDefaultConfig=libConfig.getDefaultConfig();var constr=libConfig.CONSTRUCTOR;var prototypeTemplate={};for(var prop in libConfig)if(prop!=="config")prototypeTemplate[prop]=libConfig[prop];var constructor=function(cfg){cfg=cfg||{};cfg=Utils.overrideFromBtoA(libraryDefaultConfig,cfg);var ret=qubit.opentag.LibraryTag.call(this,
cfg);if(constr)constr.call(this,cfg);if(ret)return ret};var ret$$0=qubit.opentag.Utils.defineWrappedClass(namespace,LibraryTag,prototypeTemplate,GLOBAL,constructor);var ns=Define.STANDARD_VS_NS+".";if(namespace.indexOf(ns)!==0)Utils.namespace(ns+namespace,ret$$0);return ret$$0};LibraryTag.getLibraryByClasspath=function(namespace){return Utils.getObjectUsingPath(namespace,qubit.Define.getVendorSpace())}})();(function(){function Quick(){}var LibraryTag=qubit.opentag.LibraryTag;var Define=qubit.Define;
Quick.library=function(){return LibraryTag.define.apply(LibraryTag,arguments)};Quick.libraryRef=function(){return LibraryTag.getLibraryByClasspath.apply(LibraryTag.getLibraryByClasspath,arguments)};Define.namespace("qubit.Quick",Quick)})();(function(){function Container(config){this.runQueue=[];this.tags={};this.config={cookieDomain:"",maxCookieLength:1E3,gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:null,pingServerUrl:null,trackSession:null,disabled:false,containerId:"",
scanTags:false,noPings:false};this.ignoreTagsState=false;if(config){this.setConfig(config);if(!config.name)this.config.name="Cont-"+_counter++;Container.register(this);if(Container.NO_PINGS)this.config.noPings=true;this.ping=new qubit.opentag.Ping(this.config);var callback=this.sendPings.bind(this);this._pingAsyncCallback=function(){Timed.setTimeout(callback,5)};if(config.init)try{config.init.call(this,config)}catch(ex){}}return this}function attachRenamedIfExist(obj,src,name){if(obj[name]){steps[name]=
steps[name]||1;name+="("+steps[name]+")";steps[name]++}obj[name]=src}var Utils=qubit.opentag.Utils;var BaseFilter=qubit.opentag.filter.BaseFilter;var Filter=qubit.opentag.filter.Filter;var BaseTag=qubit.opentag.BaseTag;var Timed=qubit.opentag.Timed;var Tags=qubit.opentag.Tags;var Session=qubit.opentag.Session;var Cookie=qubit.Cookie;var _counter=1;try{window.opentag_consentGiven=function(){Container.consentIsGiven=true;var all=Container.getContainers();for(var i=0;i<all.length;i++)try{all[i].run()}catch(ex){}}.bind(this)}catch(ex){}qubit.Define.clazz("qubit.opentag.Container",
Container);var containers=[];Container.register=function(ref){Utils.addToArrayIfNotExist(containers,ref)};Container.prototype.isTellingLoadTimes=function(){var value=this.config.tellLoadTimesProbability;if(value===null)value=0;return value>Math.random()};Container.prototype.destroy=function(withTags){this.destroyed=true;this.unregister();if(withTags)for(var prop in this.tags){var tag=this.tags[prop];if(tag instanceof BaseTag){tag.destroy();this.tags[prop]=null;delete this.tags[prop]}}var name=this.PACKAGE_NAME.split(".");
name=name[name.length-1];var pkg=Utils.getParentObject(this.PACKAGE_NAME);pkg[name]=null;delete pkg[name]};Container.findContainersByName=function(name){var items=this.getContainers();var results=[];for(var i=0;i<items.length;i++)if(items[i].config.name===name)results.push(items[i]);return results};Container.getById=function(id){var items=this.getContainers();for(var i=0;i<items.length;i++)if(items[i].getContainerId()===id)return items[i];return null};Container.prototype.unregister=function(withTags){Container.unregister(this,
withTags)};Container.unregister=function(ref,withTags){Utils.addToArrayIfNotExist(containers,ref);var index=Utils.removeFromArray(containers,ref);if(withTags)for(var prop in this.tags){var tag=this.tags[prop];if(tag instanceof BaseTag){tag.unregister();this.tags[prop]=null;delete this.tags[prop]}}if(!index||index.length===0);};Container.prototype.hasConsent=function(){return Cookie.get("qubitconsent")==="Accepted"};Container.prototype.register=function(ref){Container.register(ref||this)};Container.getContainers=
function(){return containers};Container.prototype.getContainers=function(){return Container.getContainers()};Container.prototype.onTagRegistered=function(tag){};Container.prototype.registerTag=function(tag){var name=tag.config.name;if(this.tags[name]);else{this.tags[name]=tag;try{this.onTagRegistered(tag)}catch(ex){}}};Container.prototype.registerTags=function(tags){for(var i=0;i<tags.length;i++)this.registerTag(tags[i])};Container.prototype.setConfig=function(config){for(var prop in config)this.config[prop]=
config[prop]};Container.prototype.run=function(){this.runTags({command:"runOnceIfFiltersPass"})};Container.prototype.runWithoutFilters=function(){this.runTags({command:"run"})};Container.prototype.getTagByname=function(name){return this.tags[name]};Container.prototype.containerScriptLoadedSynchronously=function(){var i;var ii;var script;var scripts;var src;scripts=document.getElementsByTagName("script");for(i=0,ii=scripts.length;i<ii;i+=1){script=scripts[i];src=script.getAttribute("src");if(!!src&&
src.indexOf(""+this.config.clientId+"-"+this.getContainerId()+".js")>0)return script.getAttribute("async")===null&&(script.getAttribute("defer")===false||script.getAttribute("defer")===""||script.getAttribute("defer")===null)}return true};Container.prototype.prepareSessionIfNeeded=function(){var trackSession=this.config.trackSession;if(trackSession!==true&&trackSession!==false){var tags=this.tags;for(var name in tags)if(tags.hasOwnProperty(name)){var tmpTag=tags[name];tmpTag.resolveAllDynamicData();
var filters=tmpTag.getFilters();for(var i=0;i<filters.length;i++){var filter=filters[i];if(filter instanceof Filter&&filter.isSession()){this.trackSession=true;break}}if(this.trackSession)break}}else this.trackSession=trackSession;if(Container.TRACK_SESSION)this.trackSession=true;if(this.trackSession)this.session=Session.setupSession(this);if(this.session);};Container.prototype.runTags=function(config,force){if(this.destroyed)throw"Container has been destroyed.";if(!force)if(Container.LOCKED||Utils.global().QUBIT_CONTAINERS_LOCKED)return;
if(this.onBeforeRun)try{this.onBeforeRun()}catch(ex){}var forceAsync=!this.containerScriptLoadedSynchronously();var command="runIfFiltersPass";if(config&&config.command)command=config.command;this.runningStarted=(new Date).valueOf();var firedTagsMap={};if(this.config.scanTags)if(!this._scanned){this.scanForTags();this._scanned=(new Date).valueOf()}this.prepareSessionIfNeeded();var orderedTags=this.getTagsInOrder();for(var z=0;z<orderedTags.length;z++)try{var tag=orderedTags[z];var name=tag.config.name;
if(this.includedToRun(tag)){var deps=tag.resolveDependencies();if(deps.length>0)for(var i=0;i<deps.length;i++){var dependency=deps[i];var depName=dependency.config.name;if(!firedTagsMap[depName]&&this.tags[depName]){firedTagsMap[depName]=dependency;this._tagRunner(dependency,command,forceAsync)}}if(!firedTagsMap[name]){firedTagsMap[name]=tag;this._tagRunner(tag,command,forceAsync)}}}catch(ex){}Timed.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),1100);this.waitForAllTagsToFinish()};
Container.prototype.getTagsInOrder=function(){var tagsOrdered=[];for(var name in this.tags){var tmpTag=this.tags[name];var priority=tmpTag.config.priority;if(+priority>0){var prIndex=0;for(var c=0;c<tagsOrdered.length;c++){var tmpTagOrdered=tagsOrdered[c];if(tmpTagOrdered){var priorityAlreadyIn=+tmpTagOrdered.config.priority;if(priorityAlreadyIn>0&&priorityAlreadyIn>priority)prIndex++;else break}}tagsOrdered.splice(prIndex,0,tmpTag)}else tagsOrdered.push(tmpTag)}return tagsOrdered};Container.prototype._tagRunner=
function(tag,command,forceAsync){try{if(this.includedToRun(tag)){if(forceAsync)tag.forceAsynchronous=true;if(this.config.delayDocWrite)tag.delayDocWrite=true;tag.session=tag.session||this.session;tag[command]()}}catch(ex){}};Container.prototype.getContainerId=function(){if(this.config.containerId)return this.config.containerId;else{if(this._pkgName)return this._pkgName;var idx=this.PACKAGE_NAME.split(".");idx=idx[idx.length-1];this._pkgName=idx;return idx}};Container.prototype.includedToRun=function(tag){if(!tag)return false;
var cfg=tag.config;if(cfg.inactive)return false;if(cfg.disabled)if(!tag.cookieSaysToRunEvenIfDisabled())return false;if(tag.disabledByCookie())return false;var consentOk=Container.consentIsGiven||!cfg.needsConsent||this.hasConsent();var atInitialState=tag.state===BaseTag.prototype.STATE.INITIAL;return this.ignoreTagsState||consentOk&&atInitialState};Container.prototype.scanForTags=function(clean,pkg){if(clean)this.tags={};var tags;if(pkg&&typeof pkg==="object")tags=this.findAllTags(pkg);else tags=
this.findAllTagsByClassPath();this.registerTags(tags);return tags};Container.prototype.findAllTags=function(pckg,maxDeep){pckg=pckg||this.tagsPackageName||this.PACKAGE_NAME;return Tags.findAllTags(pckg,maxDeep)};Container.prototype.findAllTagsByClassPath=function(startsWith){startsWith=startsWith||this.PACKAGE_NAME;return Tags.findAllTagsByClassPath(startsWith)};Container.prototype.findAllFilters=function(pckg,maxDeep){pckg=pckg||this.tagsPackageName||this.PACKAGE_NAME;return Tags.findAllFilters(pckg,
maxDeep)};Container.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting)return;if(!this._lastWaited)this._lastWaited=(new Date).valueOf();var timedOut=(new Date).valueOf()-this._lastWaited>15*1E3;var finished=this.allTagsFinished()||timedOut;if(!this._showFinishedOnce&&finished){this._lastWaited=null;if(timedOut);this._showFinishedOnce=true;this.runningFinished=(new Date).valueOf();this.sendPingsNotTooOften();if(this.onTagsInitiallyRun)this.onTagsInitiallyRun()}else if(!finished){this._waitForAllTagsToFinishWaiting=
true;this._showFinishedOnce=false;Timed.setTimeout(function(){this._waitForAllTagsToFinishWaiting=false;this.waitForAllTagsToFinish()}.bind(this),100)}else;};Container.prototype.onTagsInitiallyRun=EMPTY_FUN;Container.prototype.resetAllTags=function(){for(var prop in this.tags)if(this.tags.hasOwnProperty(prop))this.tags[prop].reset()};Container.prototype.reset=function(){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=
undefined;this.resetAllTags()};Container.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||{};Timed.runIfNotScheduled(this._pingAsyncCallback,2E3,this._sndLck)};Container.prototype.sendPings=function(){if(this.config.noPings)return;var i;if(this.isTellingLoadTimes()){var results=this.getAllTagsByState();var _this=this;var loadTimes;if(results.run){loadTimes=Tags.getLoadTimes(results.run);this.lastPingsSentTime=(new Date).valueOf();this.ping.send(this,loadTimes)}loadTimes=Tags.getLoadTimes();
var deduplicatedTagsToBeSent=[];for(i=0;i<loadTimes.length;i++)(function(j){var tag=loadTimes[j].tag;if(tag.config.dedupe&&tag.sendDedupePing)deduplicatedTagsToBeSent.push(tag)})(i);if(deduplicatedTagsToBeSent.length>0){this.lastDedupePingsSentTime=(new Date).valueOf();this.ping.sendDedupe(this,deduplicatedTagsToBeSent)}if(results.other){loadTimes=Tags.getLoadTimes(results.other);var otherTagsToBeSent=[];for(i=0;i<loadTimes.length;i++)(function(j){var tag=loadTimes[j].tag;otherTagsToBeSent.push(loadTimes[j]);
var after=tag.onAfter;tag.onAfter=function(success){after.call(tag,success);_this.sendPingsNotTooOften();if(success);}})(i);if(otherTagsToBeSent.length>0)this.ping.send(this,otherTagsToBeSent)}if(results.awaiting){loadTimes=Tags.getLoadTimes(results.awaiting);var awaitingTagsToBeSent=[];for(i=0;i<loadTimes.length;i++)(function(j){var tag=loadTimes[j].tag;awaitingTagsToBeSent.push(loadTimes[j]);var after=tag.onAfter;tag.onAfter=function(success){after.call(tag,success);_this.sendPingsNotTooOften();
if(success);}})(i);if(awaitingTagsToBeSent.length>0)this.ping.send(this,awaitingTagsToBeSent)}}};Container.prototype.getAllTagsByState=function(){return Container.getAllTagsByState(this.tags)};Container.getAllTagsByState=function(tags){var runScripts=null;var other=null;var filterReady=null;var failed=null;var consent=null;var locked=null;var LOWEST_FAIL_STATE=BaseTag.prototype.STATE.EXECUTED_WITH_ERRORS;for(var prop in tags){var tag=tags[prop];if(tag instanceof BaseTag){var name=tag.config.name;
if(tag.scriptExecuted>0){runScripts=runScripts||{};attachRenamedIfExist(runScripts,tag,name)}else if(tag.locked){locked=locked||{};attachRenamedIfExist(locked,tag,name)}else if(tag.scriptExecuted<0||tag.state>=LOWEST_FAIL_STATE){failed=failed||{};attachRenamedIfExist(failed,tag,name)}else if(tag.filtersState()===BaseFilter.state.SESSION||tag.filtersState()>0){filterReady=filterReady||{};attachRenamedIfExist(filterReady,tag,name)}else if(tag.config.needsConsent){consent=consent||{};attachRenamedIfExist(consent,
tag,name)}else{other=other||{};attachRenamedIfExist(other,tag,name)}}}return{run:runScripts,failed:failed,awaiting:filterReady,consent:consent,locked:locked,other:other}};var steps={};Container.prototype.allTagsFinished=function(){for(var prop in this.tags)if(this.tags.hasOwnProperty(prop)){var tag=this.tags[prop];if(tag instanceof qubit.opentag.BaseTag){var state=tag.filtersState();if(!tag.config.disabled){var notFailedAndUnlocked=tag.filtersState()<0&&!tag.locked;var tagNotFinishedOrNotRunner=!(tag.finished()||
tag.config.runner&&!tag.isRunning);if(notFailedAndUnlocked&&tagNotFinishedOrNotRunner){var isNotSession=state!==BaseFilter.state.SESSION;var doesWaitForDeps=+tag.awaitingDependencies>0;if(isNotSession&&!doesWaitForDeps)return false}}}}return true};Container.prototype.getPageVariables=function(){var vars=[];for(var prop in this.tags)if(this.tags.hasOwnProperty(prop)){var tVars=this.tags[prop].getPageVariables();for(var i=0;i<tVars.length;i++)Utils.addToArrayIfNotExist(vars,tVars[i])}return vars};Container.getPageVariableByName=
function(name){var vars=this.getAllPageVariables();var rets=[];for(var i=0;i<vars.length;i++)if(vars[i].config.name===name)rets.push(vars[i]);return rets};var disableCookiePrefix="qubit.opentag.disableContainerRunning_";var forceCookiePrefix="qubit.opentag.forceContainerRunning";Container.prototype._getCookieNameForDisabling=function(){return disableCookiePrefix+this.getContainerId()+this.config.name};Container.prototype.disabledByCookie=function(){return!!Cookie.get(this._getCookieNameForDisabling())};
Container.prototype.setCookieToDisable=function(){Cookie.set(this._getCookieNameForDisabling(),"true")};Container.prototype.rmCookieToDisable=function(){Cookie.rm(this._getCookieNameForDisabling())};Container.rmAllDisablingCookies=function(){Utils.rmCookiesMatching(disableCookiePrefix)};Container.setCookieForDisabledContainersToRun=function(){Cookie.set(forceCookiePrefix,"true")};Container.rmCookieForDisabledContainersToRun=function(){Cookie.rm(forceCookiePrefix)}})();(function(){function CustomTag(config){var defaults=
{url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",async:true};Utils.setIfUnset(config,defaults);CustomTag.SUPER.call(this,config)}var Utils=qubit.opentag.Utils;qubit.Define.clazz("qubit.opentag.CustomTag",CustomTag,qubit.opentag.LibraryTag)})();(function(){function trim(text){return text.replace(/^\s+/,"").replace(/\s+$/,"")}var UVListener={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null};var uv;var uvLocation="universal_variable";var starterId=0;var POLL_DELAY_MS=
500;var timer;UVListener._isArray=function(input){return Object.prototype.toString.call(input)==="[object Array]"};UVListener._targetChanged=function(keyString,old,newObject){var oldAsObject;var oldTarget;var newTarget;if(newObject===null)if(old==="null")return false;else return true;else if(newObject===undefined)if(old===newObject)return false;else return true;else{oldAsObject=JSON.parse(old);oldTarget=UVListener._getNested(oldAsObject,keyString);newTarget=UVListener._getNested(newObject,keyString);
return!UVListener._jsonIsEqual(oldTarget,newTarget)}};UVListener._processCallbacks=function(){var i;if(UVListener.early_callbacks&&UVListener.early_callbacks.length>0){for(i=0;i<UVListener.early_callbacks.length;i+=1)UVListener.push(UVListener.early_callbacks[i]);UVListener.early_callbacks=null}};UVListener._keyStringToArr=function(keyString){keyString=trim(keyString);if(keyString==="")return[];else{keyString=keyString.replace(/\[(\w+)\]/g,".$1");keyString=keyString.replace(/^\./,"");return keyString.split(".")}};
UVListener._getNested=function(object,keyString){var arr=UVListener._keyStringToArr(keyString);for(var n;arr.length>0;){n=arr.shift();if(object.hasOwnProperty(n))object=object[n];else return}return object};UVListener._jsonIsEqual=function(obj1,obj2){if(typeof obj1!=="string")obj1=JSON.stringify(obj1,UVListener._stripEvents);if(typeof obj2!=="string")obj2=JSON.stringify(obj2,UVListener._stripEvents);return obj1===obj2};UVListener._stripEvents=function(key,value){if(key!=="events")return value;else return undefined};
UVListener._on=function(type,func){var typeArray;var key;typeArray=type.split(":");type=typeArray[0];key=typeArray[1];UVListener.callbacks[type]=UVListener.callbacks[type]||[];if(key)UVListener.callbacks[type].push({keyString:key,func:func});else UVListener.callbacks[type].push({func:func})};UVListener._trigger=function(type,data){var i;var keyString;if(UVListener.callbacks[type])for(i=0;i<UVListener.callbacks[type].length;i+=1)if(typeof UVListener.callbacks[type][i].func==="function"){keyString=
UVListener.callbacks[type][i].keyString;if(keyString){if(type==="change"&&UVListener._targetChanged(keyString,UVListener.currentUV,uv))UVListener.callbacks[type][i].func(data)}else UVListener.callbacks[type][i].func(data)}};UVListener._eventsPush=function(evt){var i;var ii;uv.events[uv.events.length]=evt;evt.time=evt.time||(new Date).getTime();if(UVListener.callbacks.event){i=0;ii=UVListener.callbacks.event.length;for(i;i<ii;i+=1)UVListener.callbacks.event[i].func(evt)}evt.has_fired=true};UVListener._getUnfiredEvents=
function(){var i=0;for(i=0;i<uv.events.length;i+=1)if(!uv.events[i].has_fired){UVListener.unfired_events.push(uv.events.splice(i,1)[0]);i-=1}};UVListener._fireEvents=function(){for(;UVListener.unfired_events.length>0;)uv.events.push(UVListener.unfired_events.shift())};UVListener._resetEventsPush=function(){uv.events=uv.events||[];if(uv.events.push.toString().indexOf("[native code]")!==-1){uv.events.push=UVListener._eventsPush;UVListener._getUnfiredEvents();UVListener._fireEvents()}};UVListener._checkForChanges=
function(){if(UVListener.callbacks.change&&UVListener.callbacks.change.length>0)if(!UVListener._jsonIsEqual(UVListener.currentUV,uv)){UVListener._trigger("change",uv);UVListener.currentUV=JSON.stringify(uv,UVListener._stripEvents)}};UVListener._setUVLocation=function(newLoc){uvLocation=newLoc;UVListener._initUV()};UVListener._initUV=function(){window[uvLocation]=window[uvLocation]||{events:[]};uv=window[uvLocation];if(!uv.events)uv.events=[]};UVListener.push=function(data){if(!UVListener._isArray(data))return;
if(data[0]==="on")UVListener._on(data[1],data[2]);else if(data[0]==="trigger"&&data[1])UVListener._trigger(data[1])};UVListener.init=function(testing,uvLoc){if(uvLoc)uvLocation=uvLoc;UVListener._initUV();if(!window.uv_listener||UVListener._isArray(window.uv_listener)){UVListener.early_callbacks=window.uv_listener||null;window.uv_listener=UVListener;if(!testing)UVListener.start()}else if(uvLoc)window.uv_listener._setUVLocation(uvLocation)};UVListener.start=function(){UVListener.currentUV=JSON.stringify(uv,
UVListener._stripEvents);timer=setInterval(function(){UVListener._initUV();UVListener._resetEventsPush();UVListener._checkForChanges()},POLL_DELAY_MS);UVListener._processCallbacks()};q.html.UVListener=UVListener})();(function(){function Main(){}function requestedDebugMode(){var isDebug=false;if(Cookie.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=0)isDebug=true;return isDebug}function requestedDebugTool(){var isDebug=false;if(Cookie.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=
0)isDebug=true;return isDebug}function disabled(){if(document.location.href.indexOf("opentag_disabled\x3dtrue")>=0)return true;return false}function setIfUnset(object,property,value){if(value&&(object[property]===undefined||object[property]===""||object[property]===null))object[property]=value}function getClientId(container){var parent=qubit.opentag.Utils.getParentObject(container.PACKAGE_NAME);var cfg=parent.ClientConfig;if(cfg&&cfg.clientId)return cfg.clientId;else{var parts=container.PACKAGE_NAME.split(".");
return parts[parts.length-2].substring(1)}}var Cookie=qubit.Cookie;var Utils=qubit.opentag.Utils;Main.run=function(){var needDebugModeButNotInDebug=false;if(disabled())return;var selfDebug=false;var debugToolRequested=requestedDebugTool();var debugRequested=debugToolRequested||requestedDebugMode();if(!selfDebug&&debugRequested){if(!qubit.DEBUG_MODE)GLOBAL.TAGSDK_NS_OVERRIDE=true;else GLOBAL.TAGSDK_NS_OVERRIDE=false;needDebugModeButNotInDebug=true}if(qubit.DEBUG_MODE)GLOBAL.TAGSDK_NS_OVERRIDE=false;
try{q.html.UVListener.init()}catch(uvInitFalure){}Main.runAllContainers(needDebugModeButNotInDebug)};Main.runAllContainers=function(needDebugModeButNotInDebug){try{var containers=qubit.opentag.Container.getContainers();for(var i=0;i<containers.length;i++){var container=containers[i];var contCfg=container.config;if(!container.runningStarted&&!container.configuredInMain){contCfg.scanTags=true;var clientConfig=Utils.getParentObject(container.PACKAGE_NAME).ClientConfig;if(clientConfig)setIfUnset(container.config,
"clientId",clientConfig.id);var sysDefaults=Utils.getParentObject(container.PACKAGE_NAME).SystemDefaults;if(sysDefaults){setIfUnset(contCfg,"pingServerUrl",sysDefaults.pingServerUrl);setIfUnset(contCfg,"tellLoadTimesProbability",sysDefaults.tellLoadTimesProbability)}container.configuredInMain=true;if(needDebugModeButNotInDebug){container.destroy(true);Main.loadDebugVersion(container)}else if(!GLOBAL.QUBIT_OPENTAG_STOP_MAIN_EXECUTION)container.run();else(function(){var runner=qubit.opentag.RUN_STOPPED_EXECUTON;
qubit.opentag.RUN_STOPPED_EXECUTON=function(){try{if(runner)runner()}finally{container.run()}}})(container)}}}catch(ex){}};Main.loadDebugVersion=function(container){var debugScript=document.createElement("script");var url;var scriptURL=container.config.scriptURL;var clientId=getClientId(container);var containerId=container.getContainerId();if(scriptURL){url=scriptURL;var dLen="-debug.js".length;if(url.lastIndexOf("-debug.js")!==url.length-dLen){url=url.substring(0,url.length-".js".length);url+="-debug.js"}}var urlCDN=
"//d3c3cq33003psk.cloudfront.net/opentag-"+clientId+"-"+containerId+"-debug.js";if(url&&urlCDN!==url)debugScript.src=url;else debugScript.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+clientId+"-"+containerId+"-debug.js";document.getElementsByTagName("head")[0].appendChild(debugScript)};qubit.Define.namespace("qubit.opentag.Main",Main)})();(function(){function UniversalVariable(config){UniversalVariable.SUPER.apply(this,arguments)}qubit.Define.clazz("qubit.opentag.pagevariable.UniversalVariable",
UniversalVariable,qubit.opentag.pagevariable.Expression)})()})()})();(function(){})();(function(){var instance=qubit.opentag.Container;var container=new instance({"maxCookieLength":3E3,"cookieDomain":"","pingServerUrl":"","delayDocWrite":true,"name":"Toast","gzip":true,"disabled":false,"tellLoadTimesProbability":1,"containerId":841844});var pkg="toast.Container";qubit.Define.clientNamespace(pkg,container)})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Peerius Search Query"});var pkg="toast.variables.PeeriusSearchQuery";qubit.Define.clientNamespace(pkg,variable);variable.value="(function () {\n  var uv \x3d window.universal_variable;\n  return uv \x26\x26 uv.listing \x26\x26 uv.listing.query;\n}())"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Title"});var pkg="toast.variables.Title";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Cookie Domain toa.st"});var pkg="toast.variables.CookieDomainToaSt";qubit.Define.clientNamespace(pkg,variable);variable.value=".toa.st"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Order Sub-Total","description":"A valid number with the total amount the order including tax per item, but not including shipping or discounts"});var pkg="toast.variables.TransactionOrderSubTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.subtotal"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Unit Sale Prices List"});var pkg="toast.variables.PeeriusUnitSalePricesList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.unit_sale_price"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Landline"});var pkg="toast.variables.Landline";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Email(3)"});var pkg="toast.variables.Email3";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLogonId").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(6)"});var pkg="toast.variables.LastName6";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLastName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(1)"});var pkg="toast.variables.LastName1";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.lastName;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"List of Product Categories"});var pkg="toast.variables.ListOfProductCategories";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  if (window.universal_variable \x26\x26\n      universal_variable.transaction \x26\x26\n      universal_variable.transaction.line_items)\n  {\n    var arrayLength \x3d universal_variable.transaction.line_items.length;\n    var array \x3d [];\n    for (var i\x3d0; i\x3carrayLength; i++)\n    {\n      array.push("");\n    }\n    \n    return array;\n  }\n  \n  return null;\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Total","description":"A valid number with the total cost of the basket including any known tax, shipping and discounts"});var pkg="toast.variables.BasketTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.total"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Quantities(1)"});var pkg="toast.variables.ListOfProductQuantities1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius User Email"});var pkg="toast.variables.PeeriusUserEmail";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.email"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(9)"});var pkg="toast.variables.RocketFuelCampaignID9";qubit.Define.clientNamespace(pkg,variable);variable.value="20478501"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Postcode(2)"});var pkg="toast.variables.Postcode2";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Page Name(1)"});var pkg="toast.variables.PageName1";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return universal_variable.product.name.replace(/\\s/g, '_').toLowerCase();\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Line Items - Product SKU List","description":"The SKU code for the item that has been sold - this should be unique for items which differ by colour or size"});var pkg="toast.variables.TransactionLineItemsProductSKUList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Order Total(1)"});var pkg="toast.variables.OrderTotal1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.total"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(7)"});var pkg="toast.variables.RocketFuelCampaignID7";qubit.Define.clientNamespace(pkg,variable);variable.value="20518062"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"OptIns(1)"});var pkg="toast.variables.OptIns1";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Line Items - Unit Sale Price List","description":"The price of the item taking into account any sales due to vouchers, or special circumstances"});var pkg="toast.variables.TransactionLineItemsUnitSalePriceList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.unit_sale_price"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Catalogue Download"});var pkg="toast.variables.CatalogueDownload";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Order Shipping Cost","description":"A valid number with the total amount of shipping costs included in the order"});var pkg="toast.variables.TransactionOrderShippingCost";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.shipping_cost"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Random Number"});var pkg="toast.variables.RandomNumber";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  var cachebust \x3d (Math.random() + "").substr(2);\n  \n  return cachebust;\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Struq Basket Page Pixel ID"});var pkg="toast.variables.StruqBasketPagePixelID";qubit.Define.clientNamespace(pkg,variable);variable.value="spkfsFF_eEegk7-ctrWWiQ"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Cookie Domain"});var pkg="toast.variables.CookieDomain";qubit.Define.clientNamespace(pkg,variable);variable.value=".toast.co.uk"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 4(1)"});var pkg="toast.variables.Address41";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.country);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Unit Sale Price List"});var pkg="toast.variables.PeeriusUnitSalePriceList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.unit_sale_price"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Page Name(6)"});var pkg="toast.variables.PageName6";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return universal_variable.page.breadcrumb_string.replace(/\\s/g, '_').toLowerCase();\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Subtotal"});var pkg="toast.variables.PeeriusSubtotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.subtotal"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Country"});var pkg="toast.variables.Country";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"First Name(3)"});var pkg="toast.variables.FirstName3";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return window.jQuery("#ctl00_globalMainContent_txtRegisterFirstName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(4)"});var pkg="toast.variables.RocketFuelCampaignID4";qubit.Define.clientNamespace(pkg,variable);variable.value="20478505"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"First Name(1)"});var pkg="toast.variables.FirstName1";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return window.jQuery("#ctl00_globalMainContent_txtRegisterFirstName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Line Items - Product Unit Price List","description":"A number with the cost of a single unit of the item in the basket"});var pkg="toast.variables.BasketLineItemsProductUnitPriceList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.unit_price"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Basket Currency"});var pkg="toast.variables.PeeriusBasketCurrency";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.currency"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(5)"});var pkg="toast.variables.RocketFuelCampaignID5";qubit.Define.clientNamespace(pkg,variable);variable.value="20478501"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Product Listing IDs"});var pkg="toast.variables.PeeriusProductListingIDs";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.listing.items[#].id"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"News SignUp"});var pkg="toast.variables.NewsSignUp";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.universal_variable.transaction.email_signup;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Total"});var pkg="toast.variables.TransactionTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.total"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Email"});var pkg="toast.variables.PeeriusEmail";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.email"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Quantities"});var pkg="toast.variables.ListOfProductQuantities";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"City"});var pkg="toast.variables.City";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.city);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Shipping Cost"});var pkg="toast.variables.ShippingCost";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.shipping_cost"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(8)"});var pkg="toast.variables.RocketFuelCampaignID8";qubit.Define.clientNamespace(pkg,variable);variable.value="20478499"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product IDs(2)"});var pkg="toast.variables.ListOfProductIDs2";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"OptIns(4)"});var pkg="toast.variables.OptIns4";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"County"});var pkg="toast.variables.County";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"OptIns(3)"});var pkg="toast.variables.OptIns3";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(4)"});var pkg="toast.variables.LastName4";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.lastName;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Line Items - Product SKU List","description":"The SKU code for the item in the basket - this should be unique for items which differ by colour or size"});var pkg="toast.variables.BasketLineItemsProductSKUList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID"});var pkg="toast.variables.RocketFuelCampaignID";qubit.Define.clientNamespace(pkg,variable);variable.value="20478503"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 3(2)"});var pkg="toast.variables.Address32";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  if (window.universal_variable \x26\x26 \n      universal_variable.transaction \x26\x26\n      universal_variable.transaction.delivery \x26\x26\n      universal_variable.transaction.delivery.state)\n  {\n    return universal_variable.transaction.delivery.state;\n  }\n  \n  return null;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Title(1)"});var pkg="toast.variables.Title1";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.title;\n})()"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Email(5)"});var pkg="toast.variables.Email5";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.email"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Order Total"});var pkg="toast.variables.OrderTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="(function  ()\n{ \n  return window.universal_variable.transaction.total;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Order Currency","description":"The standard letter code in captials for the currency type in which the order is being paid, eg EUR, USD, GBP"});var pkg="toast.variables.TransactionOrderCurrency";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.currency"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Tax Value"});var pkg="toast.variables.TaxValue";qubit.Define.clientNamespace(pkg,variable);variable.value="0"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Line Items - Product Name List","description":"The name of the product that has been sold"});var pkg="toast.variables.TransactionLineItemsProductNameList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.name"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Mobile"});var pkg="toast.variables.Mobile";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Page Name"});var pkg="toast.variables.PageName";qubit.Define.clientNamespace(pkg,variable);variable.value="Homepage"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Site URL"});var pkg="toast.variables.SiteURL";qubit.Define.clientNamespace(pkg,variable);variable.value="toast.co.uk"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Product IDs"});var pkg="toast.variables.ProductIDs";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.listing.items[#].id"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(8)"});var pkg="toast.variables.LastName8";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.lastName;\n})()"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 2(2)"});var pkg="toast.variables.Address22";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.city);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Product IDs"});var pkg="toast.variables.PeeriusProductIDs";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Line Items - Product Name List","description":"The name of the product that is in the basket"});var pkg="toast.variables.BasketLineItemsProductNameList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.name"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Unit Sale Price List"});var pkg="toast.variables.TransactionUnitSalePriceList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.unit_sale_price"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Peerius UAT Client ID"});var pkg="toast.variables.PeeriusUATClientID";qubit.Define.clientNamespace(pkg,variable);variable.value="uat"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Merchant ID"});var pkg="toast.variables.RocketFuelMerchantID";qubit.Define.clientNamespace(pkg,variable);variable.value="1429"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Struq Conversion Pixel ID"});var pkg="toast.variables.StruqConversionPixelID";qubit.Define.clientNamespace(pkg,variable);variable.value="dXHjt59QCkqwPcMbZ4C7fw"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Product Unit Sale Prices"});var pkg="toast.variables.PeeriusProductUnitSalePrices";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.unit_sale_price"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Line Items - Product ID List","description":"The identifier for the item that has been sold - this must be the same for items which differ only by colour or size"});var pkg="toast.variables.TransactionLineItemsProductIDList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"UV - Ignore Last Breadcrumb"});var pkg="toast.variables.UVIgnoreLastBreadcrumb";qubit.Define.clientNamespace(pkg,variable);variable.value="false"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Order Id","description":"A unique identifier for the order"});var pkg="toast.variables.TransactionOrderId";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.order_id"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Struq Listing Page Pixel ID"});var pkg="toast.variables.StruqListingPagePixelID";qubit.Define.clientNamespace(pkg,variable);variable.value="x4QVxoExmkmONhP5Fm7DXg"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Country(1)"});var pkg="toast.variables.Country1";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.country);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Forename"});var pkg="toast.variables.Forename";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  if (window.universal_variable \x26\x26\n      universal_variable.user \x26\x26\n      universal_variable.user.name)\n  {\n    if (universal_variable.user.name.split(' ').length \x3d\x3d\x3d 2)\n    {\n      return universal_variable.user.name.split(' ')[0];\n    }\n    \n    return \"\";\n  }\n  \n  return null;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(10)"});var pkg="toast.variables.RocketFuelCampaignID10";qubit.Define.clientNamespace(pkg,variable);variable.value="20478497"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Line Items - Quantity List","description":"The number of units being sold"});var pkg="toast.variables.TransactionLineItemsQuantityList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(12)"});var pkg="toast.variables.RocketFuelCampaignID12";qubit.Define.clientNamespace(pkg,variable);variable.value="20478507"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(7)"});var pkg="toast.variables.LastName7";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.lastName;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"User Full Name","description":"The full name of the user."});var pkg="toast.variables.UserFullName";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.name"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 4"});var pkg="toast.variables.Address4";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  if (window.universal_variable \x26\x26 \n      universal_variable.transaction \x26\x26\n      universal_variable.transaction.delivery \x26\x26\n      universal_variable.transaction.delivery.country)\n  {\n    return universal_variable.transaction.delivery.country;\n  }\n  \n  return null;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Item Price List"});var pkg="toast.variables.ItemPriceList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.unit_sale_price"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Order Total","description":"A valid number with the total cost including tax, shipping and discounts"});var pkg="toast.variables.TransactionOrderTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.total"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius User Language"});var pkg="toast.variables.PeeriusUserLanguage";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.language"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(2)"});var pkg="toast.variables.LastName2";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLastName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(4)"});var pkg="toast.variables.EventName4";qubit.Define.clientNamespace(pkg,variable);variable.value="view"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Line Items - Product Category List","description":"The category of the product that has been sold"});var pkg="toast.variables.TransactionLineItemsProductCategoryList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.category"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Names(2)"});var pkg="toast.variables.ListOfProductNames2";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.name"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Struq Category Pixel ID"});var pkg="toast.variables.StruqCategoryPixelID";qubit.Define.clientNamespace(pkg,variable);variable.value="x4QVxoExmkmONhP5Fm7DXg"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Page Name(7)"});var pkg="toast.variables.PageName7";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return universal_variable.product.name.replace(/\\s/g, '_').toLowerCase();\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Email(4)"});var pkg="toast.variables.Email4";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.email"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Web Property ID(2)"});var pkg="toast.variables.WebPropertyID2";qubit.Define.clientNamespace(pkg,variable);variable.value="UA-49091875-1"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"AOV"});var pkg="toast.variables.AOV";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(7)"});var pkg="toast.variables.EventName7";qubit.Define.clientNamespace(pkg,variable);variable.value="view"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Checkout Total"});var pkg="toast.variables.PeeriusCheckoutTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.total"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Item Quantities List"});var pkg="toast.variables.ItemQuantitiesList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Product SKU","description":"The SKU code for the item that is being viewed - this should be unique for items which differ by colour or size. This is for the case where only one SKU are selectable"});var pkg="toast.variables.ProductSKU";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Country(4)"});var pkg="toast.variables.Country4";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.country);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Product ID"});var pkg="toast.variables.PeeriusProductID";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.product.id"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Email(2)"});var pkg="toast.variables.Email2";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLogonId").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Mediaplex Client ID"});var pkg="toast.variables.MediaplexClientID";qubit.Define.clientNamespace(pkg,variable);variable.value="25211"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Shipping Cost"});var pkg="toast.variables.PeeriusShippingCost";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.shipping_cost"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"First Name(4)"});var pkg="toast.variables.FirstName4";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return window.jQuery("#ctl00_globalMainContent_txtRegisterFirstName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(6)"});var pkg="toast.variables.RocketFuelCampaignID6";qubit.Define.clientNamespace(pkg,variable);variable.value="20478497"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"AJAX Url Start"});var pkg="toast.variables.AJAXUrlStart";qubit.Define.clientNamespace(pkg,variable);variable.value="toast"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Email(1)"});var pkg="toast.variables.Email1";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLogonId").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(9)"});var pkg="toast.variables.LastName9";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.lastName;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Voucher","description":"The voucher code entered"});var pkg="toast.variables.TransactionVoucher";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.voucher"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Peerius Subcategory Name"});var pkg="toast.variables.PeeriusSubcategoryName";qubit.Define.clientNamespace(pkg,variable);variable.value="(function () {\n  return window.universal_variable.page.breadcrumb \x26\x26\n    universal_variable.page.breadcrumb[2];\n}())"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"OptIns(2)"});var pkg="toast.variables.OptIns2";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Country(3)"});var pkg="toast.variables.Country3";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.country);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Peerius Client Name"});var pkg="toast.variables.PeeriusClientName";qubit.Define.clientNamespace(pkg,variable);variable.value="toast"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Page Name(2)"});var pkg="toast.variables.PageName2";qubit.Define.clientNamespace(pkg,variable);variable.value="cart_7_-_sale"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Page Name(9)"});var pkg="toast.variables.PageName9";qubit.Define.clientNamespace(pkg,variable);variable.value="cart_7_-_sale"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Product Item Quantity List"});var pkg="toast.variables.PeeriusProductItemQuantityList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Struq Product List"});var pkg="toast.variables.StruqProductList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.id"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"UPT"});var pkg="toast.variables.UPT";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Currency"});var pkg="toast.variables.Currency";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.currency"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Email(6)"});var pkg="toast.variables.Email6";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLogonId").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(2)"});var pkg="toast.variables.EventName2";qubit.Define.clientNamespace(pkg,variable);variable.value="view"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"User is Returning","description":"The user is an returning user or a new user."});var pkg="toast.variables.UserIsReturning";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.returning"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Order Total(2)"});var pkg="toast.variables.OrderTotal2";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.subtotal"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Struq Homepage Tracking ID"});var pkg="toast.variables.StruqHomepageTrackingID";qubit.Define.clientNamespace(pkg,variable);variable.value="dRuSy_cmwUOpQEQY3c0K8A"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Title(3)"});var pkg="toast.variables.Title3";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.title;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Shipping Address - City","description":"The city to which the order is to be dispatched"});var pkg="toast.variables.TransactionShippingAddressCity";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.delivery.city"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Sale Prices"});var pkg="toast.variables.SalePrices";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  var items \x3d window.universal_variable.transaction.line_items;\n  var salePrices \x3d "";\n  for (var i \x3d 0; i \x3c items.length; i++)\n  {\n    salePrices +\x3d items[i].product.unit_sale_price;\n    if (i !\x3d\x3d (items.length - 1))\n    {\n      salePrices +\x3d "|";\n    }\n  }\n  \n  return salePrices;\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List or Product Prices"});var pkg="toast.variables.ListOrProductPrices";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.unit_price"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Page Category","description":"The type of page this is, eg: home, product, category, search, basket, checkout, confirmation"});var pkg="toast.variables.PageCategory";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.page.category"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Quantities(2)"});var pkg="toast.variables.ListOfProductQuantities2";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Store Name"});var pkg="toast.variables.StoreName";qubit.Define.clientNamespace(pkg,variable);variable.value="toast"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(3)"});var pkg="toast.variables.LastName3";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.lastName;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(3)"});var pkg="toast.variables.EventName3";qubit.Define.clientNamespace(pkg,variable);variable.value="Cart7-Sale"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Page Name(8)"});var pkg="toast.variables.PageName8";qubit.Define.clientNamespace(pkg,variable);variable.value="login"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Currency","description":"The standard letter code in captials for the currency type in which the order is being paid, eg EUR, USD, GBP"});var pkg="toast.variables.BasketCurrency";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.currency"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Struq Product Page Pixel ID"});var pkg="toast.variables.StruqProductPagePixelID";qubit.Define.clientNamespace(pkg,variable);variable.value="-lgFgK07FkKo-6ovjsG1uQ"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Peerius Client ID"});var pkg="toast.variables.PeeriusClientID";qubit.Define.clientNamespace(pkg,variable);variable.value="toast"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Sub-total"});var pkg="toast.variables.TransactionSubTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.subtotal"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Country(2)"});var pkg="toast.variables.Country2";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.country);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Pixel ID"});var pkg="toast.variables.PixelID";qubit.Define.clientNamespace(pkg,variable);variable.value="-lgFgK07FkKo-6ovjsG1uQ"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Product Listing - Query","description":"The textual query that generated this product listing"});var pkg="toast.variables.ProductListingQuery";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.listing.query"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(2)"});var pkg="toast.variables.RocketFuelCampaignID2";qubit.Define.clientNamespace(pkg,variable);variable.value="20518062"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Product ID List"});var pkg="toast.variables.TransactionProductIDList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Men Quantity"});var pkg="toast.variables.MenQuantity";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Line Items - Product Unit Price List","description":"A number with the cost of a single unit of the item being sold"});var pkg="toast.variables.TransactionLineItemsProductUnitPriceList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.unit_price"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Product IDs List"});var pkg="toast.variables.PeeriusProductIDsList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product SKUs(1)"});var pkg="toast.variables.ListOfProductSKUs1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Names(3)"});var pkg="toast.variables.ListOfProductNames3";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.name"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"User Language Preference","description":"User preferred Language from a language standard list, ISO language code."});var pkg="toast.variables.UserLanguagePreference";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.language"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"COS"});var pkg="toast.variables.COS";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Sub-Total","description":"A valid number with the total cost of the basket including any known tax per item, but not including shipping or discounts"});var pkg="toast.variables.BasketSubTotal";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.subtotal"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Product Listing - Product ID List","description":"A list of the IDs of each product shown on the page"});var pkg="toast.variables.ProductListingProductIDList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.listing.items[#].id"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"User Email","description":"The email of the current user"});var pkg="toast.variables.UserEmail";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.email"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Line Items - Product Unit Sale Price List","description":"A number with the cost of a single unit of the item in the basket taking into account any offers or voucher codes used"});var pkg="toast.variables.BasketLineItemsProductUnitSalePriceList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.unit_sale_price"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product SKUs"});var pkg="toast.variables.ListOfProductSKUs";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Postcode(1)"});var pkg="toast.variables.Postcode1";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Page Subategory"});var pkg="toast.variables.PageSubategory";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.page.subcategory"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Postcode"});var pkg="toast.variables.Postcode";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.postcode);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(5)"});var pkg="toast.variables.EventName5";qubit.Define.clientNamespace(pkg,variable);variable.value="view"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Search Query(1)"});var pkg="toast.variables.PeeriusSearchQuery1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.listing.query"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Order Quantity"});var pkg="toast.variables.OrderQuantity";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  var items \x3d universal_variable.transaction.line_items;\n  var quantity \x3d 0;\n  for (var i \x3d 0; i \x3c items.length; i++)\n  {\n    quantity +\x3d items[i].quantity;\n  }\n  return quantity;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 1(1)"});var pkg="toast.variables.Address11";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.address);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 1"});var pkg="toast.variables.Address1";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  if (window.universal_variable \x26\x26 \n      universal_variable.transaction \x26\x26\n      universal_variable.transaction.delivery \x26\x26\n      universal_variable.transaction.delivery.address)\n  {\n    return universal_variable.transaction.delivery.address;\n  }\n  \n  return null;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Web Property ID"});var pkg="toast.variables.WebPropertyID";qubit.Define.clientNamespace(pkg,variable);variable.value="UA-46399975-1"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Pixel ID(1)"});var pkg="toast.variables.PixelID1";qubit.Define.clientNamespace(pkg,variable);variable.value="x4QVxoExmkmONhP5Fm7DXg"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Prices"});var pkg="toast.variables.ListOfProductPrices";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.unit_price"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Page Name(3)"});var pkg="toast.variables.PageName3";qubit.Define.clientNamespace(pkg,variable);variable.value="login"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(8)"});var pkg="toast.variables.EventName8";qubit.Define.clientNamespace(pkg,variable);variable.value="Cart7-Sale"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Men Revenue"});var pkg="toast.variables.MenRevenue";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Women Quantity"});var pkg="toast.variables.WomenQuantity";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Item Quantities List"});var pkg="toast.variables.PeeriusItemQuantitiesList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 2(1)"});var pkg="toast.variables.Address21";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.city);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Cookie Domain(1)"});var pkg="toast.variables.CookieDomain1";qubit.Define.clientNamespace(pkg,variable);variable.value=".toa.st"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Web Property ID(1)"});var pkg="toast.variables.WebPropertyID1";qubit.Define.clientNamespace(pkg,variable);variable.value="UA-49091875-1"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(5)"});var pkg="toast.variables.LastName5";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLastName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Order Language"});var pkg="toast.variables.TransactionOrderLanguage";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.language"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product SKUs(3)"});var pkg="toast.variables.ListOfProductSKUs3";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product IDs(1)"});var pkg="toast.variables.ListOfProductIDs1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product IDs(3)"});var pkg="toast.variables.ListOfProductIDs3";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Product ID","description":"An identifier for the item that is being viewed - this must be the same for items which differ only by colour or size"});var pkg="toast.variables.ProductID";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.product.id"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Product Quantities List"});var pkg="toast.variables.PeeriusProductQuantitiesList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Categories(1)"});var pkg="toast.variables.ListOfProductCategories1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.category"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 3"});var pkg="toast.variables.Address3";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.state);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius User Name"});var pkg="toast.variables.PeeriusUserName";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.name"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Page Type","description":""});var pkg="toast.variables.PageType";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.page.type"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Order Shipping"});var pkg="toast.variables.TransactionOrderShipping";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.shipping_cost"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Language"});var pkg="toast.variables.PeeriusLanguage";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.user.language"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Event Name"});var pkg="toast.variables.EventName";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.universal_variable.user.user_id;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Page Name(4)"});var pkg="toast.variables.PageName4";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return universal_variable.page.breadcrumb_string.replace(/\\s/g, '_').toLowerCase();\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Title(2)"});var pkg="toast.variables.Title2";qubit.Define.clientNamespace(pkg,variable);variable.value='""'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Line Items - Product ID List","description":"The identifier for the item in the basket - this must be the same for items which differ only by colour or size"});var pkg="toast.variables.BasketLineItemsProductIDList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product SKUs(2)"});var pkg="toast.variables.ListOfProductSKUs2";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Transaction Product Quantity List"});var pkg="toast.variables.TransactionProductQuantityList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Affiliation"});var pkg="toast.variables.Affiliation";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.voucher"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name(10)"});var pkg="toast.variables.LastName10";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return jQuery("#ctl00_globalMainContent_txtRegisterLastName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Line Items - Quantity List","description":"The number of units of this item in the basket"});var pkg="toast.variables.BasketLineItemsQuantityList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Last Name"});var pkg="toast.variables.LastName";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  if (window.universal_variable \x26\x26\n      universal_variable.user \x26\x26\n      universal_variable.user.name)\n  {\n    if (universal_variable.user.name.split(' ').length \x3d\x3d\x3d 2)\n    {\n      return universal_variable.user.name.split(' ')[1];\n    }\n    \n    return \"\";\n  }\n  \n  return null;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Item SKU List"});var pkg="toast.variables.ItemSKUList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.sku_code"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Page Subcategory","description":"A more detailed description of the page, eg: if Category is 'category', subCategory may be 'Men's Shirts'"});var pkg="toast.variables.PageSubcategory";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.page.subcategory"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Client Name"});var pkg="toast.variables.ClientName";qubit.Define.clientNamespace(pkg,variable);variable.value="toast"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(11)"});var pkg="toast.variables.RocketFuelCampaignID11";qubit.Define.clientNamespace(pkg,variable);variable.value="20478505"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 2"});var pkg="toast.variables.Address2";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  if (window.universal_variable \x26\x26 \n      universal_variable.transaction \x26\x26\n      universal_variable.transaction.delivery \x26\x26\n      universal_variable.transaction.delivery.city)\n  {\n    return universal_variable.transaction.delivery.city;\n  }\n  \n  return null;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Product ID List"});var pkg="toast.variables.ProductIDList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.listing.items[#].id"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Full Prices"});var pkg="toast.variables.FullPrices";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  var items \x3d window.universal_variable.transaction.line_items;\n  var fullPrices \x3d "";\n  for (var i \x3d 0; i \x3c items.length; i++)\n  {\n    fullPrices +\x3d items[i].product.unit_price;\n    if (i !\x3d\x3d (items.length - 1))\n    {\n      fullPrices +\x3d "|";\n    }\n  }\n  \n  return fullPrices;\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Order ID"});var pkg="toast.variables.OrderID";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.order_id"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Products"});var pkg="toast.variables.Products";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 1(2)"});var pkg="toast.variables.Address12";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.address);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"City(1)"});var pkg="toast.variables.City1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.delivery.city"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(3)"});var pkg="toast.variables.RocketFuelCampaignID3";qubit.Define.clientNamespace(pkg,variable);variable.value="20478499"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Order Tax"});var pkg="toast.variables.OrderTax";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"UV SubSubcategory Name"});var pkg="toast.variables.UVSubSubcategoryName";qubit.Define.clientNamespace(pkg,variable);variable.value="(function () {\n  return window.universal_variable.page.breadcrumb \x26\x26\n    universal_variable.page.breadcrumb[2];\n}())"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Names(1)"});var pkg="toast.variables.ListOfProductNames1";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.name"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Basket Shipping Cost","description":"a valid number with the total amount of potential shipping costs included in the order"});var pkg="toast.variables.BasketShippingCost";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.shipping_cost"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"RocketFuel Campaign ID(1)"});var pkg="toast.variables.RocketFuelCampaignID1";qubit.Define.clientNamespace(pkg,variable);variable.value="20478507"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Client ID"});var pkg="toast.variables.ClientID";qubit.Define.clientNamespace(pkg,variable);variable.value="09701544-8832-42FB-90D8-9EF63F54E64E"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Item Category List"});var pkg="toast.variables.ItemCategoryList";qubit.Define.clientNamespace(pkg,variable);variable.value='(function(){\n  var lineitems \x3d window.universal_variable.transaction.line_items;\n  var arr \x3d [];\n  for (i \x3d 0; i \x3c lineitems.length; ++i) {\n    if(window.universal_variable.transaction.line_items[i].product.sub_category){\n      arr[i] \x3d window.universal_variable.transaction.line_items[i].product.sub_category;  \n    } else {\n      arr[i] \x3d "";\n    }\n    \n  }\n  return arr;\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product IDs"});var pkg="toast.variables.ListOfProductIDs";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.id"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Peerius Channel"});var pkg="toast.variables.PeeriusChannel";qubit.Define.clientNamespace(pkg,variable);variable.value="test"})();(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Catalogue Request"});var pkg="toast.variables.CatalogueRequest";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Women Revenue"});var pkg="toast.variables.WomenRevenue";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Peerius Search Listing IDs"});var pkg="toast.variables.PeeriusSearchListingIDs";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.listing.items[#].id"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Email"});var pkg="toast.variables.Email";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.email;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"UV - Ignore First Breadcrumb"});var pkg="toast.variables.UVIgnoreFirstBreadcrumb";qubit.Define.clientNamespace(pkg,variable);variable.value="true"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Revenue"});var pkg="toast.variables.Revenue";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.total"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(6)"});var pkg="toast.variables.EventName6";qubit.Define.clientNamespace(pkg,variable);variable.value="view"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 3(1)"});var pkg="toast.variables.Address31";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  if (window.universal_variable \x26\x26 \n      universal_variable.transaction \x26\x26\n      universal_variable.transaction.delivery \x26\x26\n      universal_variable.transaction.delivery.state)\n  {\n    return universal_variable.transaction.delivery.state;\n  }\n  \n  return null;\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"OptIns"});var pkg="toast.variables.OptIns";qubit.Define.clientNamespace(pkg,variable);variable.value="Y"})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Page Name(5)"});var pkg="toast.variables.PageName5";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return universal_variable.page.breadcrumb_string.replace(/\\s/g, '_').toLowerCase();\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Order Total excluding Shipping Cost"});var pkg="toast.variables.OrderTotalExcludingShippingCost";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.subtotal"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Quantities(3)"});var pkg="toast.variables.ListOfProductQuantities3";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"First Name(2)"});var pkg="toast.variables.FirstName2";qubit.Define.clientNamespace(pkg,variable);variable.value='(function ()\n{\n  return window.jQuery("#ctl00_globalMainContent_txtRegisterFirstName").val();\n})()'})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"Event Name(1)"});var pkg="toast.variables.EventName1";qubit.Define.clientNamespace(pkg,variable);variable.value="view"})();(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"List of Product Names"});var pkg="toast.variables.ListOfProductNames";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.basket.line_items[#].product.name"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Item Name List"});var pkg="toast.variables.ItemNameList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].product.name"})();
(function(){var instance=qubit.opentag.pagevariable.UniversalVariable;var variable=new instance({"uv":true,"name":"Item Quantity List"});var pkg="toast.variables.ItemQuantityList";qubit.Define.clientNamespace(pkg,variable);variable.value="universal_variable.transaction.line_items[#].quantity"})();
(function(){var instance=qubit.opentag.pagevariable.BaseVariable;var variable=new instance({"name":"First Name"});var pkg="toast.variables.FirstName";qubit.Define.clientNamespace(pkg,variable);variable.value=""})();(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address 4(2)"});var pkg="toast.variables.Address42";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return (window.universal_variable \x26\x26 \n          universal_variable.transaction \x26\x26\n          universal_variable.transaction.delivery \x26\x26\n          universal_variable.transaction.delivery.country);\n})()"})();
(function(){var instance=qubit.opentag.pagevariable.Expression;var variable=new instance({"name":"Address"});var pkg="toast.variables.Address";qubit.Define.clientNamespace(pkg,variable);variable.value="(function ()\n{\n  return window.__qbSub2UserSignedUp.country;\n})()"})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Match View Wishlist","pattern":"/content/wishlist/view-wishlist.htm","patternType":"CONTAINS","priority":1});var pkg="toast.filters.MatchViewWishlist";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Is mobile device","priority":1});var pkg="toast.filters.IsMobileDevice";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var isDevice=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|ios|mobile|opera mobi|opera|tab|touchpad|nexus 7|nexus 10|gt-n|pad|gt-p|ideatab|sm-t|hp slate|xoom|aurora-ii|me301t|a1-810|a1-811|nookhd|pmp5880d|quantum7|kindle fire|sgp3|nook hd|transformer|at300|cobalt|momo|sweet m|archos|nook|nabi2|mz60|vega|slider|mid7|kftt|streak|lepanii|htc_flyer|jro03h|bntv400|a500|kftt build|m805|pom727mc|cm_tenderloin/i.test(navigator.userAgent.toLowerCase());
if(isDevice)cb()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"On Email SignUp - Thank You Page","priority":1});var pkg="toast.filters.OnEmailSignUpThankYouPage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var poll=function(){if(window.jQuery&&jQuery("#thankYouMessage").is(":visible")&&jQuery("#emailFormWrapper").length>0)cb();else setTimeout(poll,100)};poll()};filter.customScript=function(session){return true};filter.lexicalPattern=
""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Rule: Conversion Pixel / Order Confirmation","priority":1});var pkg="toast.filters.RuleConversionPixelOrderConfirmation";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForUV=function(){var uv=window.universal_variable;if(!!(uv&&uv.page&&uv.page.type)){if(uv.page.type==="ordersummary")cb()}else setTimeout(waitForUV,50)};waitForUV()};filter.customScript=function(session){return true};
filter.lexicalPattern=""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"All URLs(2)","priority":1});var pkg="toast.filters.AllURLs2";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Wait for 404","priority":1});var pkg="toast.filters.WaitFor404";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitFor404Page=function(){if(window.jQuery&&window.jQuery(".page-404").length>0&&window.renderRecsErrorPage)cb();else setTimeout(waitFor404Page,200)};waitFor404Page()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"Account","pattern":"/account.htm?mode\x3dmyaccount","patternType":"CONTAINS","priority":2});var pkg="toast.filters.Account";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"UV: Transaction Exists","priority":1});var pkg="toast.filters.UVTransactionExists";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){function waitForConfirmation(){if(window.universal_variable&&window.universal_variable.transaction)cb();else setTimeout(waitForConfirmation,500)}waitForConfirmation()};filter.customScript=function(session){return true};filter.lexicalPattern=
""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Spark written to page","priority":1});var pkg="toast.filters.SparkWrittenToPage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var sliSparkJsHost="https:"==document.location.protocol?"https://":"http://";var fjs=document.getElementsByTagName("script")[0];var js=document.createElement("script");js.src=sliSparkJsHost+"b.sli-spark.com/sli-spark.js";fjs.parentNode.insertBefore(js,fjs);
var waitForSpark=function(){if(typeof SliSpark!=="undefined")cb();else setTimeout(waitForSpark,200)};waitForSpark()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"Not sale","pattern":"content/landing-pages/sale.htm","patternType":"CONTAINS","priority":6});var pkg="toast.filters.NotSale";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"PAUSED","priority":1});var pkg="toast.filters.PAUSED";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return document.cookie.indexOf("opentag_debug_tool")!==-1};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"NOT LIVE","priority":1});var pkg="toast.filters.NOTLIVE";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return false};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"upon successful Brochure Request","priority":1});var pkg="toast.filters.UponSuccessfulBrochureRequest";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return/toast\.co\.uk\/static\.htm\?id=catalogueorderthankyou&ContentFolderId=catalogues/i.test(document.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"Not 404 Page","priority":1});var pkg="toast.filters.Not404Page";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){if(document.getElementById("error-404-page")!==null)return true;else return false};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"/search/(1)","pattern":"/search/","patternType":"CONTAINS","priority":1});var pkg="toast.filters.Search1";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"checkout.htm","pattern":"checkout.htm","patternType":"CONTAINS","priority":10});var pkg="toast.filters.CheckoutHtm";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"only on Men Homepage","priority":1});var pkg="toast.filters.OnlyOnMenHomepage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return/toast\.co\.uk\/men\.htm((\?|#).*)?$/i.test(document.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Not checkout","priority":1});var pkg="toast.filters.NotCheckout";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForCheckoutPage=function(){if(!window.location.href.match("/checkout/"))cb();else setTimeout(waitForCheckoutPage,200)};waitForCheckoutPage()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var pkg="toast.filters.DefaultFilterMatchAll";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"upon successful Email SignUp(1)","priority":1});var pkg="toast.filters.UponSuccessfulEmailSignUp1";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){if(/toast\.co\.uk\/newsletter\.htm/i.test(document.location.href)){var waitForJqueryAndElements=function(){if(window.jQuery&&jQuery("#ctl00_globalMainContent_ddlAddresseeTitle option:selected").text().length!==0&&(jQuery("#ctl00_globalMainContent_txtLastName").length!==
0&&jQuery("#ctl00_globalMainContent_txtLastName").val().length!==0)&&(jQuery("#ctl00_globalMainContent_txtEmailAddress").length!==0&&jQuery("#ctl00_globalMainContent_txtEmailAddress").val().length!==0)&&jQuery("#ctl00_globalMainContent_btnCaptureEmailData").length!==0&&jQuery("#ctl00_globalMainContent_ddlCountries option:selected").text().length!==0){var tempFunction=function(){var __qbSub2UserSignedUp={};__qbSub2UserSignedUp.title=jQuery("#ctl00_globalMainContent_ddlAddresseeTitle option:selected").text();
__qbSub2UserSignedUp.lastName=jQuery("#ctl00_globalMainContent_txtLastName").val();__qbSub2UserSignedUp.email=jQuery("#ctl00_globalMainContent_txtEmailAddress").val();__qbSub2UserSignedUp.country=jQuery("#ctl00_globalMainContent_ddlCountries option:selected").text();__qbSub2UserSignedUp=JSON.stringify(__qbSub2UserSignedUp);window.localStorage.__qbSub2UserSignedUp=__qbSub2UserSignedUp;WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$globalMainContent$btnCaptureEmailData","",true,"",
"",false,true))};var jsToExecute=tempFunction.toString();var newSubmitHref="javascript: ("+jsToExecute+")()";jQuery("#ctl00_globalMainContent_btnCaptureEmailData").attr("href",newSubmitHref)}else setTimeout(waitForJqueryAndElements,100)};waitForJqueryAndElements()}else{window.__qbSub2UserSignedUp=JSON.parse(localStorage.__qbSub2UserSignedUp);delete localStorage.__qbSub2UserSignedUp;cb()}};filter.customScript=function(session){if(document.cookie.indexOf("opentag_debug_tool")===-1)return false;else if(/toast\.co\.uk\/newsletter\.htm/i.test(document.location.href)||
/toast\.co\.uk\/static\.htm\?id=emailsignupthankyou/i.test(document.location.href)&&window.localStorage&&localStorage.__qbSub2UserSignedUp)return true;return false};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Rule: Homepage","priority":1});var pkg="toast.filters.RuleHomepage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForUV=function(){var uv=window.universal_variable;if(!!(uv&&uv.page&&uv.page.type)){if(uv.page.type==="home")cb()}else setTimeout(waitForUV,50)};waitForUV()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"only in DEBUG mode","priority":1});var pkg="toast.filters.OnlyInDEBUGMode";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return document.cookie.indexOf("opentag_debug_tool")!==-1||/opentag_debug/i.test(window.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"upon successful Registration","priority":1});var pkg="toast.filters.UponSuccessfulRegistration";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForJqueryAndElements=function(){if(window.jQuery&&jQuery("#ctl00_globalMainContent_txtRegisterFirstName").length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLastName").length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLogonId").length!==
0&&jQuery("#ctl00_globalMainContent_txtRegisterFirstName").val().length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLastName").val().length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLogonId").val().length!==0)cb();else setTimeout(waitForJqueryAndElements,100)};waitForJqueryAndElements()};filter.customScript=function(session){return/signup\.htm\?returnUrl=\/account\.htm\?mode=myaccount&mode=$/i.test(document.referrer)&&/account\.htm\?mode=myaccount$/i.test(document.location.href)};filter.lexicalPattern=
""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Not 404","priority":1});var pkg="toast.filters.Not404";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitFor404Page=function(){if(window.jQuery&&window.jQuery(".page-404").length<1)cb();else setTimeout(waitFor404Page,200)};waitFor404Page()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Default filter: Match all(2)","pattern":"checkout.htm","patternType":"CONTAINS","priority":1});var pkg="toast.filters.DefaultFilterMatchAll2";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"/basket.htm","pattern":"/basket.htm","patternType":"CONTAINS","priority":11});var pkg="toast.filters.BasketHtm";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"All URLs(1)","priority":1});var pkg="toast.filters.AllURLs1";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"only on Women Homepage","priority":1});var pkg="toast.filters.OnlyOnWomenHomepage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return/toast\.co\.uk\/women\.htm((\?|#).*)?$/i.test(document.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Wait for smartRecs","priority":1});var pkg="toast.filters.WaitForSmartRecs";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForjQuery=function(){if(window.renderRecsBasket)cb();else setTimeout(waitForjQuery,200)};waitForjQuery()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"wait For Cat UV","priority":1});var pkg="toast.filters.WaitForCatUV";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForCatUV=function(){if(window.universal_variable&&universal_variable.page&&universal_variable.page.breadcrumb_string)cb();else setTimeout(waitForCatUV,100)};waitForCatUV()};filter.customScript=function(session){return true};filter.lexicalPattern=
""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"fire Forced EF or Standard EF","priority":1});var pkg="toast.filters.FireForcedEFOrStandardEF";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForJqueryAndDocument=function(){if(window.jQuery)jQuery(document).ready(function(){if(jQuery("#new-site-message").length!==0){jQuery("#new-site-message").parent().removeAttr("href");jQuery("#new-site-message").css("cursor","pointer").click(function(){window.__qbOnlyShowForcedEFbox=
true;jQuery("#new-site-message").hide();jQuery("#existing-site-message").show();cb()})}else cb()});else setTimeout(waitForJqueryAndDocument,100)};waitForJqueryAndDocument()};filter.customScript=function(session){return false};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"on Women Category pages","priority":1});var pkg="toast.filters.OnWomenCategoryPages";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return/toast\.co\.uk\/category\/[^men]/i.test(document.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Basket Page Filter","pattern":"/basket.htm","patternType":"CONTAINS","priority":1});var pkg="toast.filters.BasketPageFilter";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"View Wishlist","pattern":"/content/wishlist/view-wishlist.htm","patternType":"CONTAINS","priority":3});var pkg="toast.filters.ViewWishlist";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Match Wishlist","pattern":"/content/wishlist/wishlist.htm","patternType":"CONTAINS","priority":2});var pkg="toast.filters.MatchWishlist";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"/search/","pattern":"/search/","patternType":"CONTAINS","priority":7});var pkg="toast.filters.Search";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Product pages","pattern":"/product/","patternType":"CONTAINS","priority":1});var pkg="toast.filters.ProductPages";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"All pages but homepage","priority":12});var pkg="toast.filters.AllPagesButHomepage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForUV=function(){var uv=window.universal_variable;if(!!(uv&&uv.page&&typeof uv.page.type!="undefined")){if(uv.page.type!=="home")cb()}else setTimeout(waitForUV,50)};waitForUV()};filter.customScript=function(session){return true};
filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"On Catalogue Order Thank You Page","priority":1});var pkg="toast.filters.OnCatalogueOrderThankYouPage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var poll=function(){if(window.jQuery&&jQuery('#thankYouMessage h2:contains("Thank you for registering")').length>0&&jQuery("#registerSignUp").length>0)cb();else setTimeout(poll,100)};poll()};filter.customScript=function(session){return true};
filter.lexicalPattern=""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"only on landing pages","priority":1});var pkg="toast.filters.OnlyOnLandingPages";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return!/^(https?:\/\/)?(www\.)?toast\.co\.uk/i.test(document.referrer)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"/category/","pattern":"/category/","patternType":"CONTAINS","priority":8});var pkg="toast.filters.Category";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"waitForJquery and document ready","priority":1});var pkg="toast.filters.WaitForJqueryAndDocumentReady";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForjQuery=function(){if(window.jQuery)window.jQuery(cb);else setTimeout(waitForjQuery,200)};waitForjQuery()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"using qb_session","priority":1});var pkg="toast.filters.UsingQb_session";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){window.qb_session=session;return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"check for uv and wait for click","priority":1});var pkg="toast.filters.CheckForUvAndWaitForClick";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForjQuery=function(){if(window.jQuery&&window.universal_variable&&window.universal_variable.page&&window.universal_variable.page.type=="product"&&$("video").length>0)$("video").parent().click(cb);else setTimeout(waitForjQuery,
200)};waitForjQuery()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"Wishlist","pattern":"/content/wishlist/wishlist.htm","patternType":"CONTAINS","priority":4});var pkg="toast.filters.Wishlist";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"All URLs","priority":1});var pkg="toast.filters.AllURLs";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"/product/","pattern":"/product/","patternType":"CONTAINS","priority":9});var pkg="toast.filters.Product";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"upon successful Registration(1)","priority":1});var pkg="toast.filters.UponSuccessfulRegistration1";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForJqueryAndElements=function(){if(window.jQuery&&jQuery("#ctl00_globalMainContent_txtRegisterFirstName").length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLastName").length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLogonId").length!==
0&&jQuery("#ctl00_globalMainContent_txtRegisterFirstName").val().length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLastName").val().length!==0&&jQuery("#ctl00_globalMainContent_txtRegisterLogonId").val().length!==0)cb();else setTimeout(waitForJqueryAndElements,100)};waitForJqueryAndElements()};filter.customScript=function(session){return/signup\.htm\?returnUrl=\/account\.htm\?mode=myaccount&mode=$/i.test(document.referrer)&&/account\.htm\?mode=myaccount$/i.test(document.location.href)};filter.lexicalPattern=
""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"My Account Page","pattern":"account.htm","patternType":"CONTAINS","priority":1});var pkg="toast.filters.MyAccountPage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Halt if email signup fired","priority":1});var pkg="toast.filters.HaltIfEmailSignupFired";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){if(window.t018HasFired!==true)cb()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"wait for UV user_id","priority":1});var pkg="toast.filters.WaitForUVUser_id";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForUserID=function(){if(window.universal_variable&&universal_variable.user&&universal_variable.user.user_id)cb();else setTimeout(waitForUserID,100)};waitForUserID()};filter.customScript=function(session){return true};filter.lexicalPattern=
""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"wait for Transaction UV","priority":1});var pkg="toast.filters.WaitForTransactionUV";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForTransactionUV=function(){if(window.universal_variable&&universal_variable.transaction)cb();else setTimeout(waitForTransactionUV,100)};waitForTransactionUV()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Wait for form submit","priority":1});var pkg="toast.filters.WaitForFormSubmit";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var fired=false;var waitForThankYou=function(time){time=time||50;if(fired)return;var $=window.jQuery;if($&&$("#hamper-thankyou:visible").length){cb();fired=true}else setTimeout(function(){waitForThankYou(time*1.25)},time)};var waitForButton=
function(time){time=time||50;var $=window.jQuery;if($&&$("#hamper-signup-submit").length)$("#hamper-signup-submit").on("click",waitForThankYou);else setTimeout(function(){waitForButton(time*2)},time)};waitForButton()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"All URLs(3)","priority":1});var pkg="toast.filters.AllURLs3";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"wait for Product UV","priority":1});var pkg="toast.filters.WaitForProductUV";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForProductUV=function(){if(window.universal_variable&&universal_variable.product&&universal_variable.product.name)cb();else setTimeout(waitForProductUV,100)};waitForProductUV()};filter.customScript=function(session){return true};filter.lexicalPattern=
""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"upon successful Email SignUp","priority":1});var pkg="toast.filters.UponSuccessfulEmailSignUp";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return/toast\.co\.uk\/static\.htm\?id=emailsignupthankyou/i.test(document.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"wait for Category UV","priority":1});var pkg="toast.filters.WaitForCategoryUV";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForCatUV=function(){if(window.universal_variable&&universal_variable.page&&universal_variable.page.breadcrumb_string)cb();else setTimeout(waitForCatUV,100)};waitForCatUV()};filter.customScript=function(session){return true};filter.lexicalPattern=
""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Filter: on register page","priority":1});var pkg="toast.filters.FilterOnRegisterPage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForButton=function(){if($("#downloadPDF").length>0)$("#downloadPDF").click(cb);else setTimeout(waitForButton,200)};waitForButton()};filter.customScript=function(session){if(document.location.href.indexOf("/register.htm")>-1)return true};
filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Checkout login clicked","priority":1});var pkg="toast.filters.CheckoutLoginClicked";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForjQuery=function(){if(window.jQuery){if($("#checkoutMain").length>0&&typeof $("#checkoutMain .password").val()!=="undefined"&&$("#checkoutMain .password").val().length>0)$("#checkoutMain .loginButton").click(cb)}else setTimeout(waitForjQuery,200)};
waitForjQuery()};filter.customScript=function(session){return true};filter.lexicalPattern=""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Default filter: Match all(1)","pattern":"/category/","patternType":"CONTAINS","priority":1});var pkg="toast.filters.DefaultFilterMatchAll1";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"on user-just-logged-In page","priority":1});var pkg="toast.filters.OnUserJustLoggedInPage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return/^https:\/\/www\.toa.st\/account\.htm\?mode=myaccount/i.test(document.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"on Checkout/Confirmation page","pattern":"toast.co.uk/checkout.htm","patternType":"CONTAINS","priority":1});var pkg="toast.filters.OnCheckoutConfirmationPage";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Upon Successful Email SignUp(3)","priority":1});var pkg="toast.filters.UponSuccessfulEmailSignUp3";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){if(/toast\.co\.uk\/newsletter\.htm/i.test(document.location.href)){var waitForJqueryAndElements=function(){if(window.jQuery&&jQuery("#ctl00_globalMainContent_ddlAddresseeTitle option:selected").text().length!==0&&(jQuery("#ctl00_globalMainContent_txtLastName").length!==
0&&jQuery("#ctl00_globalMainContent_txtLastName").val().length!==0)&&(jQuery("#ctl00_globalMainContent_txtEmailAddress").length!==0&&jQuery("#ctl00_globalMainContent_txtEmailAddress").val().length!==0)&&jQuery("#ctl00_globalMainContent_btnCaptureEmailData").length!==0&&jQuery("#ctl00_globalMainContent_ddlCountries option:selected").text().length!==0){var tempFunction=function(){var __qbSub2UserSignedUp={};__qbSub2UserSignedUp.title=jQuery("#ctl00_globalMainContent_ddlAddresseeTitle option:selected").text();
__qbSub2UserSignedUp.lastName=jQuery("#ctl00_globalMainContent_txtLastName").val();__qbSub2UserSignedUp.email=jQuery("#ctl00_globalMainContent_txtEmailAddress").val();__qbSub2UserSignedUp.country=jQuery("#ctl00_globalMainContent_ddlCountries option:selected").text();__qbSub2UserSignedUp=JSON.stringify(__qbSub2UserSignedUp);window.localStorage.__qbSub2UserSignedUp=__qbSub2UserSignedUp;WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$globalMainContent$btnCaptureEmailData","",true,"",
"",false,true))};var jsToExecute=tempFunction.toString();var newSubmitHref="javascript: ("+jsToExecute+")()";jQuery("#ctl00_globalMainContent_btnCaptureEmailData").attr("href",newSubmitHref)}else setTimeout(waitForJqueryAndElements,100)};waitForJqueryAndElements()}else{window.__qbSub2UserSignedUp=JSON.parse(localStorage.__qbSub2UserSignedUp);delete localStorage.__qbSub2UserSignedUp;cb()}};filter.customScript=function(session){if(document.cookie.indexOf("opentag_debug_tool")===-1)return false;else if(/toast\.co\.uk\/newsletter\.htm/i.test(document.location.href)||
/toast\.co\.uk\/static\.htm\?id=emailsignupthankyou/i.test(document.location.href)&&window.localStorage&&localStorage.__qbSub2UserSignedUp)return true;return false};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Upon Successful Email SignUp(2)","priority":1});var pkg="toast.filters.UponSuccessfulEmailSignUp2";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){if(/toast\.co\.uk\/newsletter\.htm/i.test(document.location.href)){var waitForJqueryAndElements=function(){if(window.jQuery&&jQuery("#ctl00_globalMainContent_ddlAddresseeTitle option:selected").text().length!==0&&(jQuery("#ctl00_globalMainContent_txtLastName").length!==
0&&jQuery("#ctl00_globalMainContent_txtLastName").val().length!==0)&&(jQuery("#ctl00_globalMainContent_txtEmailAddress").length!==0&&jQuery("#ctl00_globalMainContent_txtEmailAddress").val().length!==0)&&jQuery("#ctl00_globalMainContent_btnCaptureEmailData").length!==0&&jQuery("#ctl00_globalMainContent_ddlCountries option:selected").text().length!==0){var tempFunction=function(){var __qbSub2UserSignedUp={};__qbSub2UserSignedUp.title=jQuery("#ctl00_globalMainContent_ddlAddresseeTitle option:selected").text();
__qbSub2UserSignedUp.lastName=jQuery("#ctl00_globalMainContent_txtLastName").val();__qbSub2UserSignedUp.email=jQuery("#ctl00_globalMainContent_txtEmailAddress").val();__qbSub2UserSignedUp.country=jQuery("#ctl00_globalMainContent_ddlCountries option:selected").text();__qbSub2UserSignedUp=JSON.stringify(__qbSub2UserSignedUp);window.localStorage.__qbSub2UserSignedUp=__qbSub2UserSignedUp;WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions("ctl00$globalMainContent$btnCaptureEmailData","",true,"",
"",false,true))};var jsToExecute=tempFunction.toString();var newSubmitHref="javascript: ("+jsToExecute+")()";jQuery("#ctl00_globalMainContent_btnCaptureEmailData").attr("href",newSubmitHref)}else setTimeout(waitForJqueryAndElements,100)};waitForJqueryAndElements()}else{window.__qbSub2UserSignedUp=JSON.parse(localStorage.__qbSub2UserSignedUp);delete localStorage.__qbSub2UserSignedUp;cb()}};filter.customScript=function(session){if(document.cookie.indexOf("opentag_debug_tool")===-1)return false;else if(/toast\.co\.uk\/newsletter\.htm/i.test(document.location.href)||
/toast\.co\.uk\/static\.htm\?id=emailsignupthankyou/i.test(document.location.href)&&window.localStorage&&localStorage.__qbSub2UserSignedUp)return true;return false};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Is 404 page","pattern":"404.htm","patternType":"CONTAINS","priority":1});var pkg="toast.filters.Is404Page";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Wait for uv.transaction","priority":1});var pkg="toast.filters.WaitForUvTransaction";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){var waitForUV=function(){var uv=window.universal_variable;if(uv&&uv.transaction)cb();else setTimeout(waitForUV,250)};if(document.location.href.indexOf("confirmation.htm")!==-1)waitForUV()};filter.customScript=function(session){return true};
filter.lexicalPattern=""})();(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"on Men Category pages","priority":1});var pkg="toast.filters.OnMenCategoryPages";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){cb()};filter.customScript=function(session){return/toast\.co\.uk\/category\/men/i.test(document.location.href)};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":false,"name":"Not editorial","pattern":"editorial.htm","patternType":"CONTAINS","priority":5});var pkg="toast.filters.NotEditorial";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=null;filter.customScript=null;filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.filter.Filter;var filter=new instance({"include":true,"name":"Only new users","priority":1});var pkg="toast.filters.OnlyNewUsers";qubit.Define.clientNamespace(pkg,filter);filter.customStarter=function(session,cb){$("#shippingMethodProceed").click(function(){pollForUv()});var pollForUv=function(){if(window.universal_variable&&window.universal_variable.user&&typeof window.universal_variable.user.returning!=="undefined"){if(window.universal_variable.user.returning===
false)cb()}else setTimeout(pollForUv,200)}};filter.customScript=function(session){return true};filter.lexicalPattern=""})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Conversion iframe","url":"","timeout":-1,"async":true,"oldVendorName":"Mediaplex","usesDocumentWrite":false,"templated":true,"name":"Mediaplex - Confirmation","disabled":true,"id":15245628,"oldLibraryTemplateId":"36168","locked":false,"locationObject":"BODY"});var pkg="toast.tags.mediaplexconfirmation.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n(function(){\n  var item_count \x3d 0;\n  for (var i\x3d0; i \x3c ${item_qtys}.length; i++){\n    item_count +\x3d ${item_qtys}[i];\n  }\n\n  var frame \x3d document.createElement("iframe");\n  var src \x3d "https://secure.img-cdn.mediaplex.com/0/${client_id}/universal.html?page_name\x3d${page_name}\x26${event_name}\x3d1\x26Currency\x3d${currency}\x26Quantity\x3d" + item_count + "\x26Amount\x3d${order_total}\x26mpuid\x3d${order_id}";\n  frame.src \x3d src;\n  frame.height \x3d 1;\n  frame.width \x3d 1;\n  frame.frameborder \x3d 0;\n  document.body.appendChild(frame);\n})();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.AllURLs2"]);tag.addClientVariablesMap({"item_qtys":"toast.variables.ItemQuantityList","page_name":"toast.variables.PageName9","event_name":"toast.variables.EventName8","currency":"toast.variables.Currency","order_total":"toast.variables.OrderTotal2","order_id":"toast.variables.OrderID","client_id":"toast.variables.MediaplexClientID"});tag.addParameters([{"name":"Mediaplex Client ID","description":null,"token":"client_id"},{"name":"Page Name","description":null,
"token":"page_name"},{"name":"Event Name","description":null,"token":"event_name"},{"name":"Currency","description":null,"token":"currency"},{"name":"Item Quantity List","description":null,"token":"item_qtys"},{"name":"Order Total","description":null,"token":"order_total"},{"name":"Order ID","description":null,"token":"order_id"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Conversion Pixel","url":"","timeout":-1,"async":true,"oldVendorName":"RocketFuel","usesDocumentWrite":false,"templated":true,"name":"RocketFuel - Confirmation Page","disabled":true,"id":14742826,"oldLibraryTemplateId":"36162","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rocketfuelconfirmationpage.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n  var img \x3d new Image();\n  img.src \x3d "//${campaign_id}p.rfihub.com/ca.gif?rb\x3d${merchant_id}\x26ca\x3d${campaign_id}\x26ra\x3d${random}\x26basket\x3d${order_total}";\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"random":"toast.variables.RandomNumber","order_total":"toast.variables.OrderTotal","merchant_id":"toast.variables.RocketFuelMerchantID","campaign_id":"toast.variables.RocketFuelCampaignID12"});
tag.addParameters([{"name":"RocketFuel Merchant ID","description":null,"token":"merchant_id"},{"name":"RocketFuel Campaign ID","description":null,"token":"campaign_id"},{"name":"Random Number","description":null,"token":"random"},{"name":"Order Total","description":null,"token":"order_total"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag","toast.tags.rocketfueluniversal.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"UV - download catalogue event","disabled":false,"id":20842333,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.uvdownloadcatalogueevent.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n  var sendUVEvent \x3d function(action, resend) {\n    window.universal_variable \x3d window.universal_variable || {};\n    universal_variable.events \x3d universal_variable.events || [];\n    universal_variable.events.push({\n      "category": "qubit-opentag",\n      "action": action\n    });\n    if (resend) {\n      window._qtd \x3d window._qtd || [];\n      window._qtd.push({\n        resendUniversalVariables: 1\n      });\n    }\n  };\n  sendUVEvent(\'register:catalogue:download\', false);\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.FilterOnRegisterPage"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"AKQA Conversion Pixel","disabled":true,"id":23862692,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.akqaconversionpixel.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  var deviceType \x3d function () {\n    var searchUA \x3d function (e) {\n      for (var t \x3d 0; t \x3c e.length; t++) {\n        var n \x3d e[t].string;\n        n \x3d n ? n : window.navigator.userAgent, n \x3d n.toLowerCase();\n        var i \x3d e[t].prop;\n        if (n) {\n          var r, o \x3d e[t].subString.split(",");\n          for (r \x3d 0; r \x3c o.length; r++) {\n            if (-1 !\x3d\x3d n.indexOf(o[r].toLowerCase())) {\n              return e[t].identity;\n            }\n          }\n        }\n        else if(i) {\n          return e[t].identity;\n        }\n      }\n    };\n    var dataBrowser \x3d [{\n      subString: "Slurp,Baiduspider,Googlebot,Seznam,masking-agent,CrOS",\n      identity: "unknown"\n    }, {\n      subString: "GoogleTV",\n      identity: "digital media receiver"\n    }, {\n      subString: "NintendoBrowser,PlayStation",\n      identity: "Game Console"\n    }, {\n      subString: "WOW64,IBIS,Macintosh,Linux i686,Windows NT,Linux Mint,Linux Next",\n      identity: "computer"\n    }, {\n      subString: "iPad,Opera,Tab,TouchPad,Nexus 7,Nexus 10,GT-N,Pad,GT-P,IdeaTab,SM-T,HP Slate,Xoom,Aurora-II,ME301T,A1-810,A1-811,NookHD,PMP5880D,QUANTUM7,Kindle Fire,SGP3,Nook HD,Transformer,AT300,COBALT,MOMO,Sweet M,ARCHOS,NOOK,NABI2,MZ60,Vega,Slider,MID7,KFTT,Streak,LePanII,HTC_Flyer,JRO03H,BNTV400,A500,KFTT Build,M805,POM727MC,cm_tenderloin",\n      identity: "tablet"\n    }, {\n      subString: "iPhone,iPod,iOS,IEMobile,Mobile,Opera Mobi",\n      identity: "mobile"\n    }, {\n      subString: "",\n      identity: "computer"\n    }];\n    return searchUA(dataBrowser) || "unknown";\n  };\n  if(deviceType() \x3d\x3d\x3d "mobile") {  \n    var cacheBuster \x3d (Math.random() + "").substr(2);\n    $(\'body\').append("\x3cimg src\x3d\'https://20572795p.rfihub.com/ca.gif?rb\x3d1429\x26ca\x3d20572795\x26ra\x3d" + cacheBuster + "\' height\x3d0 width\x3d0 style\x3d\'display:none\' alt\x3d\'Rocket Fuel\'/\x3e");\n  }\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag","toast.tags.rulejqueryexistsdocumentready.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule: Not checkout page","disabled":false,"id":46890409,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulenotcheckoutpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.NotCheckout"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Inspectlet","disabled":false,"id":27221157,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.inspectlet.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3c!-- Begin Inspectlet Embed Code --\x3e\n\x3cscript type\x3d\"text/javascript\" id\x3d\"inspectletjs\"\x3e\n\twindow.__insp \x3d window.__insp || [];\n\t__insp.push(['wid', 338975463]);\n\t(function() {\n\t\tfunction __ldinsp(){var insp \x3d document.createElement('script'); insp.type \x3d 'text/javascript'; insp.async \x3d true; insp.id \x3d \"inspsync\"; insp.src \x3d ('https:' \x3d\x3d document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x \x3d document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); }\n\t\tif (window.attachEvent){\n\t\t\twindow.attachEvent('onload', __ldinsp);\n\t\t}else{\n\t\t\twindow.addEventListener('load', __ldinsp, false);\n\t\t}\n\t})();\n\x3c/script\x3e\n\x3c!-- End Inspectlet Embed Code --\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MGM - Purchase","disabled":false,"id":49564855,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.mgmpurchase.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n  var userEmail \x3d window.universal_variable.user.email;\n  \n    var subscribeParams \x3d {\n        method: '/user/getProfileByEmail',\n        queryNames: ['email'],\n        queryValues: [userEmail],\n        attributeValues: null,\n        attributeNames: null,\n        httpVerb: 'get'\n    };\n    $.ajax({\n        url: '/services/ecrelay.asmx/Relay',\n        type: 'POST',\n        contentType: \"application/json; charset\x3dutf-8\",\n        data: JSON.stringify(subscribeParams),\n        dataType: 'json',\n        success: function(data, status) {\n            try { var thisData \x3d $.parseJSON(data.d); } catch(e) {}\n            if (typeof thisData !\x3d\x3d \"undefined\" ) {\n                var i \x3d 0;\n                var results \x3d thisData.result;\n                var resultsLength \x3d results.length;\n                for(i;i\x3cresultsLength;i++) {\n                    var thisResult \x3d results[i];\n                    if (thisResult.name \x3d\x3d\x3d \"user.CustomAttribute.mgm15_recommender\") {\n                        var recommenderEmail \x3d thisResult.value;\n                        var loading, callback \x3d null;\n                        var attributes \x3d [\n                            {\n                                name: \"Email\",\n                                value: recommenderEmail\n                            },\n                            {\n                                name: \"user.CustomAttribute.RealTime\",\n                                value: true\n                            }\n                        ];\n                        teradata.subscribeByEmail(recommenderEmail, attributes, loading, callback, 750431216);\n                    }\n                }\n            }\n        }\n    });\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag","toast.tags.rulejqueryexistsdocumentready.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Standard iframe","url":"","timeout":-1,"async":true,"oldVendorName":"Mediaplex","usesDocumentWrite":false,"templated":true,"name":"Mediaplex - Login Page","disabled":true,"id":15219560,"oldLibraryTemplateId":"36163","locked":false,"locationObject":"BODY"});var pkg="toast.tags.mediaplexloginpage.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n(function(){\n\n  var frame \x3d document.createElement("iframe");\n  var src \x3d (document.location.protocol \x3d\x3d\x3d "https:") ? "https://secure." : "http://";\n  src \x3d src + "img-cdn.mediaplex.com/0/${client_id}/universal.html?page_name\x3d${page_name}\x26${event_name}\x3d1\x26mpuid\x3d";\n  frame.src \x3d src;\n  frame.height \x3d 1;\n  frame.width \x3d 1;\n  frame.frameborder \x3d 0;\n  document.body.appendChild(frame);\n\n})();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.WaitForUVUser_id"]);tag.addClientVariablesMap({"page_name":"toast.variables.PageName8","event_name":"toast.variables.EventName","client_id":"toast.variables.MediaplexClientID"});tag.addParameters([{"name":"Mediaplex Client ID","description":null,"token":"client_id"},{"name":"Page Name","description":null,"token":"page_name"},{"name":"Event Name","description":null,"token":"event_name"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleloggedinpage.Tag"]);
tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule : new user","disabled":false,"id":19151869,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulenewuser.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.OnlyNewUsers"]);tag.addClientVariablesMap({});
tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":true,"name":"Coast - Floodlight Tag for Sales","disabled":false,"id":31890477,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastfloodlighttagforsales.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3c!-- Tag for Activity Group: Sales, Activity Name: Sales, Activity ID: 2031450 --\x3e\n\x3c!-- Expected URL: http://www.toa.st/checkout/thankyou --\x3e\n\n\x3c!--\n  Activity ID: 2031450\n  Activity Name: Sales\n  Activity Group Name: Sales\n--\x3e\n\n\x3c!--\nStart of DoubleClick Floodlight Tag: Please do not remove Activity name of this tag: Sales URL of the webpage where the tag is expected to be placed: https://www.toa.st/checkout/thankyou\nThis tag must be placed between the \x3cbody\x3e and \x3c/body\x3e tags, as close as possible to the opening tag.\nCreation Date: 01/20/2015\n--\x3e\n\x3ciframe src\x3d"https://4598365.fls.doubleclick.net/activityi;src\x3d4598365;type\x3dsale;cat\x3dsales0;qty\x3d1;cost\x3d${OrderTotal};ord\x3d${OrderID}?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/iframe\x3e\n\x3c!-- End of DoubleClick Floodlight Tag: Please do not remove --\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"OrderID":"toast.variables.TransactionOrderId","OrderTotal":"toast.variables.TransactionOrderTotal"});tag.addParameters([{"name":"Transaction Order Id","description":null,"token":"OrderID"},{"name":"Transaction Total","description":null,"token":"OrderTotal"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=
function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"Rule - Landing Page","disabled":false,"id":14929657,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulelandingpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.OnlyOnLandingPages"]);tag.addClientVariablesMap({});
tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":true,"name":"Coast - Existing User Login (My Account)","disabled":false,"id":37880821,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastexistinguserloginmyaccount.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n  var axel \x3d Math.random() + \"\";\n  var a \x3d axel * 10000000000000;\n  var isDevice \x3d (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|ios|mobile|opera mobi|opera|tab|touchpad|nexus 7|nexus 10|gt-n|pad|gt-p|ideatab|sm-t|hp slate|xoom|aurora-ii|me301t|a1-810|a1-811|nookhd|pmp5880d|quantum7|kindle fire|sgp3|nook hd|transformer|at300|cobalt|momo|sweet m|archos|nook|nabi2|mz60|vega|slider|mid7|kftt|streak|lepanii|htc_flyer|jro03h|bntv400|a500|kftt build|m805|pom727mc|cm_tenderloin/i.test(navigator.userAgent.toLowerCase()));\n  \n  if (isDevice) {\n    document.write(\"\x3cimg src\x3d'https://20661601p.rfihub.com/ca.gif?rb\x3d1429\x26ca\x3d20661601\x26ra\x3d\"+a+\"' height\x3d0 width\x3d0 style\x3d'display:none' alt\x3d'Rocket Fuel'/\x3e\");\n  } else {\n    //document.write(\"\x3cimg src\x3d'https://20661603p.rfihub.com/ca.gif?rb\x3d1429\x26ca\x3d20661603\x26ra\x3d\"+a+\"' height\x3d0 width\x3d0 style\x3d'display:none' alt\x3d'Rocket Fuel'/\x3e\");\n  }\n\x3c/script\x3e\n\n\x3cscript\x3e\n  window._struqPI \x3d window._struqPI || [];\n  _struqPI.push(['injectTrackingPixel', { trackingPixelId: 'MZbH1TGFFk2GEoZY-WxOyQ', route: '/s/ga/', collectData: false, options: { timeoutMs: 2000, firstPartyDomain: '', firstPartyUid: '' }}]);\n  (function() {\n    var struq \x3d document.createElement('script'); struq.type \x3d 'text/javascript'; struq.async \x3d true;\n    struq.src \x3d ('https:' \x3d\x3d document.location.protocol ? 'https://' : 'http://') + 'maxcdn.quantserve.com/content/scripts/Struq_Pixel_Injector_min_v1-17.js';\n    var s \x3d document.getElementsByTagName('head')[0].appendChild(struq);\n  })();\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.MyAccountPage"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"SLI - Confirmation","disabled":false,"id":53362528,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.sliconfirmation.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3c!--\x3cscript type\x3d"text/javascript"\x3e\n  /*var sliSparkJsHost \x3d (("https:" \x3d\x3d document.location.protocol) ? "https://" : "http://");\n  var fjs \x3d document.getElementsByTagName("script")[0];\n  var js \x3d document.createElement("script");\n  js.src \x3d sliSparkJsHost + "b.sli-spark.com/sli-spark.js";\n  fjs.parentNode.insertBefore(js, fjs);*/\n\x3c/script\x3e--\x3e\n\n\x3cscript language\x3d"javascript" type\x3d"text/javascript"\x3e\n  var spark \x3d new SliSpark("2277", "1");\n  var trans \x3d universal_variable.transaction;\n  var user \x3d universal_variable.user;\n  spark.setPageType("checkout-confirmation");\n  spark.addTransaction(trans.order_id,user.username,trans.total,trans.shipping_cost,0);\n  var items \x3d trans.line_items;\n  var i \x3d 0;\n  for(i;i\x3citems.length;i++){\n    var thisItem \x3d items[i];\n    spark.addItem(thisItem.product.id, thisItem.quantity, thisItem.subtotal);\n  }\n  spark.writeTrackCode();\n  spark.writeTransactionCode();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll","toast.filters.SparkWrittenToPage"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"AKQA srtk.net - Email SignUp","disabled":true,"id":17436154,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.akqasrtknetemailsignup.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cimg src\x3d'https://s0.srtk.net/www/delivery/ti.php?trackerid\x3d1369\x26cb\x3d1677815843\x26sr_actiontype\x3demail\x26sr_actionid\x3d0' width\x3d'1' height\x3d'1' border\x3d'0'/\x3e/\x3e\n\n\x3c!-- Begin New Default  Action Tag --\x3e\n\x3cimg src\x3d'//a.srpx.net/sst?srtid\x3d5c0fb0305680b4v2\x26_srrt\x3dact\x26_srst\x3ddac\x26_sr_actiontype\x3demail\x26sr_actionid\x3d0' width\x3d'1' height\x3d'1' border\x3d'0' /\x3e\n\x3c!-- End New Default  Tag --\x3e";
tag.addClientFiltersList(["toast.filters.OnEmailSignUpThankYouPage"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":5E3,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: Basket Page","disabled":false,"id":13954361,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulebasketpage.Tag";qubit.Define.clientNamespace(pkg,tag);
tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.BasketPageFilter"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"dtxtngytz5im1.cloudfront.net/qtracker-v3-min.js","timeout":-1,"async":true,"usesDocumentWrite":false,"prePostWindowScope":true,"name":"QuBit QTracker","disabled":false,"id":12504907,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.qubitqtracker.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="";tag.addClientFiltersList([]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.qubituvbreadcrumbconverter.Tag"]);tag.pre=function(){window._qtd=window._qtd||[];window._qtd.push({options:{domain:".toa.st",serverUrl:"pong.qubitproducts.com/t2",clientId:"toast_new"}})};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Home Page","url":"","timeout":-1,"async":true,"oldVendorName":"RocketFuel","usesDocumentWrite":false,"templated":true,"name":"RocketFuel - Homepage - Women","disabled":true,"id":14742320,"oldLibraryTemplateId":"36160","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rocketfuelhomepagewomen.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n  var img \x3d new Image();\n  img.src \x3d "//${campaign_id}p.rfihub.com/ca.gif?rb\x3d${merchant_id}\x26ca\x3d${campaign_id}\x26ra\x3d${random}"\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.OnlyOnWomenHomepage"]);tag.addClientVariablesMap({"random":"toast.variables.RandomNumber","merchant_id":"toast.variables.RocketFuelMerchantID","campaign_id":"toast.variables.RocketFuelCampaignID8"});tag.addParameters([{"name":"RocketFuel Merchant ID","description":null,
"token":"merchant_id"},{"name":"RocketFuel Campaign ID","description":null,"token":"campaign_id"},{"name":"Random Number","description":null,"token":"random"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rocketfueluniversal.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Coast - New User Checkout","disabled":false,"id":49592961,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastnewusercheckout.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n  window._struqPI \x3d window._struqPI || [];\n  _struqPI.push(['injectTrackingPixel', { trackingPixelId: '3ktokcyBQE6Jl-AFRyjKxQ', route: '/s/ga/', collectData: false, options: { timeoutMs: 2000, firstPartyDomain: '', firstPartyUid: '' }}]);\n  (function() {\n    var struq \x3d document.createElement('script'); struq.type \x3d 'text/javascript'; struq.async \x3d true;\n    struq.src \x3d ('https:' \x3d\x3d document.location.protocol ? 'https://' : 'http://') + 'maxcdn.quantserve.com/content/scripts/Struq_Pixel_Injector_min_v1-17.js';\n    var s \x3d document.getElementsByTagName('head')[0].appendChild(struq);\n  })();\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag","toast.tags.rulenewuser.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule: Confirmation Page","disabled":false,"id":14357313,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.ruleconfirmationpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.WaitForUvTransaction"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Home Page","url":"","timeout":-1,"async":true,"oldVendorName":"RocketFuel","usesDocumentWrite":false,"templated":true,"name":"RocketFuel - Brochure Request","disabled":true,"id":14742801,"oldLibraryTemplateId":"36160","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rocketfuelbrochurerequest.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n  var img \x3d new Image();\n  img.src \x3d "//${campaign_id}p.rfihub.com/ca.gif?rb\x3d${merchant_id}\x26ca\x3d${campaign_id}\x26ra\x3d${random}"\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.UponSuccessfulBrochureRequest"]);tag.addClientVariablesMap({"random":"toast.variables.RandomNumber","merchant_id":"toast.variables.RocketFuelMerchantID","campaign_id":"toast.variables.RocketFuelCampaignID"});tag.addParameters([{"name":"RocketFuel Merchant ID",
"description":null,"token":"merchant_id"},{"name":"RocketFuel Campaign ID","description":null,"token":"campaign_id"},{"name":"Random Number","description":null,"token":"random"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rocketfueluniversal.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Home Page","url":"","timeout":-1,"async":true,"oldVendorName":"RocketFuel","usesDocumentWrite":false,"templated":true,"name":"RocketFuel - Email SignUp","disabled":true,"id":14742811,"oldLibraryTemplateId":"36160","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rocketfuelemailsignup.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n  var img \x3d new Image();\n  img.src \x3d "//${campaign_id}p.rfihub.com/ca.gif?rb\x3d${merchant_id}\x26ca\x3d${campaign_id}\x26ra\x3d${random}"\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.UponSuccessfulEmailSignUp"]);tag.addClientVariablesMap({"random":"toast.variables.RandomNumber","merchant_id":"toast.variables.RocketFuelMerchantID","campaign_id":"toast.variables.RocketFuelCampaignID11"});tag.addParameters([{"name":"RocketFuel Merchant ID",
"description":null,"token":"merchant_id"},{"name":"RocketFuel Campaign ID","description":null,"token":"campaign_id"},{"name":"Random Number","description":null,"token":"random"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rocketfueluniversal.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":-1,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: Search Results","disabled":false,"id":13957441,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulesearchresults.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.Search1"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"Rule: Category Women","disabled":false,"id":15218657,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulecategorywomen.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.OnWomenCategoryPages"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"dd6zx4ibq538k.cloudfront.net/smartserve-2763.js","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"Qubit Deliver","disabled":false,"id":12841175,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.qubitdeliver.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="";tag.addClientFiltersList(["toast.filters.UsingQb_session"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.qubituvbreadcrumbconverter.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"AKQA srtk.net - Landing Page","disabled":true,"id":14929155,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.akqasrtknetlandingpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cimg src\x3d'https://s0.srtk.net/www/delivery/ti.php?trackerid\x3d1369' width\x3d'1' height\x3d'1' border\x3d'0' /\x3e";
tag.addClientFiltersList([]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulelandingpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule: Wishlist page","disabled":false,"id":30649487,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulewishlistpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.MatchWishlist",
"toast.filters.MatchViewWishlist"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"eCircle Nursery Programme Trigger -","disabled":false,"id":19151856,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.ecirclenurseryprogrammetrigger.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n(function()\n{\n  var subscribeToLastOrderGroup \x3d function() {\n    var subscribeParams \x3d {\n      method: '/membership/subscribeByEmail',\n      queryNames: ['email', 'groupId', 'subscriptionMode'],\n      queryValues: [window.universal_variable.user.email, 750173210, 'OPT_IN'],\n      attributeValues: null,\n      attributeNames: null,\n      httpVerb: 'POST'\n    };\n    $.ajax({\n      url: '/services/ecrelay.asmx/Relay',\n      type: 'POST',\n      contentType: \"application/json; charset\x3dutf-8\",\n      data: JSON.stringify(subscribeParams),\n      dataType: 'json',\n      success: function (data, status) {\n        window.nurseryComplete \x3d true;\n      }\n    });\n  };\n  var pollForUv \x3d function()\n  {\n     if(window.jQuery \x26\x26\n        window.universal_variable \x26\x26\n        universal_variable.user \x26\x26\n        universal_variable.user.name \x26\x26\n        universal_variable.user.email)\n     {\n       var uv \x3d window.universal_variable;\n       var lastspace \x3d uv.user.name.lastIndexOf(' ');\n       var firstName \x3d uv.user.name.substring(0, lastspace);\n       var lastName \x3d uv.user.name.substring(lastspace+1);\n       var dateStamp \x3d new Date().toISOString();\n       var newUser \x3d uv.user.returning;\n       var emailSignUp \x3d uv.transaction.email_signup;\n       // check if the newsletter sign up is checked.\n       if(emailSignUp \x3d\x3d\x3d true) {\n         // Do Call to create user based on email and user details\n         console.log(\"Email Sign Up\");\n         var params \x3d {\n           method: '/user/create',\n           queryNames: ['email'],\n           queryValues: [uv.user.email],\n           attributeValues: [firstName, lastName, true, true, uv.user.email, dateStamp, dateStamp, true, uv.transaction.order_id, true],\n           attributeNames: [\"FirstName\", \"LastName\", \"DispatchEmailReceived\", \"NewsletterOptIn\", \"Email\", \"FirstOrderDate\", \"LatestOrder\", \"NurseryProgramme\", \"LatestOrderNumber\", \"user.CustomAttribute.RealTime\"],\n           httpVerb: 'post'\n         };\n         $.ajax({\n           url: '/services/ecrelay.asmx/Relay',\n           type: 'POST',\n           contentType: \"application/json; charset\x3dutf-8\",\n           data: JSON.stringify(params),\n           dataType: 'json',\n           success: function (data, status) {\n             // If user already exists update the profile to have LastOrder Date  \n             if(data.d.indexOf(\"OBJECT_ALREADY_EXISTS\") \x3e 0) {\n               console.log(\"Existing user\");\n               var dateStampParams \x3d {\n                 method: '/user/updateProfileByEmail',\n                 queryNames: ['email'],\n                 queryValues: [universal_variable.user.email],\n                 attributeValues: [firstName, lastName, dateStamp, true, uv.transaction.order_id, true],\n                 attributeNames: [\"FirstName\", \"LastName\", \"LatestOrder\", \"NewsletterOptIn\", \"LatestOrderNumber\", \"user.CustomAttribute.RealTime\"],\n                 httpVerb: 'post'\n               };       \n               $.ajax({\n                 url: '/services/ecrelay.asmx/Relay',\n                 type: 'POST',\n                 contentType: \"application/json; charset\x3dutf-8\",\n                 data: JSON.stringify(dateStampParams),\n                 dataType: 'json',\n                 success: function (data, status) {\n                   // Always subscribe to last order group.\n                   subscribeToLastOrderGroup();\n                 }\n               });\n               // Also subscribe to date stamp group\n             }\n             else {\n               console.log(\"New user - Subbed to nursery\");\n               // Subscribe to nursery group\n               var subscribeParams \x3d {\n                 method: '/membership/subscribeByEmail',\n                 queryNames: ['email', 'groupId', 'subscriptionMode'],\n                 queryValues: [uv.user.email, 750148124, 'OPT_IN'],\n                 attributeValues: null,\n                 attributeNames: null,\n                 httpVerb: 'POST'\n               };\n               $.ajax({\n                 url: '/services/ecrelay.asmx/Relay',\n                 type: 'POST',\n                 contentType: \"application/json; charset\x3dutf-8\",\n                 data: JSON.stringify(subscribeParams),\n                 dataType: 'json',\n                 success: function (data, status) {\n                   // Always subscribe to last order group.\n                   subscribeToLastOrderGroup();\n                 }\n               });\n             }\n           }\n         });\n       }\n       // If the user didn't check the opt in box try to update their profile\n       else {\n         console.log(\"NOT Email Sign Up\");\n         var dateStampParams \x3d {\n           method: '/user/updateProfileByEmail',\n           queryNames: ['email'],\n           queryValues: [universal_variable.user.email],\n           attributeValues: [firstName, lastName, dateStamp, uv.transaction.order_id],\n           attributeNames: [\"FirstName\", \"LastName\", \"LatestOrder\", \"LatestOrderNumber\"],\n           httpVerb: 'post'\n         };       \n         $.ajax({\n           url: '/services/ecrelay.asmx/Relay',\n           type: 'POST',\n           contentType: \"application/json; charset\x3dutf-8\",\n           data: JSON.stringify(dateStampParams),\n           dataType: 'json',\n           success: function (data, status) {\n             // If they don't exist, create the user\n             if(data.d.indexOf('NO_SUCH_OBJECT') \x3e 0) {\n             \tconsole.log(\"NOT e-mail signup - new user\");\n               var params \x3d {\n                 method: '/user/create',\n                 queryNames: ['email'],\n                 queryValues: [uv.user.email],\n                 attributeValues: [firstName, lastName, uv.user.email, dateStamp, dateStamp, uv.transaction.order_id],\n                 attributeNames: [\"FirstName\", \"LastName\", \"Email\", \"FirstOrderDate\", \"LatestOrder\", \"LatestOrderNumber\"],\n                 httpVerb: 'post'\n               };\n               $.ajax({\n                 url: '/services/ecrelay.asmx/Relay',\n                 type: 'POST',\n                 contentType: \"application/json; charset\x3dutf-8\",\n                 data: JSON.stringify(params),\n                 dataType: 'json',\n                 success: function (data, status) {\n                   // Always finally subscribe them to the last order date group\n                   subscribeToLastOrderGroup();\n                 }\n               });\n             }\n             else {\n               console.log(\"NOT e-mail sign up - existing user\");\n             \t// If the update worked then subscribe to last order date group\n             \tsubscribeToLastOrderGroup();\n             }\n           }\n         });\n       }\n     }\n     else \n     {\n       setTimeout(pollForUv, 200);\n     }\n  };\n     \n  pollForUv(); \n})();\n\x3c/script\x3e";
tag.addClientFiltersList([]);tag.addClientVariablesMap({"emailaddr":"toast.variables.UserEmail"});tag.addParameters([{"name":"emailaddr","description":null,"token":"emailaddr"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag","toast.tags.rulejqueryexistsdocumentready.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"AKQA srtk.net - Confirmation Page","disabled":true,"id":15215085,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.akqasrtknetconfirmationpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n(function ()\n{\n  var sourceString \x3d 'https://s0.srtk.net/www/delivery/ti.php?trackerid\x3d1368';\n  sourceString +\x3d '\x26_sr_amount\x3d${order_subtotal}';\n  sourceString +\x3d '\x26_sr_orderid\x3d${order_id}';\n  sourceString +\x3d '\x26_total_quantity\x3d${order_quantity}';\n  sourceString +\x3d '\x26_men_revenue\x3d${men_revenue}';\n  sourceString +\x3d '\x26_women_revenue\x3d${women_revenue}';\n  sourceString +\x3d '\x26_men_quantity\x3d${men_quantity}';\n  sourceString +\x3d '\x26_women_quantity\x3d${women_quantity}';\n  sourceString +\x3d '\x26_full_price\x3d${full_price}';  \n  sourceString +\x3d '\x26_sale_price\x3d${sale_price}';\n  sourceString +\x3d '\x26_news_signup\x3d${news_signup}';\n  sourceString +\x3d '\x26_cat_request\x3d${cat_request}';\n  sourceString +\x3d '\x26_cat_download\x3d${cat_download}';\n  sourceString +\x3d '\x26_AOV\x3d${aov}';\n  sourceString +\x3d '\x26_UPT\x3d${upt}';\n  sourceString +\x3d '\x26_COS\x3d${cos}';\n  var img \x3d new Image();\n  img.src \x3d sourceString;  \n})();\n\x3c/script\x3e\n\n\x3c!-- Begin New Default  Conversion Tag --\x3e\n\x3cimg src\x3d'//a.srpx.net/sst?srtid\x3d5c0fb0305680b4v2\x26_srrt\x3dcvn\x26_srst\x3ddcn\x26_sr_cat_download\x3d${cat_download}\x26_sr_UPT\x3d${upt}\x26_sr_orderid\x3d${order_id}\x26_sr_cat_request\x3d${cat_request}\x26_sr_women_revenue\x3d${women_revenue}\x26_sr_news_signup\x3d${news_signup}\x26_sr_men_revenue\x3d${men_revenue}\x26_sr_women_quantity\x3d${women_quantity}\x26_sr_total_quantity\x3d${order_quantity}\x26_sr_AOV\x3d${aov}\x26_sr_full_price\x3d${full_price}\x26_sr_men_quantity\x3d${men_quantity}\x26_sr_sale_price\x3d${sale_price}\x26_sr_COS\x3d${cos}\x26_sr_amount\x3d${order_subtotal}' width\x3d'1' height\x3d'1' border\x3d'0' /\x3e\n\x3c!-- End New Default  Tag --\x3e";
tag.addClientFiltersList(["toast.filters.WaitForTransactionUV"]);tag.addClientVariablesMap({"cat_request":"toast.variables.CatalogueRequest","cos":"toast.variables.COS","aov":"toast.variables.AOV","men_revenue":"toast.variables.MenRevenue","sale_price":"toast.variables.SalePrices","men_quantity":"toast.variables.MenQuantity","women_quantity":"toast.variables.WomenQuantity","cat_download":"toast.variables.CatalogueDownload","women_revenue":"toast.variables.WomenRevenue","order_quantity":"toast.variables.OrderQuantity",
"upt":"toast.variables.UPT","order_subtotal":"toast.variables.TransactionOrderSubTotal","full_price":"toast.variables.FullPrices","order_id":"toast.variables.TransactionOrderId","news_signup":"toast.variables.NewsSignUp"});tag.addParameters([{"defaultValue":"not available","name":"Order Quantity","description":null,"token":"order_quantity"},{"defaultValue":"not available","name":"Men Revenue","description":null,"token":"men_revenue"},{"defaultValue":"not available","name":"Women Revenue","description":null,
"token":"women_revenue"},{"defaultValue":"not available","name":"Men Quantity","description":null,"token":"men_quantity"},{"defaultValue":"not available","name":"Women Quantity","description":null,"token":"women_quantity"},{"defaultValue":"not available","name":"News SignUp","description":null,"token":"news_signup"},{"defaultValue":"not available","name":"Catalogue Request","description":null,"token":"cat_request"},{"defaultValue":"not available","name":"Catalogue Download","description":null,"token":"cat_download"},
{"defaultValue":"not available","name":"AOV","description":null,"token":"aov"},{"defaultValue":"not available","name":"UPT","description":null,"token":"upt"},{"defaultValue":"not available","name":"COS","description":null,"token":"cos"},{"defaultValue":"not available","name":"Full Prices","description":null,"token":"full_price"},{"defaultValue":"not available","name":"Sale Prices","description":null,"token":"sale_price"},{"defaultValue":"not available","name":"Order SubTotal","description":null,"token":"order_subtotal"},
{"defaultValue":"not available","name":"Order ID","description":null,"token":"order_id"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Home Page","url":"","timeout":-1,"async":true,"oldVendorName":"RocketFuel","usesDocumentWrite":false,"templated":true,"name":"Rocketfuel - Homepage","disabled":true,"id":14742343,"oldLibraryTemplateId":"36160","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rocketfuelhomepage.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n  var img \x3d new Image();\n  img.src \x3d "//${campaign_id}p.rfihub.com/ca.gif?rb\x3d${merchant_id}\x26ca\x3d${campaign_id}\x26ra\x3d${random}"\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"random":"toast.variables.RandomNumber","merchant_id":"toast.variables.RocketFuelMerchantID","campaign_id":"toast.variables.RocketFuelCampaignID10"});tag.addParameters([{"name":"RocketFuel Merchant ID","description":null,
"token":"merchant_id"},{"name":"RocketFuel Campaign ID","description":null,"token":"campaign_id"},{"name":"Random Number","description":null,"token":"random"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulehomepage.Tag","toast.tags.rocketfueluniversal.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"oldLibraryTemplateName":'Sub2 - Confirmation Page (depends upon "Sub2 - Main Script - All pages")',"url":"","timeout":5E3,"async":true,"oldVendorName":"Sub2","usesDocumentWrite":false,"templated":true,"name":"Sub2 - Confirmation - Updated","disabled":false,"id":16870218,"oldLibraryTemplateId":"39676","locked":false,"locationObject":"HEAD"});var pkg=
"toast.tags.sub2confirmationupdated.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n\n(function ()\n{\n  var ii \x3d 0;\n  var waitForConfirmationScripts \x3dfunction ()\n  {\n    if ((typeof S2Tech_addOrder \x3d\x3d\x3d \'function\') \x26\x26 (typeof S2Tech_addItem \x3d\x3d\x3d \'function\') \x26\x26 (typeof S2Tech_MatchData_NA \x3d\x3d\x3d \'function\'))\n    {\n      S2Tech_addOrder("${orderId}", "${affiliation}", "${total}", "${tax}", "${shipping}", "${city}", "${county}", "${country}");\n\n      for (var i \x3d 0; i \x3c ${product_id}.length; i++)\n      {\n        S2Tech_addItem("${orderId}", ${sku}[i], ${product_name}[i], ${category_unit}[i], ${unit_price}[i], ${quantity}[i]);\n      }\n      \n      S2Tech_MatchData_NA("${title}", "${forename}", "${lastname}", "${address1}", "${address2}", "${address3}", "${address4}", "${postcode}", "${email}", "${landline}",\u00a0"${mobile}",\u00a0"${optins}");\n    }\n    else if (ii \x3c 50)\n    {\n       ii++;\n       setTimeout(waitForConfirmationScripts, 100);\n    }\n  };\n\n  waitForConfirmationScripts();\n\n})();\n\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"country":"toast.variables.Country4","orderId":"toast.variables.OrderID","city":"toast.variables.City","county":"toast.variables.County","title":"toast.variables.Title","forename":"toast.variables.Forename","optins":"toast.variables.OptIns4","total":"toast.variables.OrderTotalExcludingShippingCost","shipping":"toast.variables.ShippingCost","affiliation":"toast.variables.Affiliation","category_unit":"toast.variables.ListOfProductCategories",
"product_id":"toast.variables.ListOfProductIDs3","address4":"toast.variables.Address42","sku":"toast.variables.ListOfProductSKUs3","email":"toast.variables.Email5","quantity":"toast.variables.ListOfProductQuantities3","address3":"toast.variables.Address3","address2":"toast.variables.Address22","address1":"toast.variables.Address12","postcode":"toast.variables.Postcode","mobile":"toast.variables.Mobile","tax":"toast.variables.OrderTax","unit_price":"toast.variables.ListOfProductPrices","product_name":"toast.variables.ListOfProductNames3",
"lastname":"toast.variables.LastName","landline":"toast.variables.Landline"});tag.addParameters([{"name":"Order ID","description":null,"token":"orderId"},{"name":"Affiliation","description":null,"token":"affiliation"},{"name":"Order Total excluding Shipping Cost","description":null,"token":"total"},{"name":"Order Tax","description":null,"token":"tax"},{"name":"Shipping Cost","description":null,"token":"shipping"},{"name":"City","description":null,"token":"city"},{"name":"County","description":null,
"token":"county"},{"name":"Country","description":null,"token":"country"},{"name":"List of Product IDs","description":null,"token":"product_id"},{"name":"List of Product Names","description":null,"token":"product_name"},{"name":"List of Product Categories","description":null,"token":"category_unit"},{"name":"List of Product Prices","description":null,"token":"unit_price"},{"name":"List of Product Quantities","description":null,"token":"quantity"},{"name":"List of Product SKUs","description":null,
"token":"sku"},{"name":"Title","description":null,"token":"title"},{"name":"Forename","description":null,"token":"forename"},{"name":"Last Name","description":null,"token":"lastname"},{"name":"Address 1","description":null,"token":"address1"},{"name":"Address 2","description":null,"token":"address2"},{"name":"Address 3","description":null,"token":"address3"},{"name":"Address 4","description":null,"token":"address4"},{"name":"Postcode","description":null,"token":"postcode"},{"name":"Email","description":null,
"token":"email"},{"name":"Landline","description":null,"token":"landline"},{"name":"Mobile","description":null,"token":"mobile"},{"name":"OptIns","description":null,"token":"optins"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag","toast.tags.sub2mainscriptallpages.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"UV - Video click event","disabled":false,"id":20828440,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.uvvideoclickevent.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n  \nvar sendUVEvent \x3d function(action, resend) {\n    window.universal_variable \x3d window.universal_variable || {};\n    universal_variable.events \x3d universal_variable.events || [];\n    universal_variable.events.push({\n      "category": "qubit-opentag",\n      "action": action\n    });\n    if (resend) {\n      window._qtd \x3d window._qtd || [];\n      window._qtd.push({\n        resendUniversalVariables: 1\n      });\n    }\n  };\n  sendUVEvent(\'product:video:click\', false);\n\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.CheckForUvAndWaitForClick"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Facebook: Form Submitted","disabled":true,"id":51565004,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.facebookformsubmitted.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n  (function(){\n  \tfbq('track', \"formSubmit\");\n  })();\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.WaitForFormSubmit"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.facebookpageview.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"oldLibraryTemplateName":'Sub2 - Registration (depends upon "Sub2 - Main Script - All Pages")',"url":"","timeout":5E3,"async":true,"oldVendorName":"Sub2","usesDocumentWrite":false,"templated":true,"name":"Sub2 - Registration","disabled":false,"id":16870270,"oldLibraryTemplateId":"39677","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.sub2registration.Tag";
qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n\n(function ()\n{\n  var waitFor_S2Tech_StoreRegistrationData \x3d setInterval(function ()\n  {\n    if (typeof S2Tech_StoreRegistrationData \x3d\x3d\x3d \'function\')\n    {\n      clearInterval(waitFor_S2Tech_StoreRegistrationData);\n\n      S2Tech_StoreRegistrationData("${firstname}", "${lastname}", "${email}");\n    }\n  }, 100);\n\n  setTimeout(function ()\n  {\n    clearInterval(waitFor_S2Tech_StoreRegistrationData);\n  }, 5000);\n\n})();\n\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.UponSuccessfulRegistration1"]);tag.addClientVariablesMap({"firstname":"toast.variables.FirstName4","email":"toast.variables.Email6","lastname":"toast.variables.LastName10"});tag.addParameters([{"name":"First Name","description":null,"token":"firstname"},{"name":"Last Name","description":null,"token":"lastname"},{"name":"Email","description":null,"token":"email"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.sub2mainscriptallpages.Tag"]);
tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"dtxtngytz5im1.cloudfront.net/feedback-min.js","timeout":5E3,"async":true,"usesDocumentWrite":false,"prePostWindowScope":true,"name":"QuBit Exit Feedback","disabled":false,"id":15354580,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.qubitexitfeedback.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="";tag.addClientFiltersList(["toast.filters.HaltIfEmailSignupFired"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){window.q_fb_opts={"closeCountDays":120,"submitCountDays":120,"showProb":0,"journeyDepth":3,"pages":{"getFeedback":{"data":{"title":"SHARE YOUR THOUGHTS","message":"We\u2019ve made some changes to our site recently, in the hope of making it easier to use and more exciting to look at. "},"nextPage":"","template":"\x3ch1\x3e{{title}}\x3c/h1\x3e \x3cp\x3e{{message}}\x3c/p\x3e \x3cp class\x3d\"third-message\"\x3eWhat do you like about our site and how could it be better?\x3c/p\x3e \x3cp class\x3d\"second-message\"\x3ePlease let us know, leaving your email address if you would like us to respond. Thank you.\x3c/p\x3e \x3ctextarea tabindex\x3d'1' class\x3d'text'\x3e{{placeholder}}\x3c/textarea\x3e \x3ca tabindex\x3d'2' href\x3d'#' class\x3d'send'\x3esend feedback\x3c/a\x3e"},
"thankYou":{"data":{"title":"THANK YOU","message":""}}},"container":{"width":600,"height":390,"template":"\x3cdiv id\x3d'main'\x3e   \x3cdiv id\x3d\"a-new-site\"\x3e\x3c/div\x3e   \x3ca href\x3d'#' class\x3d'close'\x3e\x3c/a\x3e   \x3cdiv class\x3d'content'\x3e\x3c/div\x3e \x3c/div\x3e"},"cssExtra":"#qb_feedback_frame {   padding: 10px; }  body div {   height: 100%;   width: 100%;   font-family: 'HelveticaNeueLT-LightCond','pragmatica-web-condensed',arial,sans-serif; }  .content.getFeedback {  position: absolute;     width: 565px;     top: 16px;     height: 400px;     background-color: white; }  #main {   background: none;   width: 100%;   top: 0px;   left: 0px;   position: absolute;   height: 100%;   padding: 0px; }  .content.getFeedback div {       position: absolute;       top: 25px;       height: 284px;       left: 35px;       width: 505px; }  h1 {     text-align: center;     margin: 0px; }  p {   text-align: center;   width: 403px;   font-size: 12px;   margin-left: 51px; }  .second-message {     font-weight: normal;     width: 291px;     margin-left: 107px; }  .third-message {     width: 420px;   font-weight: bolder; }  textarea {   position: absolute;   top: 157px;   left: 52px;   height: 126px;   max-height: 126px;   width: 416px;   max-width: 416px;   background-color: white;   border: 1px solid black;   border-radius: 0px;   resize: none; }  .getFeedback div a {  position: absolute;     background: none;     background-color: black;     box-shadow: none;     color: white;     text-transform: lowercase;     font-family: \"Helvetica Neue\",Arial,Helvetica,sans-serif;     padding-left: 21px;     padding-right: 17px;     padding-top: 6px;     padding-bottom: 8px;     border: none;     filter: none;     top: 281px;     left: 196px;     margin-left: 0px;     font-size: 14px;     border-radius: 0px; }  .content.thankYou {  text-align: center;     background-color: white;     height: 344px;     left: 1px;     width: 565px;     top: 16px;     position: absolute; } .content.thankYou h1 {  margin-top: 140px;     margin-left: 33px; } .enabled .send {  background: none;     border: none;     filter: none;     background-color: black;     color: white;     box-shadow: none; } .enabled .send:hover {  background: none;     background-color: black;     color: white;     border: none;     filter: none; }  .close {   opacity: 1;   background: none;   background-image: url(https://s3-eu-west-1.amazonaws.com/qubit-etc/_generic/close_button_black_30px.png);   width: 28px;   height: 28px;   left: 550;   top: 2px;   display: block;   filter: alpha(opacity\x3d100);   z-index: 9999999999999; } #a-new-site {   width: 129px;   height: 28px;   position: absolute;   top: 27px;   left: 50%;   margin-left: -64px;   z-index: 999;  }",
"trackingId":"toast_new","domain":".toa.st","clientId":36956,"profileId":2700,"configId":28}};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"BV - Push checked out items to ECircle","disabled":false,"id":22116102,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.bvpushcheckedoutitemstoecircle.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n  (function()\n   {\n     function doGroupSubscribe() {\n       var bvGroup \x3d 750184202;\n     \n       \n       var subscribeParams \x3d {\n         method: '/membership/subscribeByEmail',\n         queryNames: ['email', 'groupId', 'subscriptionMode'],\n         queryValues: [window.universal_variable.user.email, bvGroup, 'OPT_IN'],\n         attributeValues: null,\n         attributeNames: null,\n         httpVerb: 'POST'\n       };\n       $.ajax({\n         url: '/services/ecrelay.asmx/Relay',\n         type: 'POST',\n         contentType: \"application/json; charset\x3dutf-8\",\n         data: JSON.stringify(subscribeParams),\n         dataType: 'json',\n         success: function (data, status) {\n           //console.log(\"group \" + bvGroup + \" - SUBSCRIBE\",data.d);\n           $('.pane .thankyousection').removeClass('visuallyHidden');\n         }\n       }); \n     }\n     var pollForUv \x3d function()\n     {\n       if(window.jQuery \x26\x26\n          window.universal_variable \x26\x26\n          window.nurseryComplete \x26\x26\n          universal_variable.user \x26\x26\n          universal_variable.user.email \x26\x26\n          universal_variable.transaction \x26\x26 \n          universal_variable.transaction.line_items )\n       {         \n         var uvUser \x3d window.universal_variable.user;\n         var attributeValueArray \x3d [uvUser.email];\n         var attributeArray \x3d [\"Email\"];\n         var lineItems \x3d universal_variable.transaction.line_items;\n         var prodCheckArr \x3d [];\n         var lineItemsArr \x3d [];\n         \n         for (var i\x3d0; i \x3c lineItems.length; i++){\n           if(prodCheckArr.indexOf(lineItems[i].product.id) \x3d\x3d -1) {\n             prodCheckArr.push(lineItems[i].product.id);\n             lineItemsArr.push(lineItems[i]);\n           }\n         }\n         for (var i\x3d0; i \x3c 15; i++) {\n           if(lineItemsArr.length \x3e 3 \x26\x26 lineItemsArr.length \x3c\x3d i \x26\x26 i \x3e\x3d 3) {\n             attributeArray.push('user.CustomAttribute.ZBV4' + (i+1));\n             attributeValueArray.push(\"\");\n           }\n           else if(lineItemsArr.length \x3e i) {\n             var lineItemProdPrice \x3d lineItemsArr[i].product.unit_price !\x3d lineItemsArr[i].product.unit_sale_price ? lineItemsArr[i].product.unit_sale_price : lineItemsArr[i].product.unit_price;\n             var bvLink \x3d \"http://display.ugc.bazaarvoice.com/static/toast/en_GB/container.htm?bvaction\x3drr_submit_review\x26bvproductId\x3d\" + lineItemsArr[i].product.id;\n             if(lineItemsArr.length \x3d\x3d\x3d 1) {\n               attributeArray.push('user.CustomAttribute.ZBV1GROUP');\n               attributeValueArray.push(\"true\");\n               attributeArray.push('user.CustomAttribute.ZBV1');\n             }\n             else if(lineItemsArr.length \x3d\x3d\x3d 2) {\n               attributeArray.push('user.CustomAttribute.ZBV2GROUP');\n               attributeValueArray.push(\"true\");\n               attributeArray.push('user.CustomAttribute.ZBV2' + (i+1));\n             }\n             else if(lineItemsArr.length \x3d\x3d\x3d 3) {\n               attributeArray.push('user.CustomAttribute.ZBV3GROUP');\n               attributeValueArray.push(\"true\");\n               attributeArray.push('user.CustomAttribute.ZBV3' + (i+1));\n             }\n             else if(lineItemsArr.length \x3e\x3d 4) {\n               attributeArray.push('user.CustomAttribute.ZBV4GROUP');\n               attributeValueArray.push(\"true\");\n               attributeArray.push('user.CustomAttribute.ZBV4' + (i+1));\n             }\n             if(i \x3c 3) {\n               attributeValueArray.push([\"\x3ctable width\x3d'230' border\x3d'0' cellpadding\x3d'0' cellspacing\x3d'0'\x3e\",\n                \"\x3ctr\x3e\",\n                  \"\x3ctd\x3e\",\n                    \"\x3ca href\x3d'\" + bvLink + \"' style\x3d'border: 0;'\x3e\",\n                      \"\x3cimg src\x3d'\" + decodeURIComponent(lineItemsArr[i].product_image) + \"' border\x3d'0' width\x3d'230' height\x3d'326' alt\x3d'\" + lineItemsArr[i].product.name + \"'\x3e\",\n                    \"\x3c/a\x3e\",\n                  \"\x3c/td\x3e\",\n                \"\x3c/tr\x3e\",\n                \"\x3ctr\x3e\",\n                  \"\x3ctd\x3e\",\n                    \"\x3ca href\x3d'\" + bvLink + \"' style\x3d'border: 0; color: black; text-decoration: none;'\x3e\",\n                      \"\x3cp style\x3d'font-family: Arial; font-size: 12px; margin-top: 8px; letter-spacing: 1px; text-align: center; text-transform: uppercase;'\x3e\" + lineItemsArr[i].product.name + \"\x3c/p\x3e\",\n                    \"\x3c/a\x3e\",\n                  \"\x3c/td\x3e\",\n                \"\x3c/tr\x3e\",\n                \"\x3ctr\x3e\",\n                  \"\x3ctd\x3e\",\n                    \"\x3ca href\x3d'\" + bvLink + \"' style\x3d'border: 0;'\x3e\",\n                      \"\x3cimg src\x3d'http://post.toast.co.uk/imgproxy/img/656181193/BVReviewButtonLink.jpg' width\x3d'230' height\x3d'50' alt\x3d''\x3e\",\n                    \"\x3c/a\x3e\",\n                  \"\x3c/td\x3e\",\n                \"\x3c/tr\x3e\",\n                \"\x3c/table\x3e\"].join(\"\"));\n              }\n              else {\n                attributeValueArray.push([\"\x3ctable width\x3d'820' height\x3d'150' border\x3d'0' cellpadding\x3d'0' cellspacing\x3d'0'\x3e\",\n                  \"\x3ctr\x3e\",\n                    \"\x3ctd rowspan\x3d'4'\x3e\",\n                      \"\x3cimg src\x3d'http://toast-images.s3.amazonaws.com/bv/4_01.jpg' style\x3d'display:block;' border\x3d'0' width\x3d'257' height\x3d'150' alt\x3d''\x3e\",\n                    \"\x3c/td\x3e\",\n                    \"\x3ctd rowspan\x3d'4'\x3e\",\n                      \"\x3ca href\x3d'\" + bvLink + \"' style\x3d'border: 0;'\x3e\",\n                        \"\x3cimg src\x3d'\" + decodeURIComponent(lineItemsArr[i].product_image) + \"' style\x3d'display:block;' border\x3d'0' width\x3d'99' height\x3d'150' alt\x3d'\" + lineItemsArr[i].product.name + \"'\x3e\",\n                      \"\x3c/a\x3e\",\n                    \"\x3c/td\x3e\",\n                    \"\x3ctd rowspan\x3d'4'\x3e\",\n                      \"\x3cimg src\x3d'http://toast-images.s3.amazonaws.com/bv/4_03.jpg' style\x3d'display:block;' border\x3d'0' width\x3d'31' height\x3d'150' alt\x3d''\x3e\",\n                    \"\x3c/td\x3e\",\n                    \"\x3ctd\x3e\",\n                      \"\x3cimg src\x3d'http://toast-images.s3.amazonaws.com/bv/4_04.jpg' style\x3d'display:block;' border\x3d'0' width\x3d'433' height\x3d'51' alt\x3d''\x3e\",\n                    \"\x3c/td\x3e\",\n                  \"\x3c/tr\x3e\",\n                  \"\x3ctr\x3e\",\n                    \"\x3ctd\x3e\",\n                      \"\x3ca href\x3d'\" + bvLink + \"' style\x3d'border: 0; color: black; text-decoration: none;'\x3e\",\n                        \"\x3cp style\x3d'font-family: Arial; font-size: 12px; margin-top: 0px; letter-spacing: 1px; text-align: left; text-transform: uppercase;'\x3e\" + lineItemsArr[i].product.name + \"\x3c/p\x3e\",\n                      \"\x3c/a\x3e\",\n                    \"\x3c/td\x3e\",\n                  \"\x3c/tr\x3e\",\n                  \"\x3ctr\x3e\",\n                    \"\x3ctd\x3e\",\n                      \"\x3ca href\x3d'\" + bvLink + \"' style\x3d'border: 0;'\x3e\",\n                        \"\x3cimg src\x3d'http://toast-images.s3.amazonaws.com/bv/BVReviewButtonLink2.jpg' style\x3d'display:block;' border\x3d'0' width\x3d'433' height\x3d'49' alt\x3d''\x3e\",\n                      \"\x3c/a\x3e\",\n                    \"\x3c/td\x3e\",\n                  \"\x3c/tr\x3e\",\n                  \"\x3ctr\x3e\",\n                    \"\x3ctd\x3e\",\n                      \"\x3cimg src\x3d'http://toast-images.s3.amazonaws.com/bv/4_07.jpg' style\x3d'display:block;' border\x3d'0' width\x3d'433' height\x3d'20' alt\x3d''\x3e\",\n                    \"\x3c/td\x3e\",\n                  \"\x3c/tr\x3e\",\n                \"\x3c/table\x3e\"].join(\"\"));\n              } \n            }\n          }\n\n         var params \x3d {\n           method: '/user/updateProfileByEmail',\n           queryNames: ['email'],\n           queryValues: [uvUser.email],\n           attributeValues: attributeValueArray,\n           attributeNames: attributeArray,\n           httpVerb: 'post'\n         };\n         $.ajax({\n           url: '/services/ecrelay.asmx/Relay',\n           type: 'POST',\n           contentType: \"application/json; charset\x3dutf-8\",\n           data: JSON.stringify(params),\n           dataType: 'json',\n           success: function (data, status) {\n             //console.log(\"Update with generated fields\", data.d);\n             doGroupSubscribe();\n           }\n         });\n        }\n        else \n        {\n          setTimeout(pollForUv, 200);\n        }\n      };     \n     pollForUv(); \n   })();\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag","toast.tags.rulejqueryexistsdocumentready.Tag","toast.tags.ecirclenurseryprogrammetrigger.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":true,"name":"Coast - Existing User Login (Checkout)","disabled":false,"id":37886838,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastexistinguserlogincheckout.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n    var axel \x3d Math.random() + \"\";\n    var a \x3d axel * 10000000000000;\n  \tvar isDevice \x3d (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|ios|mobile|opera mobi|opera|tab|touchpad|nexus 7|nexus 10|gt-n|pad|gt-p|ideatab|sm-t|hp slate|xoom|aurora-ii|me301t|a1-810|a1-811|nookhd|pmp5880d|quantum7|kindle fire|sgp3|nook hd|transformer|at300|cobalt|momo|sweet m|archos|nook|nabi2|mz60|vega|slider|mid7|kftt|streak|lepanii|htc_flyer|jro03h|bntv400|a500|kftt build|m805|pom727mc|cm_tenderloin/i.test(navigator.userAgent.toLowerCase()));\n    if (isDevice) {\n      document.write(\"\x3cimg src\x3d'https://20661601p.rfihub.com/ca.gif?rb\x3d1429\x26ca\x3d20661601\x26ra\x3d\"+a+\"' height\x3d0 width\x3d0 style\x3d'display:none' alt\x3d'Rocket Fuel'/\x3e\");\n    } else {\n      //document.write(\"\x3cimg src\x3d'https://20661603p.rfihub.com/ca.gif?rb\x3d1429\x26ca\x3d20661603\x26ra\x3d\"+a+\"' height\x3d0 width\x3d0 style\x3d'display:none' alt\x3d'Rocket Fuel'/\x3e\");\n    }    \n\x3c/script\x3e\n\n\x3cscript\x3e\n  window._struqPI \x3d window._struqPI || [];\n  _struqPI.push(['injectTrackingPixel', { trackingPixelId: 'MZbH1TGFFk2GEoZY-WxOyQ', route: '/s/ga/', collectData: false, options: { timeoutMs: 2000, firstPartyDomain: '', firstPartyUid: '' }}]);\n  (function() {\n    var struq \x3d document.createElement('script'); struq.type \x3d 'text/javascript'; struq.async \x3d true;\n    struq.src \x3d ('https:' \x3d\x3d document.location.protocol ? 'https://' : 'http://') + 'maxcdn.quantserve.com/content/scripts/Struq_Pixel_Injector_min_v1-17.js';\n    var s \x3d document.getElementsByTagName('head')[0].appendChild(struq);\n  })();\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.CheckoutLoginClicked"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulecheckoutpage.Tag","toast.tags.rulejqueryexistsdocumentready.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Facebook: PageView","disabled":true,"id":51565001,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.facebookpageview.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e \n  (function(){\n    !function(f,b,e,v,n,t,s){if(f.fbq)return;n\x3df.fbq\x3dfunction(){n.callMethod? n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq\x3dn; n.push\x3dn;n.loaded\x3d!0;n.version\x3d'2.0';n.queue\x3d[];t\x3db.createElement(e);t.async\x3d!0; t.src\x3dv;s\x3db.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script','//connect.facebook.net/en_US/fbevents.js'); \n    fbq('init', '1713854252171034'); \n    fbq('track', \"PageView\");\n  })();\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":-1,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: Homepage","disabled":false,"id":14241914,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulehomepage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent=
"\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.RuleHomepage"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":-1,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: Category Page","disabled":false,"id":13954369,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulecategorypage.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll1"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":true,"name":"Coast - Remarketing All Pages pt 1","disabled":false,"id":31890816,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastremarketingallpagespt1.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  var uv \x3d window.universal_variable;\n  var toast_product_id \x3d (typeof(uv.product) !\x3d\x3d "undefined" ? uv.product.id : "");\n  var google_tag_params \x3d {\n    ecomm_prodid: toast_product_id,\n    ecomm_pagetype: "${PageType}",\n    ecomm_totalvalue: ${BasketTotal}\n  };\n\x3c/script\x3e\n\x3cscript type\x3d"text/javascript"\x3e\n/* \x3c![CDATA[ */\nvar google_conversion_id \x3d 971881096;\nvar google_custom_params \x3d window.google_tag_params;\nvar google_remarketing_only \x3d true;\n/* ]]\x3e */\n\x3c/script\x3e\n\x3c!-- new content below --\x3e\n\x3c!-- tag \'Coast - Remarketing All Pages pt 2\' remove --\x3e\n\x3cscript async type\x3d"text/javascript" src\x3d"//www.googleadservices.com/pagead/conversion.js"\x3e\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"PageType":"toast.variables.PageType","BasketTotal":"toast.variables.BasketTotal"});tag.addParameters([{"name":"Page Type","description":null,"token":"PageType"},{"name":"Basket Total","description":null,"token":"BasketTotal"}]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Set new customer flag on checkout","disabled":false,"id":20673196,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.setnewcustomerflagoncheckout.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n  $('#newcustomer #guest').click(function(e) {\n    $.cookie('new-user-guest-click', 'true');\n  });\n  $('#registeredcustomer #login').click(function(e) {\n    $.cookie('new-user-guest-click', 'false');\n  });\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulecheckoutpage.Tag","toast.tags.rulejqueryexistsdocumentready.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Standard iframe","url":"","timeout":-1,"async":true,"oldVendorName":"Mediaplex","usesDocumentWrite":false,"templated":true,"name":"Mediaplex - Homepage","disabled":true,"id":15218227,"oldLibraryTemplateId":"36163","locked":false,"locationObject":"BODY"});var pkg="toast.tags.mediaplexhomepage.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n(function(){\n\n  var frame \x3d document.createElement("iframe");\n  var src \x3d (document.location.protocol \x3d\x3d\x3d "https:") ? "https://secure." : "http://";\n  src \x3d src + "img-cdn.mediaplex.com/0/${client_id}/universal.html?page_name\x3d${page_name}\x26${event_name}\x3d1\x26mpuid\x3d";\n  frame.src \x3d src;\n  frame.height \x3d 1;\n  frame.width \x3d 1;\n  frame.frameborder \x3d 0;\n  document.body.appendChild(frame);\n\n})();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.AllURLs1"]);tag.addClientVariablesMap({"page_name":"toast.variables.PageName","event_name":"toast.variables.EventName4","client_id":"toast.variables.MediaplexClientID"});tag.addParameters([{"name":"Mediaplex Client ID","description":null,"token":"client_id"},{"name":"Page Name","description":null,"token":"page_name"},{"name":"Event Name","description":null,"token":"event_name"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulehomepage.Tag"]);
tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Coast - Remarketing Confirmation Page","disabled":false,"id":31890651,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastremarketingconfirmationpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3c!-- Google Code for Purchase Conversion Page --\x3e\n\x3cscript type\x3d"text/javascript"\x3e\n/* \x3c![CDATA[ */\nvar google_conversion_id \x3d 971881096;\nvar google_conversion_language \x3d "en";\nvar google_conversion_format \x3d "3";\nvar google_conversion_color \x3d "ffffff";\nvar google_conversion_label \x3d "2h9PCJqaiFkQiPW2zwM";\n  var google_conversion_value \x3d ${OrderTotal};\nvar google_conversion_currency \x3d "GBP";\nvar google_remarketing_only \x3d false;\n/* ]]\x3e */\n\x3c/script\x3e\n\x3cscript type\x3d"text/javascript" src\x3d"//www.googleadservices.com/pagead/conversion.js"\x3e\n\x3c/script\x3e\n\x3cnoscript\x3e\n\x3cdiv style\x3d"display:inline;"\x3e\n\x3cimg height\x3d"1" width\x3d"1" style\x3d"border-style:none;" alt\x3d"" src\x3d"//www.googleadservices.com/pagead/conversion/971881096/?value\x3d${OrderTotal}\x26amp;currency_code\x3dGBP\x26amp;label\x3d2h9PCJqaiFkQiPW2zwM\x26amp;guid\x3dON\x26amp;script\x3d0"/\x3e\n\x3c/div\x3e\n\x3c/noscript\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"OrderTotal":"toast.variables.TransactionOrderTotal"});tag.addParameters([{"name":"Order Total","description":null,"token":"OrderTotal"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"AKQA srtk.net - Catalogue Request","disabled":true,"id":17436425,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.akqasrtknetcataloguerequest.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cimg src\x3d'https://s0.srtk.net/www/delivery/ti.php?trackerid\x3d1369\x26cb\x3d1677815843\x26sr_actiontype\x3dcatalogue\x26sr_actionid\x3d0' width\x3d'1' height\x3d'1' border\x3d'0'/\x3e/\x3e\n\n\x3c!-- Begin New Default  Action Tag --\x3e\n\x3cimg src\x3d'//a.srpx.net/sst?srtid\x3d5c0fb0305680b4v2\x26_srrt\x3dact\x26_srst\x3ddac\x26_sr_actiontype\x3dcatalogue\x26_sr_actionid\x3d0' width\x3d'1' height\x3d'1' border\x3d'0' /\x3e\n\x3c!-- End New Default  Tag --\x3e";
tag.addClientFiltersList(["toast.filters.OnCatalogueOrderThankYouPage"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":-1,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: Checkout Page","disabled":false,"id":13954663,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulecheckoutpage.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll2"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Ecommerce Tag - Confirmation Page","url":"","timeout":5E3,"async":true,"oldVendorName":"Google Universal Analytics","usesDocumentWrite":false,"templated":true,"name":"GA UA eCommerce Tag - Confirmation Page","disabled":false,"id":18561054,"oldLibraryTemplateId":"36663","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.gauaecommercetagconfirmationpage.Tag";
qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']\x3dr;i[r]\x3di[r]||function(){\n(i[r].q\x3di[r].q||[]).push(arguments)},i[r].l\x3d1*new Date();a\x3ds.createElement(o),\nm\x3ds.getElementsByTagName(o)[0];a.async\x3d1;a.src\x3dg;m.parentNode.insertBefore(a,m)\n})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\nga('create', '${web_property_id}', '${url}');\nga('require', 'displayfeatures');\nga('send', 'pageview');\nga('require', 'ecommerce', 'ecommerce.js');\n\nga('ecommerce:addTransaction', {\n  'id': \"${order_id}\", //Required\n  'affiliation': \"${store_name}\",\n  'revenue': \"${revenue}\",\n  'shipping': \"${shipping}\",\n  'tax': \"${tax}\",\n  'currencyCode': \"${currency}\"\n});\n\n//Loop through transaction items. Don't pollute the globe!\n(function(){\n  for(var i \x3d 0; i \x3c ${item_names}.length; i++){\n    ga('ecommerce:addItem', {\n      'id': \"${order_id}\", //Required\n      'name': String(${item_names}[i]), //Required\n      'sku': String(${item_skus}[i]),\n      'category': String(${item_cats}[i]),\n      'price': String(${item_prices}[i]),\n      'quantity': String(${item_quantities}[i])\n    });\n  }\n})();\n\nga('ecommerce:send');\n\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"item_skus":"toast.variables.ItemSKUList","web_property_id":"toast.variables.WebPropertyID2","item_quantities":"toast.variables.ItemQuantitiesList","tax":"toast.variables.TaxValue","item_names":"toast.variables.ItemNameList","item_prices":"toast.variables.ItemPriceList","url":"toast.variables.SiteURL","item_cats":"toast.variables.ItemCategoryList","revenue":"toast.variables.Revenue","shipping":"toast.variables.ShippingCost",
"store_name":"toast.variables.StoreName","currency":"toast.variables.Currency","order_id":"toast.variables.OrderID"});tag.addParameters([{"name":"Web Property ID","description":null,"token":"web_property_id"},{"name":"Order ID","description":null,"token":"order_id"},{"name":"Store Name","description":null,"token":"store_name"},{"name":"Revenue","description":null,"token":"revenue"},{"name":"Shipping Cost","description":null,"token":"shipping"},{"name":"Tax Value","description":null,"token":"tax"},
{"name":"Currency","description":null,"token":"currency"},{"name":"Item Name List","description":null,"token":"item_names"},{"name":"Item SKU List","description":null,"token":"item_skus"},{"name":"Item Category List","description":null,"token":"item_cats"},{"name":"Item Price List","description":null,"token":"item_prices"},{"name":"Item Quantities List","description":null,"token":"item_quantities"},{"name":"Site URL","description":null,"token":"url"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);
tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Coast - Bing","disabled":false,"id":31890461,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastbing.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e(function(w,d,t,r,u){var f,n,i;w[u]\x3dw[u]||[],f\x3dfunction(){var o\x3d{ti:"4013551"};o.q\x3dw[u],w[u]\x3dnew UET(o),w[u].push("pageLoad")},n\x3dd.createElement(t),n.src\x3dr,n.async\x3d1,n.onload\x3dn.onreadystatechange\x3dfunction(){var s\x3dthis.readyState;s\x26\x26s!\x3d\x3d"loaded"\x26\x26s!\x3d\x3d"complete"||(f(),n.onload\x3dn.onreadystatechange\x3dnull)},i\x3dd.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq");\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"oldLibraryTemplateName":'Sub2 - Registration (depends upon "Sub2 - Main Script - All Pages")',"url":"","timeout":5E3,"async":true,"oldVendorName":"Sub2","usesDocumentWrite":false,"templated":true,"name":"Sub2 - Email SignUp","disabled":false,"id":16870240,"oldLibraryTemplateId":"39677","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.sub2emailsignup.Tag";
qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n\n(function ()\n{\n  var waitFor_S2Tech_StoreRegistrationData \x3d setInterval(function ()\n  {\n    if (typeof S2Tech_StoreRegistrationData \x3d\x3d\x3d \'function\')\n    {\n      clearInterval(waitFor_S2Tech_StoreRegistrationData);\n\n      S2Tech_StoreRegistrationData("${firstname}", "${lastname}", "${email}");\n    }\n  }, 100);\n\n  setTimeout(function ()\n  {\n    clearInterval(waitFor_S2Tech_StoreRegistrationData);\n  }, 5000);\n\n})();\n\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.UponSuccessfulEmailSignUp3"]);tag.addClientVariablesMap({"firstname":"toast.variables.FirstName","email":"toast.variables.Email","lastname":"toast.variables.LastName9"});tag.addParameters([{"name":"First Name","description":null,"token":"firstname"},{"name":"Last Name","description":null,"token":"lastname"},{"name":"Email","description":null,"token":"email"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.sub2mainscriptallpages.Tag"]);
tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Category iframe","url":"","timeout":-1,"async":true,"oldVendorName":"Mediaplex","usesDocumentWrite":false,"templated":true,"name":"Mediaplex - Category Women","disabled":true,"id":15218665,"oldLibraryTemplateId":"36164","locked":false,"locationObject":"BODY"});var pkg="toast.tags.mediaplexcategorywomen.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n(function(){\n\n  var frame \x3d document.createElement("iframe");\n  var src \x3d (document.location.protocol \x3d\x3d\x3d "https:") ? "https://secure." : "http://";\n  src \x3d src + "img-cdn.mediaplex.com/0/${client_id}/universal.html?page_name\x3d${page_name}\x26${event_name}\x3d1\x26Primary_Category\x3d${category}\x26Sub_Category\x3d${subcategory}\x26mpuid\x3d";\n  frame.src \x3d src;\n  frame.height \x3d 1;\n  frame.width \x3d 1;\n  frame.frameborder \x3d 0;\n  document.body.appendChild(frame);\n\n})();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.WaitForCatUV"]);tag.addClientVariablesMap({"page_name":"toast.variables.PageName6","event_name":"toast.variables.EventName6","category":"toast.variables.PageCategory","subcategory":"toast.variables.PageSubcategory","client_id":"toast.variables.MediaplexClientID"});tag.addParameters([{"name":"Mediaplex Client ID","description":null,"token":"client_id"},{"name":"Page Name","description":null,"token":"page_name"},{"name":"Event Name","description":null,"token":"event_name"},
{"name":"Page Category","description":null,"token":"category"},{"name":"Page Subcategory","description":null,"token":"subcategory"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulecategorywomen.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"BazaarVoice ROI Beacon","disabled":false,"id":22550638,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.bazaarvoiceroibeacon.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript src\x3d"//display.ugc.bazaarvoice.com/static/toast/en_GB/bvapi.js"\x3e\x3c/script\x3e\n\x3cscript\x3e\n(function ()\n{\n  var imgURLs \x3d [];\n  jQuery(".myminiBasket td img").each(function ()\n  {\n    imgURLs.push($(this).attr(\'src\'));\n  });\n  \n  var items \x3d [];\n  for (var i\x3d0; i \x3c ${skus}.length; i++)\n  { \n    items.push({\n      "sku" : ${skus}[i],\n      "quantity" : ${quantities}[i],\n      "price" : ${prices}[i],\n      "name" : ${names}[i],\n      "imageURL" : imgURLs[i]\n    });\n  }\n  \n  window.$BV.SI.trackTransactionPageView({\n    "orderId" : "${order_id}",\n    "total" : ${subtotal},\n    "items"  : items,\n    "nickname" : "${name}",\n    "locale" : "en-GB"\n  });\n})();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"names":"toast.variables.TransactionLineItemsProductNameList","skus":"toast.variables.TransactionLineItemsProductSKUList","subtotal":"toast.variables.TransactionOrderSubTotal","name":"toast.variables.UserFullName","quantities":"toast.variables.TransactionLineItemsQuantityList","prices":"toast.variables.TransactionLineItemsUnitSalePriceList","order_id":"toast.variables.TransactionOrderId"});tag.addParameters([{"name":"Array or Product Names",
"description":null,"token":"names"},{"name":"Order Subtotal","description":null,"token":"subtotal"},{"defaultValue":"unknown","name":"User Name","description":null,"token":"name"},{"name":"Order ID","description":null,"token":"order_id"},{"name":"Array of Product Unit Sale Prices","description":null,"token":"prices"},{"name":"Array of Product Quantities","description":null,"token":"quantities"},{"name":"Array of Product SKU codes","description":null,"token":"skus"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag",
"toast.tags.rulejqueryexistsdocumentready.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Category iframe","url":"","timeout":-1,"async":true,"oldVendorName":"Mediaplex","usesDocumentWrite":false,"templated":true,"name":"Mediaplex - Category Men","disabled":true,"id":15218276,"oldLibraryTemplateId":"36164","locked":false,"locationObject":"BODY"});var pkg="toast.tags.mediaplexcategorymen.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n(function(){\n\n  var frame \x3d document.createElement("iframe");\n  var src \x3d (document.location.protocol \x3d\x3d\x3d "https:") ? "https://secure." : "http://";\n  src \x3d src + "img-cdn.mediaplex.com/0/${client_id}/universal.html?page_name\x3d${page_name}\x26${event_name}\x3d1\x26Primary_Category\x3d${category}\x26Sub_Category\x3d${subcategory}\x26mpuid\x3d";\n  frame.src \x3d src;\n  frame.height \x3d 1;\n  frame.width \x3d 1;\n  frame.frameborder \x3d 0;\n  document.body.appendChild(frame);\n\n})();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.WaitForCategoryUV"]);tag.addClientVariablesMap({"page_name":"toast.variables.PageName5","event_name":"toast.variables.EventName5","category":"toast.variables.PageCategory","subcategory":"toast.variables.PageSubcategory","client_id":"toast.variables.MediaplexClientID"});tag.addParameters([{"name":"Mediaplex Client ID","description":null,"token":"client_id"},{"name":"Page Name","description":null,"token":"page_name"},{"name":"Event Name","description":null,"token":"event_name"},
{"name":"Page Category","description":null,"token":"category"},{"name":"Page Subcategory","description":null,"token":"subcategory"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulecategorymen.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"Rule: Category Men","disabled":false,"id":15218305,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulecategorymen.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.OnMenCategoryPages"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Universal Tracking Pixel","url":"","timeout":-1,"async":true,"oldVendorName":"RocketFuel","usesDocumentWrite":false,"templated":true,"name":"RocketFuel - Universal","disabled":true,"id":14742305,"oldLibraryTemplateId":"36174","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rocketfueluniversal.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n(function ()\n{\n  var cachebust \x3d (Math.random() + "").substr(2);\n  var img \x3d new Image();\n  img.src \x3d"//${campaign_id}p.rfihub.com/ca.gif?rb\x3d${merchant_id}\x26ca\x3d${campaign_id}\x26ra\x3d" + cachebust;\n})();\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.AllURLs"]);tag.addClientVariablesMap({"merchant_id":"toast.variables.RocketFuelMerchantID","campaign_id":"toast.variables.RocketFuelCampaignID7"});tag.addParameters([{"name":"RocketFuel Merchant ID",
"description":null,"token":"merchant_id"},{"name":"RocketFuel Campaign ID","description":null,"token":"campaign_id"}]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":-1,"async":true,"usesDocumentWrite":false,"name":"TCP: UV Confirmation","disabled":false,"id":14033238,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.tcpuvconfirmation.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e\n  window._qtd \x3d window._qtd || [];\n  window._qtd.push({resendUniversalVariables: 1});\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.UVTransactionExists"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulecheckoutpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":5E3,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: Product Page","disabled":false,"id":13954374,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.ruleproductpage.Tag";qubit.Define.clientNamespace(pkg,tag);
tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.ProductPages"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":true,"name":"Coast  - Floodlight Tag for Page Visits","disabled":false,"id":31890466,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastfloodlighttagforpagevisits.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3c!-- Tag for Activity Group: Page Visits, Activity Name: Site Visits, Activity ID: 2031626 --\x3e\n\x3c!-- Expected URL: https://www.toa.st/ --\x3e\n\n\x3c!--\n  Activity ID: 2031626\n  Activity Name: Site Visits\n  Activity Group Name: Page Visits\n--\x3e\n\n\x3c!--\n  Start of DoubleClick Floodlight Tag: Please do not remove\n  Activity name of this tag: Site Visits\n  URL of the webpage where the tag is expected to be placed: https://www.toa.st/\n  This tag must be placed between the \x3cbody\x3e and \x3c/body\x3e tags, as close as possible to the opening tag.\n  Creation Date: 11/27/2014\n--\x3e\n\n\x3cscript type\x3d"text/javascript"\x3e\n  var axel \x3d Math.random() + "";\n  var a \x3d axel * 10000000000000;\n  document.write(\'\x3ciframe src\x3d"https://4598365.fls.doubleclick.net/activityi;src\x3d4598365;type\x3dpagev0;cat\x3dsitev0;ord\x3d\' + a + \'?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/iframe\x3e\');\n\x3c/script\x3e\n\x3c!-- End of DoubleClick Floodlight Tag: Please do not remove --\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule: Not 404 Page","disabled":false,"id":31282640,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulenot404page.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.Not404"]);tag.addClientVariablesMap({});
tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule: Logged In Page","disabled":false,"id":15219566,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.ruleloggedinpage.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.OnUserJustLoggedInPage"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule: 404 Page","disabled":false,"id":30649476,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rule404page.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.WaitFor404"]);tag.addClientVariablesMap({});
tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Sub2 - Main Script - All Pages","url":"","timeout":5E3,"async":true,"oldVendorName":"Sub2","usesDocumentWrite":false,"templated":true,"name":"Sub2 - Main Script - All Pages","disabled":false,"id":16870241,"oldLibraryTemplateId":"39674","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.sub2mainscriptallpages.Tag";
qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n\n  var _SUB2metadata \x3d {\n    clientid: "${client_id}", \n    clientname: "${client_name}", \n    serviceversion: "v12.0",\n    cookiedomain: "${cookie_domain}",\n    callingdomain: "",\n    newsletter: "",\n    login: "",\n    applynow: "",\n    debug: "N",\n    collectcookies: "N",\n    testurn: 0\n  };\n\n  var _SUB2_queue \x3d _SUB2_queue || [];\n\n  function S2Tech_2Prompt()\n  {\n    if (_SUB2metadata.debug \x3d\x3d "Y")\n    {\n      alert("QUEUE:S2Tech_2Prompt");\n    }\n    _SUB2_queue.push(["S2Tech_2Prompt"]);\n  }\n\n  function S2Tech_MatchData_NA(t, f, s, a1, a2, a3, a4, p, e, l, m, o)\n  {\n    if (_SUB2metadata.debug \x3d\x3d "Y")\n    {\n      alert("QUEUE:S2Tech_MatchData_NA");\n    }\n    _SUB2_queue.push(["S2Tech_MatchData_NA", t, f, s, a1, a2, a3, a4, p, e, l, m, o]);\n  }\n\n  function S2Tech_StoreRegistrationData(f, s, e)\n  {\n    if (_SUB2metadata.debug \x3d\x3d "Y")\n    {\n      alert("QUEUE:S2Tech_StoreRegistrationData");\n    }\n    _SUB2_queue.push(["S2Tech_StoreRegistrationData", f, s, e]);\n  }\n\n  function S2Tech_2Shop()\n  {\n    if (_SUB2metadata.debug \x3d\x3d "Y")\n    {\n      alert("QUEUE:S2Tech_2Shop");\n    }\n    _SUB2_queue.push(["S2Tech_2Shop"]);\n  }\n\n  function S2Tech_LastProductViewed()\n  {\n    if (_SUB2metadata.debug \x3d\x3d "Y")\n    {\n      alert("QUEUE:S2Tech_LastProductViewed");\n    }\n    _SUB2_queue.push(["S2Tech_LastProductViewed"]);\n  }\n\n  function S2Tech_addOrder(o, a, t, tx, sh, ci, co, cy)\n  {\n    if (_SUB2metadata.debug \x3d\x3d "Y")\n    {\n      alert("QUEUE:S2Tech_addOrder");\n    }\n    _SUB2_queue.push(["S2Tech_addOrder", o, a, t, tx, sh, ci, co, cy]);\n  }\n\n  function S2Tech_addItem(o, s, n, c, p, q)\n  {\n    if (_SUB2metadata.debug \x3d\x3d "Y")\n    {\n      alert("QUEUE:S2Tech_addItem");\n    }\n    _SUB2_queue.push(["S2Tech_addItem", o, s, n, c, p, q]);\n  }\n\n  (function () {\n    try\n    {\n      if (window.top.location.search.substring(1).indexOf("__S2OPTOUT__") !\x3d -1)\n      {\n        document.cookie \x3d "V1V4\x3d-1";\n        document.cookie \x3d "V2V4\x3d-1";\n        document.cookie \x3d "V3V4\x3d-1";\n      }\n      \n      if (window.top.location.search.substring(1).indexOf("__S2DEBUG__") !\x3d -1)\n      {\n        _SUB2metadata.debug \x3d "Y";\n      }\n      \n      var cookie_object \x3d {};\n      var i, cookie, key, val;\n      var pairs \x3d document.cookie.split(";");\n      var len \x3d pairs.length;\n      \n      for (i \x3d 0; i \x3c len; ++i)\n      {\n        cookie \x3d pairs[i].split("\x3d");\n        key \x3d cookie[0].replace(/^\\s+/, "");\n        val \x3d unescape(cookie[1]);\n        cookie_object[key] \x3d val;\n      }\n\n      var V1 \x3d cookie_object.V1V4;\n      \n      if (!V1 || (parseInt(V1) !\x3d\x3d -1))\n      {\n        document.callingdomain \x3d document.domain;\n        var _sub2 \x3d document.createElement("script");\n        _sub2.type \x3d "text/javascript";\n        _sub2.async \x3d true;\n        _sub2.src \x3d document.location.protocol + "//webservices.sub2tech.com/" + _SUB2metadata.clientname + "/sub2_queue_MIN.js";\n        var s \x3d document.getElementsByTagName("script")[0];\n        s.parentNode.insertBefore(_sub2, s);\n      }\n    }\n    catch (e)\n    {\n\n    }\n  })();\n\n  var waitFor_S2Tech_2Prompt \x3d setInterval(function ()\n  {\n     if (typeof S2Tech_2Prompt \x3d\x3d\x3d \'function\')\n     {\n        clearInterval(waitFor_S2Tech_2Prompt);\n        S2Tech_2Prompt(); \n     } \n  }, 100);\n\n  setTimeout(function ()\n  {\n     clearInterval(waitFor_S2Tech_2Prompt);\n  }, 5000);\n\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.AllURLs3"]);tag.addClientVariablesMap({"cookie_domain":"toast.variables.CookieDomain1","client_name":"toast.variables.ClientName","client_id":"toast.variables.ClientID"});tag.addParameters([{"name":"Client ID","description":null,"token":"client_id"},{"name":"Client Name","description":null,"token":"client_name"},{"name":"Cookie Domain","description":null,"token":"cookie_domain"}]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};
tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"UV Breadcrumb Converter","url":"","timeout":-1,"async":true,"oldVendorName":"Qubit","usesDocumentWrite":false,"templated":true,"name":"Qubit - UV Breadcrumb Converter","disabled":false,"id":14356388,"oldLibraryTemplateId":"39673","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.qubituvbreadcrumbconverter.Tag";
qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n(function() {\n\n  function isArray (arr) {\n    return Object.prototype.toString.call(arr) \x3d\x3d "[object Array]";\n  }\n\n  function BreadCrumb(uv) {\n\n    uv.page.type \x3d uv.page.type.toLowerCase();\n    uv.page.category \x3d uv.page.type;\n\n    var breadcrumb \x3d {\n      init: function(config) {\n        if (!(uv.page.breadcrumb \x26\x26 isArray(uv.page.breadcrumb))) {\n          return;\n        }\n        config \x3d config || {};\n\n        breadcrumb.skipLast \x3d (config.skipLast \x3d\x3d\x3d true) ? true : false;\n        breadcrumb.skipFirst \x3d (config.skipFirst \x3d\x3d\x3d true) ? true : false;\n        breadcrumb.overwriteSubCat \x3d (config.overwriteSubCat \x3d\x3d\x3d false) ? false : true;\n        \n        breadcrumb.trimLength \x3d config.trimLength || 64;\n        breadcrumb.max \x3d config.max || 10;\n        breadcrumb.obj \x3d uv.page.breadcrumb.slice(0, breadcrumb.max);\n\n        breadcrumb.convert();\n        breadcrumb.createString();\n      },\n      convert: function() {\n        var displace \x3d (breadcrumb.skipFirst) ? 1 : 0;\n        for (var i \x3d 0; i \x3c breadcrumb.obj.length; i++) {\n          if (breadcrumb.skipFirst \x26\x26 (i \x3d\x3d\x3d 0)) {\n            continue;\n          }\n          if (breadcrumb.skipLast \x26\x26 (i \x3d\x3d\x3d breadcrumb.obj.length - 1)) {\n            break;\n          }\n          breadcrumb.obj[i] \x3d breadcrumb.obj[i].substr(0, breadcrumb.trimLength).toLowerCase();\n          uv.page["breadcrumb_l" + (i + 1 - displace)] \x3d breadcrumb.obj[i];\n        }\n        // Add / overwrite page.subcategory with breadcrumb level 1\n        if (uv.page.breadcrumb_l1) {\n          if (!uv.page.subcategory || breadcrumb.overwriteSubCat \x3d\x3d\x3d true) {\n            uv.page.subcategory \x3d uv.page.breadcrumb_l1;\n          }\n        }\n      },\n      createString: function() {\n        var arr \x3d [];\n        for (var i \x3d 0; i \x3c breadcrumb.obj.length; i++) {\n          if (breadcrumb.skipFirst \x26\x26 (i \x3d\x3d\x3d 0)) {\n            continue;\n          }\n          if (breadcrumb.skipLast \x26\x26 (i \x3d\x3d\x3d breadcrumb.obj.length - 1)) {\n            break;\n          }\n          var breadcrumbNoDots \x3d breadcrumb.obj[i].replace(/\\./g, "");\n          arr.push(breadcrumbNoDots);\n        }\n        uv.page.breadcrumb_string \x3d arr.join(".").toLowerCase();\n      }\n    };\n\n    return breadcrumb;\n  }\n  \n  // Wait for Universal Variable\n  var waitForUV \x3d function () {\n    var uv \x3d window.universal_variable;\n    if (uv) {\n      if (uv.page) {\n        var bc \x3d BreadCrumb(uv);\n        bc.init({\n          skipFirst: ${skip_first},\n          skipLast: ${skip_last},\n          overwriteSubCat: true\n        });\n      }\n    } else {\n      setTimeout(waitForUV, 50);\n    }\n  };\n\n  waitForUV();\n\n}());\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"skip_last":"toast.variables.UVIgnoreLastBreadcrumb","skip_first":"toast.variables.UVIgnoreFirstBreadcrumb"});tag.addParameters([{"name":"UV - Ignore Last Breadcrumb","description":null,"token":"skip_last"},{"name":"UV - Ignore First Breadcrumb","description":null,"token":"skip_first"}]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule : DEBUG MODE","disabled":false,"id":15219598,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.ruledebugmode.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.OnlyInDEBUGMode"]);tag.addClientVariablesMap({});
tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":5E3,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: Static Page","disabled":false,"id":13957187,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulestaticpage.Tag";qubit.Define.clientNamespace(pkg,tag);
tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.AllPagesButHomepage","toast.filters.BasketHtm","toast.filters.CheckoutHtm","toast.filters.Product","toast.filters.Category","toast.filters.Search","toast.filters.NotSale","toast.filters.NotEditorial","toast.filters.Wishlist","toast.filters.ViewWishlist","toast.filters.Account","toast.filters.Not404Page"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);
tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"AKQA Universal Pixel","disabled":true,"id":23862682,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.akqauniversalpixel.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n  var deviceType \x3d function () {\n    var searchUA \x3d function (e) {\n      for (var t \x3d 0; t \x3c e.length; t++) {\n        var n \x3d e[t].string;\n        n \x3d n ? n : window.navigator.userAgent, n \x3d n.toLowerCase();\n        var i \x3d e[t].prop;\n        if (n) {\n          var r, o \x3d e[t].subString.split(",");\n          for (r \x3d 0; r \x3c o.length; r++) {\n            if (-1 !\x3d\x3d n.indexOf(o[r].toLowerCase())) {\n              return e[t].identity;\n            }\n          }\n        }\n        else if(i) {\n          return e[t].identity;\n        }\n      }\n    };\n    var dataBrowser \x3d [{\n      subString: "Slurp,Baiduspider,Googlebot,Seznam,masking-agent,CrOS",\n      identity: "unknown"\n    }, {\n      subString: "GoogleTV",\n      identity: "digital media receiver"\n    }, {\n      subString: "NintendoBrowser,PlayStation",\n      identity: "Game Console"\n    }, {\n      subString: "WOW64,IBIS,Macintosh,Linux i686,Windows NT,Linux Mint,Linux Next",\n      identity: "computer"\n    }, {\n      subString: "iPad,Opera,Tab,TouchPad,Nexus 7,Nexus 10,GT-N,Pad,GT-P,IdeaTab,SM-T,HP Slate,Xoom,Aurora-II,ME301T,A1-810,A1-811,NookHD,PMP5880D,QUANTUM7,Kindle Fire,SGP3,Nook HD,Transformer,AT300,COBALT,MOMO,Sweet M,ARCHOS,NOOK,NABI2,MZ60,Vega,Slider,MID7,KFTT,Streak,LePanII,HTC_Flyer,JRO03H,BNTV400,A500,KFTT Build,M805,POM727MC,cm_tenderloin",\n      identity: "tablet"\n    }, {\n      subString: "iPhone,iPod,iOS,IEMobile,Mobile,Opera Mobi",\n      identity: "mobile"\n    }, {\n      subString: "",\n      identity: "computer"\n    }];\n    return searchUA(dataBrowser) || "unknown";\n  };\n  if(deviceType() \x3d\x3d\x3d "mobile") {  \n    (function () {\n      var cachebust \x3d (Math.random() + "").substr(2);\n      var protocol \x3d "https:" \x3d\x3d document.location.protocol ? \'https:\' : \'http:\';\n      new Image().src \x3d protocol+"//20572793p.rfihub.com/ca.gif?rb\x3d1429\x26ca\x3d20572793\x26ra\x3d"+cachebust;\n    })();\n  }\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"NewRelic Browser","disabled":false,"id":37409367,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.newrelicbrowser.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\nwindow.NREUM||(NREUM\x3d{}),__nr_require\x3dfunction(t,e,n){function r(n){if(!e[n]){var o\x3de[n]\x3d{exports:{}};t[n][0].call(o.exports,function(e){var o\x3dt[n][1][e];return r(o?o:e)},o,o.exports)}return e[n].exports}if("function"\x3d\x3dtypeof __nr_require)return __nr_require;for(var o\x3d0;o\x3cn.length;o++)r(n[o]);return r}({QJf3ax:[function(t,e){function n(t){function e(e,n,a){t\x26\x26t(e,n,a),a||(a\x3d{});for(var c\x3ds(e),f\x3dc.length,u\x3di(a,o,r),d\x3d0;f\x3ed;d++)c[d].apply(u,n);return u}function a(t,e){f[t]\x3ds(t).concat(e)}function s(t){return f[t]||[]}function c(){return n(e)}var f\x3d{};return{on:a,emit:e,create:c,listeners:s,_events:f}}function r(){return{}}var o\x3d"nr@context",i\x3dt("gos");e.exports\x3dn()},{gos:"7eSDFh"}],ee:[function(t,e){e.exports\x3dt("QJf3ax")},{}],3:[function(t){function e(t){try{i.console\x26\x26console.log(t)}catch(e){}}var n,r\x3dt("ee"),o\x3dt(1),i\x3d{};try{n\x3dlocalStorage.getItem("__nr_flags").split(","),console\x26\x26"function"\x3d\x3dtypeof console.log\x26\x26(i.console\x3d!0,-1!\x3d\x3dn.indexOf("dev")\x26\x26(i.dev\x3d!0),-1!\x3d\x3dn.indexOf("nr_dev")\x26\x26(i.nrDev\x3d!0))}catch(a){}i.nrDev\x26\x26r.on("internal-error",function(t){e(t.stack)}),i.dev\x26\x26r.on("fn-err",function(t,n,r){e(r.stack)}),i.dev\x26\x26(e("NR AGENT IN DEVELOPMENT MODE"),e("flags: "+o(i,function(t){return t}).join(", ")))},{1:22,ee:"QJf3ax"}],4:[function(t){function e(t,e,n,i,s){try{c?c-\x3d1:r("err",[s||new UncaughtException(t,e,n)])}catch(f){try{r("ierr",[f,(new Date).getTime(),!0])}catch(u){}}return"function"\x3d\x3dtypeof a?a.apply(this,o(arguments)):!1}function UncaughtException(t,e,n){this.message\x3dt||"Uncaught error with no additional information",this.sourceURL\x3de,this.line\x3dn}function n(t){r("err",[t,(new Date).getTime()])}var r\x3dt("handle"),o\x3dt(6),i\x3dt("ee"),a\x3dwindow.onerror,s\x3d!1,c\x3d0;t("loader").features.err\x3d!0,t(4),window.onerror\x3de;try{throw new Error}catch(f){"stack"in f\x26\x26(t(1),t(5),"addEventListener"in window\x26\x26t(2),window.XMLHttpRequest\x26\x26XMLHttpRequest.prototype\x26\x26XMLHttpRequest.prototype.addEventListener\x26\x26window.XMLHttpRequest\x26\x26XMLHttpRequest.prototype\x26\x26XMLHttpRequest.prototype.addEventListener\x26\x26!/CriOS/.test(navigator.userAgent)\x26\x26t(3),s\x3d!0)}i.on("fn-start",function(){s\x26\x26(c+\x3d1)}),i.on("fn-err",function(t,e,r){s\x26\x26(this.thrown\x3d!0,n(r))}),i.on("fn-end",function(){s\x26\x26!this.thrown\x26\x26c\x3e0\x26\x26(c-\x3d1)}),i.on("internal-error",function(t){r("ierr",[t,(new Date).getTime(),!0])})},{1:9,2:6,3:10,4:3,5:8,6:23,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],5:[function(t){function e(){}if(window.performance\x26\x26window.performance.timing\x26\x26window.performance.getEntriesByType){var n\x3dt("ee"),r\x3dt("handle"),o\x3dt(1);t("loader").features.stn\x3d!0,t(2),n.on("fn-start",function(t){var e\x3dt[0];e instanceof Event\x26\x26(this.bstStart\x3dDate.now())}),n.on("fn-end",function(t,e){var n\x3dt[0];n instanceof Event\x26\x26r("bst",[n,e,this.bstStart,Date.now()])}),o.on("fn-start",function(t,e,n){this.bstStart\x3dDate.now(),this.bstType\x3dn}),o.on("fn-end",function(t,e){r("bstTimer",[e,this.bstStart,Date.now(),this.bstType])}),n.on("pushState-start",function(){this.time\x3dDate.now(),this.startPath\x3dlocation.pathname+location.hash}),n.on("pushState-end",function(){r("bstHist",[location.pathname+location.hash,this.startPath,this.time])}),"addEventListener"in window.performance\x26\x26(window.performance.addEventListener("webkitresourcetimingbufferfull",function(){r("bstResource",[window.performance.getEntriesByType("resource")]),window.performance.webkitClearResourceTimings()},!1),window.performance.addEventListener("resourcetimingbufferfull",function(){r("bstResource",[window.performance.getEntriesByType("resource")]),window.performance.clearResourceTimings()},!1)),document.addEventListener("scroll",e,!1),document.addEventListener("keypress",e,!1),document.addEventListener("click",e,!1)}},{1:9,2:7,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],6:[function(t,e){function n(t){i.inPlace(t,["addEventListener","removeEventListener"],"-",r)}function r(t){return t[1]}var o\x3d(t(1),t("ee").create()),i\x3dt(2)(o),a\x3dt("gos");if(e.exports\x3do,n(window),"getPrototypeOf"in Object){for(var s\x3ddocument;s\x26\x26!s.hasOwnProperty("addEventListener");)s\x3dObject.getPrototypeOf(s);s\x26\x26n(s);for(var c\x3dXMLHttpRequest.prototype;c\x26\x26!c.hasOwnProperty("addEventListener");)c\x3dObject.getPrototypeOf(c);c\x26\x26n(c)}else XMLHttpRequest.prototype.hasOwnProperty("addEventListener")\x26\x26n(XMLHttpRequest.prototype);o.on("addEventListener-start",function(t){if(t[1]){var e\x3dt[1];"function"\x3d\x3dtypeof e?this.wrapped\x3dt[1]\x3da(e,"nr@wrapped",function(){return i(e,"fn-",null,e.name||"anonymous")}):"function"\x3d\x3dtypeof e.handleEvent\x26\x26i.inPlace(e,["handleEvent"],"fn-")}}),o.on("removeEventListener-start",function(t){var e\x3dthis.wrapped;e\x26\x26(t[1]\x3de)})},{1:23,2:24,ee:"QJf3ax",gos:"7eSDFh"}],7:[function(t,e){var n\x3d(t(2),t("ee").create()),r\x3dt(1)(n);e.exports\x3dn,r.inPlace(window.history,["pushState"],"-")},{1:24,2:23,ee:"QJf3ax"}],8:[function(t,e){var n\x3d(t(2),t("ee").create()),r\x3dt(1)(n);e.exports\x3dn,r.inPlace(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame"],"raf-"),n.on("raf-start",function(t){t[0]\x3dr(t[0],"fn-")})},{1:24,2:23,ee:"QJf3ax"}],9:[function(t,e){function n(t,e,n){t[0]\x3do(t[0],"fn-",null,n)}var r\x3d(t(2),t("ee").create()),o\x3dt(1)(r);e.exports\x3dr,o.inPlace(window,["setTimeout","setInterval","setImmediate"],"setTimer-"),r.on("setTimer-start",n)},{1:24,2:23,ee:"QJf3ax"}],10:[function(t,e){function n(){f.inPlace(this,p,"fn-")}function r(t,e){f.inPlace(e,["onreadystatechange"],"fn-")}function o(t,e){return e}function i(t,e){for(var n in t)e[n]\x3dt[n];return e}var a\x3dt("ee").create(),s\x3dt(1),c\x3dt(2),f\x3dc(a),u\x3dc(s),d\x3dwindow.XMLHttpRequest,p\x3d["onload","onerror","onabort","onloadstart","onloadend","onprogress","ontimeout"];e.exports\x3da,window.XMLHttpRequest\x3dfunction(t){var e\x3dnew d(t);try{a.emit("new-xhr",[],e),u.inPlace(e,["addEventListener","removeEventListener"],"-",o),e.addEventListener("readystatechange",n,!1)}catch(r){try{a.emit("internal-error",[r])}catch(i){}}return e},i(d,XMLHttpRequest),XMLHttpRequest.prototype\x3dd.prototype,f.inPlace(XMLHttpRequest.prototype,["open","send"],"-xhr-",o),a.on("send-xhr-start",r),a.on("open-xhr-start",r)},{1:6,2:24,ee:"QJf3ax"}],11:[function(t){function e(t){var e\x3dthis.params,r\x3dthis.metrics;if(!this.ended){this.ended\x3d!0;for(var i\x3d0;c\x3ei;i++)t.removeEventListener(s[i],this.listener,!1);if(!e.aborted){if(r.duration\x3d(new Date).getTime()-this.startTime,4\x3d\x3d\x3dt.readyState){e.status\x3dt.status;var a\x3dt.responseType,f\x3d"arraybuffer"\x3d\x3d\x3da||"blob"\x3d\x3d\x3da||"json"\x3d\x3d\x3da?t.response:t.responseText,u\x3dn(f);if(u\x26\x26(r.rxSize\x3du),this.sameOrigin){var d\x3dt.getResponseHeader("X-NewRelic-App-Data");d\x26\x26(e.cat\x3dd.split(", ").pop())}}else e.status\x3d0;r.cbTime\x3dthis.cbTime,o("xhr",[e,r,this.startTime])}}}function n(t){if("string"\x3d\x3dtypeof t\x26\x26t.length)return t.length;if("object"!\x3dtypeof t)return void 0;if("undefined"!\x3dtypeof ArrayBuffer\x26\x26t instanceof ArrayBuffer\x26\x26t.byteLength)return t.byteLength;if("undefined"!\x3dtypeof Blob\x26\x26t instanceof Blob\x26\x26t.size)return t.size;if("undefined"!\x3dtypeof FormData\x26\x26t instanceof FormData)return void 0;try{return JSON.stringify(t).length}catch(e){return void 0}}function r(t,e){var n\x3di(e),r\x3dt.params;r.host\x3dn.hostname+":"+n.port,r.pathname\x3dn.pathname,t.sameOrigin\x3dn.sameOrigin}if(window.XMLHttpRequest\x26\x26XMLHttpRequest.prototype\x26\x26XMLHttpRequest.prototype.addEventListener\x26\x26!/CriOS/.test(navigator.userAgent)){t("loader").features.xhr\x3d!0;var o\x3dt("handle"),i\x3dt(2),a\x3dt("ee"),s\x3d["load","error","abort","timeout"],c\x3ds.length,f\x3dt(1);t(4),t(3),a.on("new-xhr",function(){this.totalCbs\x3d0,this.called\x3d0,this.cbTime\x3d0,this.end\x3de,this.ended\x3d!1,this.xhrGuids\x3d{}}),a.on("open-xhr-start",function(t){this.params\x3d{method:t[0]},r(this,t[1]),this.metrics\x3d{}}),a.on("open-xhr-end",function(t,e){"loader_config"in NREUM\x26\x26"xpid"in NREUM.loader_config\x26\x26this.sameOrigin\x26\x26e.setRequestHeader("X-NewRelic-ID",NREUM.loader_config.xpid)}),a.on("send-xhr-start",function(t,e){var r\x3dthis.metrics,o\x3dt[0],i\x3dthis;if(r\x26\x26o){var f\x3dn(o);f\x26\x26(r.txSize\x3df)}this.startTime\x3d(new Date).getTime(),this.listener\x3dfunction(t){try{"abort"\x3d\x3d\x3dt.type\x26\x26(i.params.aborted\x3d!0),("load"!\x3d\x3dt.type||i.called\x3d\x3d\x3di.totalCbs\x26\x26(i.onloadCalled||"function"!\x3dtypeof e.onload))\x26\x26i.end(e)}catch(n){try{a.emit("internal-error",[n])}catch(r){}}};for(var u\x3d0;c\x3eu;u++)e.addEventListener(s[u],this.listener,!1)}),a.on("xhr-cb-time",function(t,e,n){this.cbTime+\x3dt,e?this.onloadCalled\x3d!0:this.called+\x3d1,this.called!\x3d\x3dthis.totalCbs||!this.onloadCalled\x26\x26"function"\x3d\x3dtypeof n.onload||this.end(n)}),a.on("xhr-load-added",function(t,e){var n\x3d""+f(t)+!!e;this.xhrGuids\x26\x26!this.xhrGuids[n]\x26\x26(this.xhrGuids[n]\x3d!0,this.totalCbs+\x3d1)}),a.on("xhr-load-removed",function(t,e){var n\x3d""+f(t)+!!e;this.xhrGuids\x26\x26this.xhrGuids[n]\x26\x26(delete this.xhrGuids[n],this.totalCbs-\x3d1)}),a.on("addEventListener-end",function(t,e){e instanceof XMLHttpRequest\x26\x26"load"\x3d\x3d\x3dt[0]\x26\x26a.emit("xhr-load-added",[t[1],t[2]],e)}),a.on("removeEventListener-end",function(t,e){e instanceof XMLHttpRequest\x26\x26"load"\x3d\x3d\x3dt[0]\x26\x26a.emit("xhr-load-removed",[t[1],t[2]],e)}),a.on("fn-start",function(t,e,n){e instanceof XMLHttpRequest\x26\x26("onload"\x3d\x3d\x3dn\x26\x26(this.onload\x3d!0),("load"\x3d\x3d\x3d(t[0]\x26\x26t[0].type)||this.onload)\x26\x26(this.xhrCbStart\x3d(new Date).getTime()))}),a.on("fn-end",function(t,e){this.xhrCbStart\x26\x26a.emit("xhr-cb-time",[(new Date).getTime()-this.xhrCbStart,this.onload,e],e)})}},{1:"XL7HBI",2:12,3:10,4:6,ee:"QJf3ax",handle:"D5DuLP",loader:"G9z0Bl"}],12:[function(t,e){e.exports\x3dfunction(t){var e\x3ddocument.createElement("a"),n\x3dwindow.location,r\x3d{};e.href\x3dt,r.port\x3de.port;var o\x3de.href.split("://");return!r.port\x26\x26o[1]\x26\x26(r.port\x3do[1].split("/")[0].split("@").pop().split(":")[1]),r.port\x26\x26"0"!\x3d\x3dr.port||(r.port\x3d"https"\x3d\x3d\x3do[0]?"443":"80"),r.hostname\x3de.hostname||n.hostname,r.pathname\x3de.pathname,r.protocol\x3do[0],"/"!\x3d\x3dr.pathname.charAt(0)\x26\x26(r.pathname\x3d"/"+r.pathname),r.sameOrigin\x3d!e.hostname||e.hostname\x3d\x3d\x3ddocument.domain\x26\x26e.port\x3d\x3d\x3dn.port\x26\x26e.protocol\x3d\x3d\x3dn.protocol,r}},{}],13:[function(t,e){function n(t){return function(){r(t,[(new Date).getTime()].concat(i(arguments)))}}var r\x3dt("handle"),o\x3dt(1),i\x3dt(2);"undefined"\x3d\x3dtypeof window.newrelic\x26\x26(newrelic\x3dwindow.NREUM);var a\x3d["setPageViewName","addPageAction","setCustomAttribute","finished","addToTrace","inlineHit","noticeError"];o(a,function(t,e){window.NREUM[e]\x3dn("api-"+e)}),e.exports\x3dwindow.NREUM},{1:22,2:23,handle:"D5DuLP"}],"7eSDFh":[function(t,e){function n(t,e,n){if(r.call(t,e))return t[e];var o\x3dn();if(Object.defineProperty\x26\x26Object.keys)try{return Object.defineProperty(t,e,{value:o,writable:!0,enumerable:!1}),o}catch(i){}return t[e]\x3do,o}var r\x3dObject.prototype.hasOwnProperty;e.exports\x3dn},{}],gos:[function(t,e){e.exports\x3dt("7eSDFh")},{}],handle:[function(t,e){e.exports\x3dt("D5DuLP")},{}],D5DuLP:[function(t,e){function n(t,e,n){return r.listeners(t).length?r.emit(t,e,n):(o[t]||(o[t]\x3d[]),void o[t].push(e))}var r\x3dt("ee").create(),o\x3d{};e.exports\x3dn,n.ee\x3dr,r.q\x3do},{ee:"QJf3ax"}],id:[function(t,e){e.exports\x3dt("XL7HBI")},{}],XL7HBI:[function(t,e){function n(t){var e\x3dtypeof t;return!t||"object"!\x3d\x3de\x26\x26"function"!\x3d\x3de?-1:t\x3d\x3d\x3dwindow?0:i(t,o,function(){return r++})}var r\x3d1,o\x3d"nr@id",i\x3dt("gos");e.exports\x3dn},{gos:"7eSDFh"}],G9z0Bl:[function(t,e){function n(){var t\x3dl.info\x3dNREUM.info;if(t\x26\x26t.licenseKey\x26\x26t.applicationID\x26\x26f\x26\x26f.body){s(h,function(e,n){e in t||(t[e]\x3dn)}),l.proto\x3d"https"\x3d\x3d\x3dp.split(":")[0]||t.sslForHttp?"https://":"http://",a("mark",["onload",i()]);var e\x3df.createElement("script");e.src\x3dl.proto+t.agent,f.body.appendChild(e)}}function r(){"complete"\x3d\x3d\x3df.readyState\x26\x26o()}function o(){a("mark",["domContent",i()])}function i(){return(new Date).getTime()}var a\x3dt("handle"),s\x3dt(1),c\x3d(t(2),window),f\x3dc.document,u\x3d"addEventListener",d\x3d"attachEvent",p\x3d(""+location).split("?")[0],h\x3d{beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-627.min.js"},l\x3de.exports\x3d{offset:i(),origin:p,features:{}};f[u]?(f[u]("DOMContentLoaded",o,!1),c[u]("load",n,!1)):(f[d]("onreadystatechange",r),c[d]("onload",n)),a("mark",["firstbyte",i()])},{1:22,2:13,handle:"D5DuLP"}],loader:[function(t,e){e.exports\x3dt("G9z0Bl")},{}],22:[function(t,e){function n(t,e){var n\x3d[],o\x3d"",i\x3d0;for(o in t)r.call(t,o)\x26\x26(n[i]\x3de(o,t[o]),i+\x3d1);return n}var r\x3dObject.prototype.hasOwnProperty;e.exports\x3dn},{}],23:[function(t,e){function n(t,e,n){e||(e\x3d0),"undefined"\x3d\x3dtypeof n\x26\x26(n\x3dt?t.length:0);for(var r\x3d-1,o\x3dn-e||0,i\x3dArray(0\x3eo?0:o);++r\x3co;)i[r]\x3dt[e+r];return i}e.exports\x3dn},{}],24:[function(t,e){function n(t){return!(t\x26\x26"function"\x3d\x3dtypeof t\x26\x26t.apply\x26\x26!t[i])}var r\x3dt("ee"),o\x3dt(1),i\x3d"nr@wrapper",a\x3dObject.prototype.hasOwnProperty;e.exports\x3dfunction(t){function e(t,e,r,a){function nrWrapper(){var n,i,s,f;try{i\x3dthis,n\x3do(arguments),s\x3dr\x26\x26r(n,i)||{}}catch(d){u([d,"",[n,i,a],s])}c(e+"start",[n,i,a],s);try{return f\x3dt.apply(i,n)}catch(p){throw c(e+"err",[n,i,p],s),p}finally{c(e+"end",[n,i,f],s)}}return n(t)?t:(e||(e\x3d""),nrWrapper[i]\x3d!0,f(t,nrWrapper),nrWrapper)}function s(t,r,o,i){o||(o\x3d"");var a,s,c,f\x3d"-"\x3d\x3d\x3do.charAt(0);for(c\x3d0;c\x3cr.length;c++)s\x3dr[c],a\x3dt[s],n(a)||(t[s]\x3de(a,f?s+o:o,i,s))}function c(e,n,r){try{t.emit(e,n,r)}catch(o){u([o,e,n,r])}}function f(t,e){if(Object.defineProperty\x26\x26Object.keys)try{var n\x3dObject.keys(t);return n.forEach(function(n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){return t[n]\x3de,e}})}),e}catch(r){u([r])}for(var o in t)a.call(t,o)\x26\x26(e[o]\x3dt[o]);return e}function u(e){try{t.emit("internal-error",e)}catch(n){}}return t||(t\x3dr),e.inPlace\x3ds,e.flag\x3di,e}},{1:23,ee:"QJf3ax"}]},{},["G9z0Bl",4,11,5]);\n;NREUM.info\x3d{beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",licenseKey:"a34e71e9c7",applicationID:"5964817",sa:1,agent:"js-agent.newrelic.com/nr-627.min.js"}\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Home Page","url":"","timeout":-1,"async":true,"oldVendorName":"RocketFuel","usesDocumentWrite":false,"templated":true,"name":"RocketFuel - Homepage - Men","disabled":true,"id":14742331,"oldLibraryTemplateId":"36160","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rocketfuelhomepagemen.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n  var img \x3d new Image();\n  img.src \x3d "//${campaign_id}p.rfihub.com/ca.gif?rb\x3d${merchant_id}\x26ca\x3d${campaign_id}\x26ra\x3d${random}"\n\x3c/script\x3e';tag.addClientFiltersList(["toast.filters.OnlyOnMenHomepage"]);tag.addClientVariablesMap({"random":"toast.variables.RandomNumber","merchant_id":"toast.variables.RocketFuelMerchantID","campaign_id":"toast.variables.RocketFuelCampaignID9"});tag.addParameters([{"name":"RocketFuel Merchant ID","description":null,
"token":"merchant_id"},{"name":"RocketFuel Campaign ID","description":null,"token":"campaign_id"},{"name":"Random Number","description":null,"token":"random"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rocketfueluniversal.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"oldLibraryTemplateName":'Sub2 - Basket Page (depends upon "Sub2 - Main Script - All Pages")',"url":"","timeout":5E3,"async":true,"oldVendorName":"Sub2","usesDocumentWrite":false,"templated":true,"name":"Sub2 - Basket Page","disabled":false,"id":16870203,"oldLibraryTemplateId":"39678","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.sub2basketpage.Tag";
qubit.Define.clientNamespace(pkg,tag);tag.htmlContent='\x3cscript\x3e\n\n(function ()\n{\n  var waitFor_S2Tech_SendBasket \x3d setInterval(function ()\n  {\n    if (typeof S2Tech_SendBasket \x3d\x3d\x3d \'function\')\n    {\n      clearInterval(waitFor_S2Tech_SendBasket);\n      \n      var basketData \x3d "\x3cStore\x3e";\n\n      for (var i \x3d 0; i \x3c ${sku}.length; i++)\n      {\n        basketData +\x3d "\x3cProduct\x3e";\n        basketData +\x3d "\x3cSKU\x3e" + ${sku}[i] + "\x3c/SKU\x3e";\n        basketData +\x3d "\x3cProduct_ID\x3e" + ${product_id}[i] + "\x3c/Product_ID\x3e";\n        basketData +\x3d "\x3cProduct_Name\x3e" + ${product_name}[i] + "\x3c/Product_Name\x3e";\n        basketData +\x3d "\x3cUnit_Price\x3e" + ${unit_price}[i] + "\x3c/Unit_Price\x3e";\n        basketData +\x3d "\x3cQuantity\x3e" + ${quantity}[i] + "\x3c/Quantity\x3e";\n        basketData +\x3d "\x3c/Product\x3e";\n      }\n\n      basketData +\x3d "\x3c/Store\x3e";\n\n      S2Tech_SendBasket(basketData) ;\n    }\n  }, 100);\n\n  setTimeout(function ()\n  {\n    clearInterval(waitFor_S2Tech_SendBasket);\n  }, 5000);\n\n})();\n\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"quantity":"toast.variables.ListOfProductQuantities","product_id":"toast.variables.ListOfProductIDs","sku":"toast.variables.ListOfProductSKUs","unit_price":"toast.variables.ListOrProductPrices","product_name":"toast.variables.ListOfProductNames"});tag.addParameters([{"name":"List of Product SKUs","description":null,"token":"sku"},{"name":"List of Product IDs","description":null,"token":"product_id"},{"name":"List of Product Names",
"description":null,"token":"product_name"},{"name":"List or Product Prices","description":null,"token":"unit_price"},{"name":"List of Product Quantities","description":null,"token":"quantity"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.rulebasketpage.Tag","toast.tags.sub2mainscriptallpages.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Blank Tag","url":"","timeout":5E3,"async":true,"oldVendorName":"OpenTag","usesDocumentWrite":false,"templated":true,"name":"Rule: jQuery exists + document ready","disabled":false,"id":16933522,"oldLibraryTemplateId":"35177","locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulejqueryexistsdocumentready.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.WaitForJqueryAndDocumentReady"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Coast - RocketFuel conversion pixel","disabled":false,"id":42892996,"locked":false,"locationObject":"BODY"});var pkg="toast.tags.coastrocketfuelconversionpixel.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\"\x3c!-- Code for Action: Toast UK Toast Order Conf: 25.11.11 --\x3e\n\x3c!-- Begin Rocket Fuel Conversion Action Tracking Code Version 9 --\x3e\n\x3cscript type\x3d'text/javascript'\x3e\n  (function() {\n    var w \x3d window, d \x3d document;\n    var s \x3d d.createElement('script');\n    s.setAttribute('async', 'true');\n    s.setAttribute('type', 'text/javascript');\n    s.setAttribute('src', '//c1.rfihub.net/js/tc.min.js');\n    var f \x3d d.getElementsByTagName('script')[0];\n    f.parentNode.insertBefore(s, f);\n    if (typeof w['_rfi'] !\x3d\x3d 'function') {\n      w['_rfi']\x3dfunction() {\n        w['_rfi'].commands \x3d w['_rfi'].commands || [];\n        w['_rfi'].commands.push(arguments);\n      };\n    }\n    \n    var returning \x3d ${Returning} \x3d\x3d\x3d true ? \"existing\" : \"new\";\n    \n    _rfi('setArgs', 'ver', '9');\n    _rfi('setArgs', 'rb', '1429');\n    _rfi('setArgs', 'ca', '20478507');\n    _rfi('setArgs', 'revenue', '${OrderTotal}');\n    _rfi('setArgs', 'transid', '${OrderId}');\n    _rfi('setArgs', 'cust1', returning);\n    _rfi('track');\n  })();\n\x3c/script\x3e";
tag.addClientFiltersList(["toast.filters.DefaultFilterMatchAll"]);tag.addClientVariablesMap({"Returning":"toast.variables.UserIsReturning","OrderTotal":"toast.variables.TransactionOrderTotal","OrderId":"toast.variables.TransactionOrderId"});tag.addParameters([{"name":"Revenue","description":null,"token":"OrderTotal"},{"name":"Returning User","description":null,"token":"Returning"},{"name":"Order ID","description":null,"token":"OrderId"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleconfirmationpage.Tag"]);
tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"Rule: Mobile Device","disabled":false,"id":37876619,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.rulemobiledevice.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent="\x3cscript\x3e;\x3c/script\x3e";tag.addClientFiltersList(["toast.filters.IsMobileDevice"]);
tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"oldLibraryTemplateName":"Product iframe","url":"","timeout":-1,"async":true,"oldVendorName":"Mediaplex","usesDocumentWrite":false,"templated":true,"name":"Mediaplex - Product Page","disabled":true,"id":15219390,"oldLibraryTemplateId":"36169","locked":false,"locationObject":"BODY"});var pkg="toast.tags.mediaplexproductpage.Tag";qubit.Define.clientNamespace(pkg,
tag);tag.htmlContent='\x3cscript\x3e\n(function(){\n\n  var frame \x3d document.createElement("iframe");\n  var src \x3d (document.location.protocol \x3d\x3d\x3d "https:") ? "https://secure." : "http://";\n  src \x3d src + "img-cdn.mediaplex.com/0/${client_id}/universal.html?page_name\x3d${page_name}\x26${event_name}\x3d1\x26Primary_Category\x3d${category}\x26Sub_Category\x3d${subcategory}\x26SKU\x3d${product_sku}\x26mpuid\x3d";\n  frame.src \x3d src;\n  frame.height \x3d 1;\n  frame.width \x3d 1;\n  frame.frameborder \x3d 0;\n  document.body.appendChild(frame);\n\n})();\n\x3c/script\x3e';
tag.addClientFiltersList(["toast.filters.WaitForProductUV"]);tag.addClientVariablesMap({"product_sku":"toast.variables.ProductSKU","page_name":"toast.variables.PageName7","event_name":"toast.variables.EventName7","category":"toast.variables.PageCategory","subcategory":"toast.variables.PageSubategory","client_id":"toast.variables.MediaplexClientID"});tag.addParameters([{"name":"Mediaplex Client ID","description":null,"token":"client_id"},{"name":"Page Name","description":null,"token":"page_name"},
{"name":"Event Name","description":null,"token":"event_name"},{"name":"Page Category","description":null,"token":"category"},{"name":"Page Subategory","description":null,"token":"subcategory"},{"name":"Product SKU","description":null,"token":"product_sku"}]);tag.genericDependencies=[];tag.addClientDependenciesList(["toast.tags.ruleproductpage.Tag"]);tag.pre=function(){};tag.script=function(){};tag.post=function(){}})();
(function(){var instance=qubit.opentag.CustomTag;var tag=new instance({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"dtxtngytz5im1.cloudfront.net/feedback-min.js","timeout":-1,"async":true,"usesDocumentWrite":false,"prePostWindowScope":true,"name":"Qubit Exit Feedback [CUSTOM][PAUSED]","disabled":false,"id":12552885,"locked":false,"locationObject":"HEAD"});var pkg="toast.tags.qubitexitfeedbackcustompaused.Tag";qubit.Define.clientNamespace(pkg,tag);tag.htmlContent=
"";tag.addClientFiltersList(["toast.filters.FireForcedEFOrStandardEF"]);tag.addClientVariablesMap({});tag.addParameters([]);tag.genericDependencies=[];tag.addClientDependenciesList([]);tag.pre=function(){var showProbability=1;if(window.__qbOnlyShowForcedEFbox)showProbability=0;window.q_fb_opts={"cssExtra":"#qb_feedback_frame {   padding: 10px; }  body div {   height: 100%;   width: 100%;   font-family: 'HelveticaNeueLT-LightCond','pragmatica-web-condensed',arial,sans-serif; }  .content.getFeedback {  position: absolute;     width: 565px;     top: 16px;     height: 380px;     background-color: white; }  #main {   background: none;   width: 100%;   top: 0px;   left: 0px;   position: absolute;   height: 100%;   padding: 0px; }  .content.getFeedback div {       position: absolute;       top: 62px;       height: 284px;       left: 42px;       width: 505px; }  h1 {     text-align: center;     margin: 0px; }  p {   text-align: center;   width: 403px;   font-size: 12px;   font-weight: normal;   margin-left: 51px; }  .second-message {     font-weight: normal;     width: 291px;     margin-left: 107px; }  .third-message {     width: 416px; }  textarea {   position: absolute;   top: 157px;   left: 52px;   height: 126px;   max-height: 126px;   width: 416px;   max-width: 416px;   background-color: white;   border: 1px solid black;   border-radius: 0px;   resize: none; }  .getFeedback div a {  position: absolute;background: none;background-color: black;box-shadow: none;color: white;text-transform: lowercase;font-family: \"Helvetica Neue\",Arial,Helvetica,sans-serif;padding-left: 19px;padding-right: 17px;padding-top: 6px;padding-bottom: 8px;border: none;filter: none;top: 281px;left: 208px;margin-left: 0px;font-size: 12px;border-radius: 0px;}  .content.thankYou {  text-align: center;     background-color: white;     height: 344px;     left: 1px;     width: 565px;     top: 16px;     position: absolute; } .content.thankYou h1 {  margin-top: 140px;     margin-left: 33px; } .enabled .send {  background: none;     border: none;     filter: none;     background-color: black;     color: white;     box-shadow: none; } .enabled .send:hover {  background: none;     background-color: black;     color: white;     border: none;     filter: none; }  .close {   opacity: 1;   background: none;   background-image: url(https://s3-eu-west-1.amazonaws.com/qubit-etc/_generic/close_button_black_30px.png);   width: 28px;   height: 28px;   left: 570;   top: 2px;   display: block;   filter: alpha(opacity\x3d100);   z-index: 9999999999999; } #a-new-site {   background-image: url(https://s3-eu-west-1.amazonaws.com/qubit-etc/toast/ef/ef-anewsite.jpg);   width: 129px;   height: 28px;   position: absolute;   top: 41px;   left: 50%;   margin-left: -64px;   z-index: 999;  }",
"topHeight":200,"moveVel":250,"attachTime":10*1E3,"returnTime":1E3,"showProb":showProbability,"pages":{"getFeedback":{"data":{"title":"","message":"You have been browsing our just-launched site, which we've worked hard to try to make faster, multi-device-friendly, image-rich and easy to use.","placeholder":""},"template":"\x3ch1\x3e{{title}}\x3c/h1\x3e \x3cp\x3e{{message}}\x3c/p\x3e \x3cp class\x3d\"second-message\"\x3ePlease do tell us what you think of it and - importantly - if there's anything you believe we've missed?\x3c/p\x3e \x3cp class\x3d\"third-message\"\x3eIf you'd like us to respond to your feedback, please leave your email address.\x3c/p\x3e \x3ctextarea tabindex\x3d'1' class\x3d'text'\x3e{{placeholder}}\x3c/textarea\x3e \x3ca tabindex\x3d'2' href\x3d'#' class\x3d'send'\x3esend feedback\x3c/a\x3e",
"nextPage":""},"thankYou":{"data":{"title":"THANK YOU","message":""}}},"container":{"width":600,"height":420,"template":"\x3cdiv id\x3d'main'\x3e   \x3cdiv id\x3d\"a-new-site\"\x3e\x3c/div\x3e   \x3ca href\x3d'#' class\x3d'close'\x3e\x3c/a\x3e   \x3cdiv class\x3d'content'\x3e\x3c/div\x3e \x3c/div\x3e"},"closeCountDays":60,"submitCountDays":90,"trackingId":"toast_new","domain":".toast.co.uk","clientId":36956,"profileId":2700,"configId":9};if(navigator.userAgent.toLowerCase().indexOf("msie 8")!==-1){window.q_fb_opts.cssExtra=
"#qb_feedback_frame {   padding: 10px; }  body div {   height: 100%;   width: 100%;   font-family: 'HelveticaNeueLT-LightCond','pragmatica-web-condensed',arial,sans-serif; }  .content.getFeedback {  position: absolute;     width: 565px;     top: 16px;     height: 415px;     background-color: white; }  #main {   background: none;   width: 100%;   top: 0px;   left: 0px;   position: absolute;   height: 100%;   padding: 0px; }  .content.getFeedback div {       position: absolute;       top: 73px;       height: 284px;       left: 35px;       width: 505px; }  h1 {     text-align: center;     margin: 0px; }  p {   text-align: center;   width: 403px;   font-size: 12px;   font-weight: bolder;   margin-left: 51px; }  .second-message {     font-weight: normal;     width: 291px;     margin-left: 107px; }  .third-message {     width: 420px; }  textarea {   position: absolute;   top: 157px;   left: 52px;   height: 126px;   max-height: 126px;   width: 416px;   max-width: 416px;   background-color: white;   border: 1px solid black;   border-radius: 0px;   resize: none; }  .getFeedback div a {  position: absolute;background: none;background-color: black;box-shadow: none;color: white;text-transform: lowercase;font-family: \"Helvetica Neue\",Arial,Helvetica,sans-serif;padding-left: 19px;padding-right: 17px;padding-top: 6px;padding-bottom: 8px;border: none;filter: none;top: 281px;left: 208px;margin-left: 0px;font-size: 12px;border-radius: 0px;}  .content.thankYou {  text-align: center;     background-color: white;     height: 344px;     left: 1px;     width: 565px;     top: 16px;     position: absolute; } .content.thankYou h1 {  margin-top: 140px;     margin-left: 33px; } .enabled .send {  background: none;     border: none;     filter: none;     background-color: black;     color: white;     box-shadow: none; } .enabled .send:hover {  background: none;     background-color: black;     color: white;     border: none;     filter: none; }  .close {   opacity: 1;   background: none;   background-image: url(https://s3-eu-west-1.amazonaws.com/qubit-etc/_generic/close_button_black_30px.png);   width: 28px;   height: 28px;   left: 550;   top: 2px;   display: block;   filter: alpha(opacity\x3d100);   z-index: 9999999999999; } #a-new-site {   background-image: url(https://s3-eu-west-1.amazonaws.com/qubit-etc/toast/ef/ef-anewsite.jpg);   width: 129px;   height: 28px;   position: absolute;   top: 41px;   left: 50%;   margin-left: -64px;   z-index: 999;  }";
window.q_fb_opts.container.height=430}if(window.__qbOnlyShowForcedEFbox){var waitForForceEFboxFunction=function(){if(typeof window.q_ef_show==="function")window.q_ef_show();else setTimeout(waitForForceEFboxFunction,100)};waitForForceEFboxFunction()}};tag.script=function(){};tag.post=function(){}})();(function(){try{qubit.opentag.Main.run()}catch(ex$$0){try{console.error("Errors during opentag main runtime.",ex$$0)}catch(ex){}}})();
